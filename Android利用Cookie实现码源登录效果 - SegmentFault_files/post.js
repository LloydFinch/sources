define("template",["jquery"],function(e){"use strict";return function(t,n){var r;return r=t||"",e.each(n,function(t,n){var i,o;i=typeof n,o=new RegExp("{{\\s*"+t+"\\s*}}","g"),"object"===i&&null!==n?e.each(n,function(e,n){var i;i=new RegExp("{{\\s*"+t+"."+e+"\\s*}}","g"),r=r.replace(i,n)}):r=r.replace(o,n)}),r}}),define("sfModal",["jquery","template"],function(e,t){"use strict";return function(n){var r,i;if("object"!=typeof n){if("hide"===n)return void e(".sfmodal").modal("hide");if("toggle"===n)return void e(".sfmodal").modal("toggle");n={content:n,hideDone:!0}}r=e.extend({hideTitle:!1,hideFooter:!1,modalSize:"",title:"警告：前方高能！",content:"玩脱了",wrapper:null,$content:null,hideClose:!1,closeText:"取消",closeClass:"btn-default",hideDone:!1,doneText:"确认",doneClass:"btn-primary",doneFn:function(){e(".sfmodal").modal("hide")},show:function(){},shown:function(){},hide:function(){},hidden:function(){},loaded:function(){}},n),i='<div class="sfmodal modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">  <div class="modal-dialog {{modalSize}}">    <div class="modal-content">      '+(r.hideTitle?"":'<div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title">{{title}}</h4>      </div>')+'<div class="modal-body">        <p class="sfModal-content">          </div>          <div class="modal-footer '+(r.hideFooter?"hidden":"")+'">'+(r.hideClose?"":'<button type="button" class="btn {{closeClass}}" data-dismiss="modal">{{closeText}}</button>')+(r.hideDone?"":'<button type="button" class="btn {{doneClass}} done-btn">{{doneText}}</button>')+"</div>        </div>      </div>    </div>",e(".sfmodal").length>0&&(e(".sfmodal").remove(),e(".modal-backdrop").remove()),r.wrapper?(e(r.wrapper).append(t(i,r)),e(r.wrapper).append('<div class="modal-backdrop in"></div>')):e("body").append(t(i,r)),r.$content?e(".sfmodal .sfModal-content").append(r.$content):e(".sfmodal .sfModal-content").html(r.content),e(".sfmodal").modal({keyboard:!0}),e(".sfmodal").on("show.bs.modal",r.show).on("shown.bs.modal",r.shown).on("hide.bs.modal",function(t){r.hide(t),r.wrapper&&e(".modal-backdrop").remove()}).on("hidden.bs.modal",r.hidden).on("loaded.bs.modal",r.loaded).modal("show"),e(".sfmodal .done-btn").click(function(t){r.doneFn(t),r.wrapper&&e(".modal-backdrop").remove()})}}),define("mobile",["jquery"],function(e){return window.innerWidth>767?{login:null,signup:null}:(e(".hate, .like").data("toggle","false"),{login:function(){location.href="/user/login"},signup:function(){location.href="/user/register"}})}),function(e){e.fn.hoverIntent=function(t,n,r,i){var o={interval:i||400,sensitivity:5,timeout:600};o="object"==typeof t?e.extend(o,t):e.isFunction(n)?e.extend(o,{over:t,out:n,selector:r}):e.extend(o,{over:t,out:t,selector:n});var a,l,s,c,u=function(e){a=e.pageX,l=e.pageY},d=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((s-a)*(s-a)+(c-l)*(c-l))<o.sensitivity?(e(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,o.over.apply(n,[t])):(s=a,c=l,n.hoverIntent_t=setTimeout(function(){d(t,n)},o.interval),void 0)},f=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,o.out.apply(t,[e])},p=function(t){var n=e.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"===t.type?(s=n.pageX,c=n.pageY,e(r).on("mousemove.hoverIntent",u),r.hoverIntent_s||(r.hoverIntent_t=setTimeout(function(){d(n,r)},o.interval))):(e(r).off("mousemove.hoverIntent",u),r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){f(n,r)},o.timeout)))};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},o.selector)}}(jQuery),define("jquery_hoverIntent",["jquery"],function(e){return function(){var t;return t||e.$.fn.hoverIntent}}(this)),define("sfAjax",["jquery"],function(e){"use strict";e.sfAjax=function(t,n,r,i){var o,a,l,s;a=e.extend({id:t.data("id"),"do":t.data("do"),type:t.data("type")},r),o=a["do"],l=o.indexOf("/cancel")>0?o.replace("/cancel",""):o+"/cancel",s="/api/"+a.type+"/"+a.id+"/"+a["do"],e.post(s,function(e){0===e.status?(t.data("do",l),n?n(e):location.reload()):i&&i(e)})}}),function(e){"function"==typeof define&&define.amd?define("jquery_cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return l.raw?e:encodeURIComponent(e)}function n(e){return l.raw?e:decodeURIComponent(e)}function r(e){return t(l.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),l.json?JSON.parse(e):e}catch(t){}}function o(t,n){var r=l.raw?t:i(t);return e.isFunction(n)?n(r):r}var a=/\+/g,l=e.cookie=function(i,a,s){if(void 0!==a&&!e.isFunction(a)){if(s=e.extend({},l.defaults,s),"number"==typeof s.expires){var c=s.expires,u=s.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[t(i),"=",r(a),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var d=i?void 0:{},f=document.cookie?document.cookie.split("; "):[],p=0,h=f.length;h>p;p++){var m=f[p].split("="),g=n(m.shift()),v=m.join("=");if(i&&i===g){d=o(v,a);break}i||void 0===(v=o(v))||(d[g]=v)}return d};l.defaults={},e.removeCookie=function(t,n){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(o){function a(){var t=0;s.each(function(){var n=e(this);if(!c.skip_invisible||n.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else n.trigger("appear"),t=0})}var l,s=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return o&&(r!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),r!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),e.extend(c,o)),l=c.container===r||c.container===t?i:e(c.container),0===c.event.indexOf("scroll")&&l.bind(c.event,function(){return a()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var r=s.length;c.appear.call(t,r,c)}e("<img />").bind("load",function(){var r=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[c.effect](c.effect_speed),t.loaded=!0;var i=e.grep(s,function(e){return!e.loaded});if(s=e(i),c.load){var o=s.length;c.load.call(t,o,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&s.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){a()}),this},e.belowthefold=function(n,o){var a;return a=o.container===r||o.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(o.container).offset().top+e(o.container).height(),a<=e(n).offset().top-o.threshold},e.rightoffold=function(n,o){var a;return a=o.container===r||o.container===t?i.width()+i.scrollLeft():e(o.container).offset().left+e(o.container).width(),a<=e(n).offset().left-o.threshold},e.abovethetop=function(n,o){var a;return a=o.container===r||o.container===t?i.scrollTop():e(o.container).offset().top,a>=e(n).offset().top+o.threshold+e(n).height()},e.leftofbegin=function(n,o){var a;return a=o.container===r||o.container===t?i.scrollLeft():e(o.container).offset().left,a>=e(n).offset().left+o.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("jquery_lazyload",["jquery"],function(e){return function(){var t;return t||e.$.fn.lazyload}}(this)),function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,o=n.push,a=n.slice,l=n.concat,s=r.toString,c=r.hasOwnProperty,u=Array.isArray,d=Object.keys,f=i.bind,p=function(e){return e instanceof p?e:this instanceof p?void(this._wrapped=e):new p(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):e._=p,p.VERSION="1.7.0";var h=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}};p.iteratee=function(e,t,n){return null==e?p.identity:p.isFunction(e)?h(e,t,n):p.isObject(e)?p.matches(e):p.property(e)},p.each=p.forEach=function(e,t,n){if(null==e)return e;t=h(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var o=p.keys(e);for(r=0,i=o.length;i>r;r++)t(e[o[r]],o[r],e)}return e},p.map=p.collect=function(e,t,n){if(null==e)return[];t=p.iteratee(t,n);for(var r,i=e.length!==+e.length&&p.keys(e),o=(i||e).length,a=Array(o),l=0;o>l;l++)r=i?i[l]:l,a[l]=t(e[r],r,e);return a};var m="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(e,t,n,r){null==e&&(e=[]),t=h(t,r,4);var i,o=e.length!==+e.length&&p.keys(e),a=(o||e).length,l=0;if(arguments.length<3){if(!a)throw new TypeError(m);n=e[o?o[l++]:l++]}for(;a>l;l++)i=o?o[l]:l,n=t(n,e[i],i,e);return n},p.reduceRight=p.foldr=function(e,t,n,r){null==e&&(e=[]),t=h(t,r,4);var i,o=e.length!==+e.length&&p.keys(e),a=(o||e).length;if(arguments.length<3){if(!a)throw new TypeError(m);n=e[o?o[--a]:--a]}for(;a--;)i=o?o[a]:a,n=t(n,e[i],i,e);return n},p.find=p.detect=function(e,t,n){var r;return t=p.iteratee(t,n),p.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},p.filter=p.select=function(e,t,n){var r=[];return null==e?r:(t=p.iteratee(t,n),p.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},p.reject=function(e,t,n){return p.filter(e,p.negate(p.iteratee(t)),n)},p.every=p.all=function(e,t,n){if(null==e)return!0;t=p.iteratee(t,n);var r,i,o=e.length!==+e.length&&p.keys(e),a=(o||e).length;for(r=0;a>r;r++)if(i=o?o[r]:r,!t(e[i],i,e))return!1;return!0},p.some=p.any=function(e,t,n){if(null==e)return!1;t=p.iteratee(t,n);var r,i,o=e.length!==+e.length&&p.keys(e),a=(o||e).length;for(r=0;a>r;r++)if(i=o?o[r]:r,t(e[i],i,e))return!0;return!1},p.contains=p.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=p.values(e)),p.indexOf(e,t)>=0)},p.invoke=function(e,t){var n=a.call(arguments,2),r=p.isFunction(t);return p.map(e,function(e){return(r?t:e[t]).apply(e,n)})},p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.findWhere=function(e,t){return p.find(e,p.matches(t))},p.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var l=0,s=e.length;s>l;l++)r=e[l],r>o&&(o=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},p.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var l=0,s=e.length;s>l;l++)r=e[l],o>r&&(o=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(a>i||1/0===i&&1/0===o)&&(o=e,a=i)});return o},p.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:p.values(e),r=n.length,i=Array(r),o=0;r>o;o++)t=p.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},p.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=p.values(e)),e[p.random(e.length-1)]):p.shuffle(e).slice(0,Math.max(0,t))},p.sortBy=function(e,t,n){return t=p.iteratee(t,n),p.pluck(p.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var g=function(e){return function(t,n,r){var i={};return n=p.iteratee(n,r),p.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};p.groupBy=g(function(e,t,n){p.has(e,n)?e[n].push(t):e[n]=[t]}),p.indexBy=g(function(e,t,n){e[n]=t}),p.countBy=g(function(e,t,n){p.has(e,n)?e[n]++:e[n]=1}),p.sortedIndex=function(e,t,n,r){n=p.iteratee(n,r,1);for(var i=n(t),o=0,a=e.length;a>o;){var l=o+a>>>1;n(e[l])<i?o=l+1:a=l}return o},p.toArray=function(e){return e?p.isArray(e)?a.call(e):e.length===+e.length?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.partition=function(e,t,n){t=p.iteratee(t,n);var r=[],i=[];return p.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},p.first=p.head=p.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:a.call(e,0,t)},p.initial=function(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},p.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},p.rest=p.tail=p.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var v=function(e,t,n,r){if(t&&p.every(e,p.isArray))return l.apply(r,e);for(var i=0,a=e.length;a>i;i++){var s=e[i];p.isArray(s)||p.isArguments(s)?t?o.apply(r,s):v(s,t,n,r):n||r.push(s)}return r};p.flatten=function(e,t){return v(e,t,!1,[])},p.without=function(e){return p.difference(e,a.call(arguments,1))},p.uniq=p.unique=function(e,t,n,r){if(null==e)return[];p.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=p.iteratee(n,r));for(var i=[],o=[],a=0,l=e.length;l>a;a++){var s=e[a];if(t)a&&o===s||i.push(s),o=s;else if(n){var c=n(s,a,e);p.indexOf(o,c)<0&&(o.push(c),i.push(s))}else p.indexOf(i,s)<0&&i.push(s)}return i},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var o=e[r];if(!p.contains(t,o)){for(var a=1;n>a&&p.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},p.difference=function(e){var t=v(a.call(arguments,1),!0,!0,[]);return p.filter(e,function(e){return!p.contains(t,e)})},p.zip=function(e){if(null==e)return[];for(var t=p.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=p.pluck(arguments,r);return n},p.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},p.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=p.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},p.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},p.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;r>o;o++,e+=n)i[o]=e;return i};var b=function(){};p.bind=function(e,t){var n,r;if(f&&e.bind===f)return f.apply(e,a.call(arguments,1));if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(a.call(arguments)));b.prototype=e.prototype;var i=new b;b.prototype=null;var o=e.apply(i,n.concat(a.call(arguments)));return p.isObject(o)?o:i}},p.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,o=r.length;o>i;i++)r[i]===p&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},p.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=p.bind(e[n],e);return e},p.memoize=function(e,t){var n=function(r){var i=n.cache,o=t?t.apply(this,arguments):r;return p.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},p.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(a.call(arguments,1)))},p.throttle=function(e,t,n){var r,i,o,a=null,l=0;n||(n={});var s=function(){l=n.leading===!1?0:p.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var c=p.now();l||n.leading!==!1||(l=c);var u=t-(c-l);return r=this,i=arguments,0>=u||u>t?(clearTimeout(a),a=null,l=c,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(s,u)),o}},p.debounce=function(e,t,n){var r,i,o,a,l,s=function(){var c=p.now()-a;t>c&&c>0?r=setTimeout(s,t-c):(r=null,n||(l=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=p.now();var c=n&&!r;return r||(r=setTimeout(s,t)),c&&(l=e.apply(o,i),o=i=null),l}},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},p.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},p.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},p.once=p.partial(p.before,2),p.keys=function(e){if(!p.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)p.has(e,n)&&t.push(n);return t},p.values=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},p.pairs=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},p.invert=function(e){for(var t={},n=p.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},p.functions=p.methods=function(e){var t=[];for(var n in e)p.isFunction(e[n])&&t.push(n);return t.sort()},p.extend=function(e){if(!p.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)c.call(t,n)&&(e[n]=t[n])}return e},p.pick=function(e,t,n){var r,i={};if(null==e)return i;if(p.isFunction(t)){t=h(t,n);for(r in e){var o=e[r];t(o,r,e)&&(i[r]=o)}}else{var s=l.apply([],a.call(arguments,1));e=new Object(e);for(var c=0,u=s.length;u>c;c++)r=s[c],r in e&&(i[r]=e[r])}return i},p.omit=function(e,t,n){if(p.isFunction(t))t=p.negate(t);else{var r=p.map(l.apply([],a.call(arguments,1)),String);t=function(e,t){return!p.contains(r,t)}}return p.pick(e,t,n)},p.defaults=function(e){if(!p.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)void 0===e[i]&&(e[i]=r[i])}return e},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e};var y=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var i=s.call(e);if(i!==s.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]===e)return r[o]===t;var a=e.constructor,l=t.constructor;if(a!==l&&"constructor"in e&&"constructor"in t&&!(p.isFunction(a)&&a instanceof a&&p.isFunction(l)&&l instanceof l))return!1;n.push(e),r.push(t);var c,u;if("[object Array]"===i){if(c=e.length,u=c===t.length)for(;c--&&(u=y(e[c],t[c],n,r)););}else{var d,f=p.keys(e);if(c=f.length,u=p.keys(t).length===c)for(;c--&&(d=f[c],u=p.has(t,d)&&y(e[d],t[d],n,r)););}return n.pop(),r.pop(),u};p.isEqual=function(e,t){return y(e,t,[],[])},p.isEmpty=function(e){if(null==e)return!0;if(p.isArray(e)||p.isString(e)||p.isArguments(e))return 0===e.length;for(var t in e)if(p.has(e,t))return!1;return!0},p.isElement=function(e){return!(!e||1!==e.nodeType)},p.isArray=u||function(e){return"[object Array]"===s.call(e)},p.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){p["is"+e]=function(t){return s.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!==+e},p.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===s.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return null!=e&&c.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){var t=p.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],o=i[0];if(i[1]!==e[o]||!(o in e))return!1}return!0}},p.times=function(e,t,n){var r=Array(Math.max(0,e));t=h(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=p.invert(w),k=function(e){var t=function(t){return e[t]},n="(?:"+p.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};p.escape=k(w),p.unescape=k(x),p.result=function(e,t){if(null==e)return void 0;var n=e[t];return p.isFunction(n)?e[t]():n};var _=0;p.uniqueId=function(e){var t=++_+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,M=function(e){return"\\"+S[e]};p.template=function(e,t,n){!t&&n&&(t=n),t=p.defaults({},t,p.templateSettings);var r=RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,l){return o+=e.slice(i,l).replace(T,M),i=l+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(l){throw l.source=o,l}var s=function(e){return a.call(this,e,p)},c=t.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},p.chain=function(e){var t=p(e);return t._chain=!0,t};var L=function(e){return this._chain?p(e).chain():e};p.mixin=function(e){p.each(p.functions(e),function(t){var n=p[t]=e[t];p.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),L.call(this,n.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];p.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],L.call(this,n)}}),p.each(["concat","join","slice"],function(e){var t=n[e];p.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(e){function t(t,n,r,i){var o={data:i||0===i||i===!1?i:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:u,wrap:d,html:f,update:p};return t&&e.extend(o,t,{nodes:[],parent:n}),r&&(o.tmpl=r,o._ctnt=o._ctnt||o.tmpl(e,o),o.key=++x,(_.length?y:b)[x]=o),o}function n(t,i,o){var a,l=o?e.map(o,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+t.key+'" $2'):e:n(e,t,e._ctnt)}):t;return i?l:(l=l.join(""),l.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,i,o){a=e(i).get(),s(a),n&&(a=r(n).concat(a)),o&&(a=a.concat(r(o)))}),a?a:r(l))}function r(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function i(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,o,l,s){var c,u,d,f=e.tmpl.tag[r];if(!f)throw"Unknown template tag: "+r;return c=f._default||[],l&&!/\w$/.test(o)&&(o+=l,l=""),o?(o=a(o),s=s?","+a(s)+")":l?")":"",u=l?o.indexOf(".")>-1?o+a(l):"("+o+").call($item"+s:o,d=l?u:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):d=u=c.$1||"null",i=a(i),"');"+f[n?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(d).split("$1").join(u).split("$2").join(i||c.$2||"")+"__.push('"})+"');}return __;")}function o(t,r){t._wrap=n(t,!0,e.isArray(r)?r:[v.test(r)?r:e(r).html()]).join("")}function a(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function l(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function s(n){function r(n){function r(e){e+=c,a=u[e]=u[e]||t(a,b[a.parent.key+c]||a.parent)}var i,o,a,l,s=n;if(l=n.getAttribute(g)){for(;s.parentNode&&1===(s=s.parentNode).nodeType&&!(i=s.getAttribute(g)););i!==l&&(s=s.parentNode?11===s.nodeType?0:s.getAttribute(g)||0:0,(a=b[l])||(a=y[l],a=t(a,b[s]||y[s]),a.key=++x,b[x]=a),k&&r(l)),n.removeAttribute(g)}else k&&(a=e.data(n,"tmplItem"))&&(r(a.key),b[a.key]=a,s=e.data(n.parentNode,"tmplItem"),s=s?s.key:0);if(a){for(o=a;o&&o.key!=s;)o.nodes.push(n),o=o.parent;delete a._ctnt,delete a._wrap,e.data(n,"tmplItem",a)}}var i,o,a,l,s,c="_"+k,u={};for(a=0,l=n.length;l>a;a++)if(1===(i=n[a]).nodeType){for(o=i.getElementsByTagName("*"),s=o.length-1;s>=0;s--)r(o[s]);r(i)}}function c(e,t,n,r){return e?void _.push({_:e,tmpl:t,item:this,data:n,options:r}):_.pop()}function u(t,n,r){return e.tmpl(e.template(t),n,r,this)}function d(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function f(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||l(e)})}function p(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var h,m=e.fn.domManip,g="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},y={},w={key:0,data:{}},x=0,k=0,_=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var i,o,a,l,s=[],c=e(r),u=1===this.length&&this[0].parentNode;if(h=b||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),s=this;else{for(o=0,a=c.length;a>o;o++)k=o,i=(o>0?this.clone(!0):this).get(),e(c[o])[n](i),s=s.concat(i);k=0,s=this.pushStack(s,t,c.selector)}return l=h,h=null,e.tmpl.complete(l),s}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,r){if(t[0]&&e.isArray(t[0])){for(var i,o=e.makeArray(arguments),a=t[0],l=a.length,s=0;l>s&&!(i=e.data(a[s++],"tmplItem")););i&&k&&(o[2]=function(t){e.tmpl.afterManip(this,t,r)}),m.apply(this,o)}else m.apply(this,arguments);return k=0,!h&&e.tmpl.complete(b),this}}),e.extend({tmpl:function(r,i,a,l){var s,c=!l;if(c)l=w,r=e.template[r]||e.template(null,r),y={};else if(!r)return r=l.tmpl,b[l.key]=l,l.nodes=[],l.wrapped&&o(l,l.wrapped),e(n(l,null,l.tmpl(e,l)));return r?("function"==typeof i&&(i=i.call(l||{})),a&&a.wrapped&&o(a,a.wrapped),s=e.isArray(i)?e.map(i,function(e){return e?t(a,l,r,e):null}):[t(a,l,r,i)],c?e(n(l,null,s)):s):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||w},template:function(t,n){return n?("string"==typeof n?n=i(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",i(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,v.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(t,n,r){var i=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(t,n),s(i),k++}})}(jQuery),define("jquery_tmpl",["jquery"],function(e){return function(){var t;return t||e.$.fn.tmpl}}(this)),define("typeHelper",["jquery","jquery_tmpl"],function(e){"use strict";var t,n,r,i,o,a,l,s;l='<ul class="dropdown-menu" role="menu"></ul>',i=void 0,t=void 0,r=void 0,n=void 0,o=void 0,a=["gmail.com","qq.com","163.com","hotmail.com","sina.com","126.com","live.com","live.cn","vip.sina.com","vip.qq.com","sina.cn","sohu.com","139.com","wo.com.cn","189.cn","21cn.com"],s='<button class="btn btn-default result" type="button">${result}</button><a href="#" class="i-cancel ml10 delete-result">&times;</a>',e.fn.typeHelperOld=function(c){var u;i=e.extend({data:null,tpl:'<li><a href="#" data-value="${name}">${name}</a></li>',defaultList:[],showNum:5,remoteData:null,submitKey:null,onlyResult:!0,autoSelect:!0,emailMode:!1,insertHandler:function(){}},c),u=[],n=e(this),0!==n.length&&(n.after(e("<div></div>").addClass("typehelper")).siblings(".typehelper").append(n),t=n.parent().css("position","relative"),e.tmpl(l).insertAfter(n),r=t.find("ul").hide().css("minWidth",n.outerWidth()),e.each(i.defaultList,function(t,n){e.tmpl(i.tpl,n).appendTo(r)}),n.on("focus",function(){i.defaultList.length>0&&e(this).parent().trigger("show.typehelper")}),n.on("input",function(){e(this).parent().trigger("search.typehelper"),e(this).parent().trigger("show.typehelper")}),n.on("keydown",function(t){e(this).parent().trigger("select.typehelper",t)}),r.delegate("li","mouseover",function(){e(this).siblings("li").removeClass("active"),e(this).addClass("active")}),n.on("blur",function(){var t,n;e(this).parent().trigger("hide.typehelper"),i.autoSelect&&(e(this).siblings("ul").find(".active").length>0?(t=r.find(".active").index(),n=u[t],e(this).parent().trigger("insert.typehelper",[r.find(".active a"),n])):e(this).val(""))}),t.on("show.typehelper",function(){e(this).find("ul").show()}),t.on("hide.typehelper",function(){e(this).find("ul").hide()
}),t.on("insert.typehelper",function(o,a,l){t=e(this),n=t.find("input"),r=t.find("ul"),n.val(e(a).data("value")),e(".result",t).length>0&&(e(".result",t).remove(),t.find(".delete-result").remove()),i.onlyResult&&(n.hide(),r.after(e.tmpl(s,{result:n.val()})),i.submitKey&&n.data(i.submitKey,e(a).data(i.submitKey)),t.find(".result").on("click",function(){e(this).siblings(".delete-result").remove(),e(this).remove(),n.show().focus(),t.trigger("search.typehelper")}),t.find(".delete-result").on("click",function(){return e(this).siblings(".result").remove(),e(this).remove(),n.val("").show(),!1})),t.parents(".form-group").next(".form-group").find("input").focus(),i.insertHandler(l)}),t.on("select.typehelper",function(i,o){var a,l,s,c,d,f;if(t=e(this),n=t.find("input"),r=t.find("ul"),a=r.find("li"),o)switch(o.keyCode){case 38:o.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").prev("li").addClass("active"):a.last().addClass("active"));break;case 40:o.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").next("li").addClass("active"):a.first().addClass("active"));break;case 13:if(o.stopPropagation(),o.preventDefault(),r.find(".active").length<=0)return;c=r.find(".active").index(),f=u[c],t.trigger("insert.typehelper",[r.find(".active a"),f]),t.trigger("hide.typehelper");break;case 9:l=e(this).parents("form").find("input"),s=l.index(e("input:focus")),-1!==s&&(d=l.slice(s+1),d.length&&d.each(function(){var t,n;return n=e(this).attr("type"),t=["text","email","password","url"],e(this).val()||-1===t.indexOf(n)?void 0:(e(this).focus(),!1)}));break;case 27:o.preventDefault();break;default:return}}),t.on("search.typehelper",function(){var l,s,c,d;if(t=e(this),n=t.find("input"),r=t.find("ul"),n.val().length)if(c=[],i.remoteData)i.remoteData(n.val(),function(t){u=t,c=t,c.length>0&&(r.children().remove(),e.tmpl(i.tpl,c).appendTo(r),1===c.length&&r.children().first().addClass("active"))});else{for(d=0,i.emailMode&&(i.data=[{name:n.val()}],e.each(a,function(e,t){i.data.push({name:n.val().replace(/@.*$/,"")+"@"+t})})),o=i.data.length,s=0;o>s&&(l=i.data[s],!(0===l.name.toLowerCase().indexOf(n.val().toLowerCase())&&(c.push(l),d++,d>=i.showNum)));)s++;c.length>0&&(r.children().remove(),e.tmpl(i.tpl,c).appendTo(r),(1===c.length||i.emailMode)&&r.children().first().addClass("active"))}}),n.val().length>0&&t.trigger("insert.typehelper",n))}}),define("main",["sfModal","mobile","jquery_hoverIntent","sfAjax","bootstrap","jquery_cookie","jquery_lazyload","underscore","typeHelper"],function(e,t){var n,r,i,o,a,l,s,c,u,d,f,p,h;return $(".js__action--complain").on("click",function(){return e({title:"我要申诉",content:_.template($("#js__action--complain-tpl").html()),doneFn:function(){return $(".complain__form").submit()}})}),$(".js__view--selector").on("click",function(){var e;return e=$(this).data("action"),$.cookie("view",e),location.reload()}),$.cookie("view")&&$(".js__view--selector").removeClass("hidden-sm").removeClass("hidden-md").removeClass("hidden-lg"),s=function(){var e,t,n;n="test",t=window.sessionStorage;try{return t.setItem(n,"1"),t.removeItem(n),!0}catch(r){return e=r,!1}},p=function(e){var t;if(s()&&!(e>500))return t=localStorage.getItem("show-app-promotion-bar"),t=t||!0,t!==!0?$(".app-promotion-bar").hide():$(".app-promotion-bar").show(),$("body").on("click",".close",function(){return $(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)}),$("body").on("click",".icon",function(){return $(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)})},p(document.body.clientWidth),o=function(e){var t,n;switch(n="",t=new Date(e),t.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return n},a={events:function(e){var t;t=$("title"),e.data.events>0?(e.data.events>99&&(e.data.events="99+"),$("#messageCount").siblings(".has-unread__count").remove(),$("#messageCount").after('<span class="has-unread__count">'+e.data.events+"</span>"),$("#m-messageCount").text(e.data.events),$(".mobile-menu__unreadpoint").show(),t.text(/^\(\d+[\+]?\)/.test(t.text())?t.text().replace(/^\(\d+[\+]?\)/,"("+e.data.events+")"):"("+e.data.events+")"+$("title").text())):0===e.data.events&&($(".has-unread__count").remove(),t.text(t.text().replace(/^\(\d+[\+]?\)/,"")))},drafts:function(e){0!==e.data.drafts&&($("#draftCount .badge").remove(),$("#draftCount").append('<span class="badge">'+e.data.drafts+"</span>"))},invites:function(e){0!==e.data.invites&&($("#inviteCount .badge").remove(),$("#inviteCount").append('<span class="badge">'+e.data.invites+"</span>"))}},i=function(e,t){return $.ajax({dataType:"json",url:"/api/user/stat",data:{types:e},success:function(e){0===e.status&&e.data&&t&&t(e)}})},u=function(){i(["events","drafts","invites"],function(e){return a.events(e),a.drafts(e),a.invites(e)})},d=function(){i(["events"],function(e){return a.events(e)})},c=function(){e({modalSize:"modal-lg",title:"登录",doneText:"登陆",hideClose:!0,hideDone:!0,hideFooter:!0,content:$("#loginModal").text(),show:function(){return $("[name=mail]").first().focus(),$("#loginShowMore").click(function(e){e.preventDefault(),$(this).hide(),$(this).siblings().removeClass("hidden")}),$(".sfmodal .widget-login a").click(function(e){e.preventDefault(),window.open($(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),$("#loginReloadCaptcha").click(function(){$(this).find("img").attr("src","/user/captcha?w=240&h=50")})}}),$(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},$(".addWeek").each(function(){$(this).append(" "+o($(this).html()))}),$('[data-toggle="tooltip"]').tooltip({container:"body"}),$("img.lazy").lazyload({effect:"fadeIn"}),window.oauthLogin=function(){-1!==location.hostname.indexOf("segmentfault")?location.reload():location.href="/"},window.oauthRegister=function(){location.href="/user/bind"},n={_:window.SF.token,staticUrl:window.SF.staticUrl,userId:$("#SFUserId").attr("value"),userRank:$("#SFUserRank").attr("value"),renderUserStatEvents:d,login:t.login||c},$(document).ajaxError(function(e,t,n){413===t.status?($("#uploading")&&$("#uploading").text(""),alert("文件大小或尺寸超出限制，请修改后重新上传！")):console.log("Ajax "+t.status+": ",n.url)}),$(document).ajaxSend(function(e,t,r){r.url=-1===r.url.indexOf("?")?r.url+"?_="+n._:r.url+"&_="+n._}),$(document).ajaxComplete(function(t,r,i){var o,a,l,s,c;r.responseText&&(-1!==r.responseText.indexOf("<br />")||-1!==r.responseText.indexOf("<pre>exception ")?console.log("警告：前方高能！",r.responseText):r.responseJSON&&0===r.responseJSON.status?(-1===i.url.indexOf("do=autoComplete")||-1===i.url.indexOf("draft"))&&($(".error, .has-error").removeClass("error has-error"),$(".error--msg").remove()):r.responseJSON&&1===r.responseJSON.status&&(c=r.responseJSON,-1===i.url.indexOf("/user/stat")&&"login"===c.data[0]?n.login():"lock"===c.data[0]?e({title:c.data[0],content:"你被锁定，无法进行此操作",hideDone:!0}):"robot"===c.data[0]?location.href="/stop-robot":"unactivated"===c.data[0]?$("#activate").modal("show"):"author"===c.data[0]?e({title:"限制作者本人",content:"你是作者，无法对自己进行此操作",hideDone:!0}):"follow"===c.data[0]?e({title:"限制本人",content:"无法对自己进行此操作",hideDone:!0}):"rank"===c.data[0]?e({title:"声望值不够",content:"此操作要求你的声望值至少达到 "+c.data[1]+'，<a href="http://segmentfault.com/repu">如何获得声望？</a>',hideDone:!0}):"like"===c.data[0]?e({title:"无法进行此操作",content:"你已经赞过该条目。",hideDone:!0}):"blocked"===c.data[0]?e({title:"账号问题",content:'你的帐号因未知原因已被系统自动锁定，如需帮助，请发送邮件至 <a target="_blank" href="mailto:pr@segmentfault.com">pr@segmentfault.com</a> 联系管理员解决。',hideDone:!0}):"form"===c.data[0]&&(s=i.url.split("/")[2],s=s.split("?")[0],a=new RegExp("[?&]_="+n._),l=i.url.replace(a,""),o=!0,$.each(c.data[1],function(e,t){var n,r,i,a;return"captcha"===e&&($("[name=captcha]").parents(".form-group").show(),$(".captcha").parent("a").click()),i=e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),a="#"+s+i,r=$("form#"+s+" *[name="+e+"]").not("[type=hidden]").parents(".form-group"),0===r.length&&(r=$("form#"+s.replace(/s$/,"")+" *[name="+e+"]").not("[type=hidden]").parents(".form-group")),n=$('form[action="'+l+'"] *[name='+e+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$("form *[name="+e+"]").not("[type=hidden]").parents(".form-group")),n.length?(n.find(".help-block").remove(),n.addClass("has-error"),n.find(".input-group").length>0?n.find(".input-group").after('<span class="help-block err">'+t+"</span>"):n.find(".bootstrap-tagsinput").length?n.find(".bootstrap-tagsinput").addClass("error").after('<span class="help-block err">'+t+"</span>"):n.find("[name="+e+"]").not("[type=hidden]").after('<span class="help-block err">'+t+"</span>")):r.length?(r.find(".help-block.err").remove(),r.addClass("has-error"),r.find("[name="+e+"]").not("[type=hidden]").after('<span class="help-block err">'+t+"</span>")):($("form#"+s+" *[name="+e+"]").not("[type=hidden]").siblings(".error--msg").remove(),$("form#"+s+" *[name="+e+"]").not("[type=hidden]").addClass("error").attr("data-error",t).after('<span class="error--msg">'+t+"</span>")),$(a).length?$(a).addClass("error").attr("data-error",t):(a="#"+s.replace(/s$/,"")+i,$(a).addClass("error").attr("data-error",t).after('<span class="error--msg">'+t+"</span>")),o?(n.length&&n.find("[name="+e+"]").not("[type=hidden]").focus(),r.length&&r.find("[name="+e+"]").not("[type=hidden]").focus(),$(a).length&&$(a).focus(),o=!1):void 0}))))}),$("body").delegate("form","submit",function(e){var t;t=$(this),t.attr("method")&&t.attr("action")&&(e.preventDefault(),t.find("button[type=submit]").attr("disabled","disabled"),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),success:function(e){t.find("button[type=submit]").removeAttr("disabled"),0===e.status&&("/api/user?do=login"===t.attr("action")&&"/user/login"!==location.pathname?window.location.reload():/^\//.test(e.data)?window.location=e.data:window.location.reload())}}))}),$("body").delegate("form input","keydown",function(){$(this).removeClass("error"),$(this).parents(".form-group").removeClass("has-error"),$(this).next(".help-block.err").remove(),$(this).next(".error--msg").remove()}),r=null,n.userId&&(u(),r=setInterval(d,6e4)),l=void 0,h=void 0,"undefined"!=typeof document.hidden?(l="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(l="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(l="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(l="webkitHidden",h="webkitvisibilitychange"),$(document).on(h,function(){document[l]?clearInterval(r):n.userId?(u(),r=setInterval(d,6e4)):$.getJSON("/api/user/stat",function(e){0===e.status&&($("body").addClass("have-notify"),$("body").prepend('<div class="alert alert-warning topframe" role="alert">您已登录，请 <button class="btn btn-warning btn-xs" type="button" onclick="location.reload()">重新加载</button></div>'))})}),$("#searchBox").focus(function(){var e;e=$(".nav .menu").width()+180+"px",$(".nav .menu").hide(),$(this).animate({width:e},200)}),$("#searchBox").blur(function(){$(this).animate({width:"180px"},200,"swing",function(){$(".nav .menu").show()})}),$("#backtop").click(function(){return $("body,html").animate({scrollTop:0}),!1}),$(document).scroll(function(){$(this).scrollTop()>720?$("#backtop").removeClass("hidden"):$("#backtop").addClass("hidden")}),$(".topframe").length&&$(".topframe .close").click(function(){$(this).parent().remove(),0!==$(".topframe").length&&$(".topframe .content").text()||$("body").removeClass("have-notify")}),window.SFHacker={setOldVersion:function(){$.cookie("v","old"),window.location.reload()},unSetOldVersion:function(){$.removeCookie("v",{path:"/"}),window.location.reload()},makePureTextarea:function(){$.cookie("typemode","native"),window.location.reload()},unMakePureTextarea:function(){$.removeCookie("typemode",{path:"/"}),window.location.reload()}},$(".SFLogin").click(function(e){e.preventDefault(),n.login()}),$(".3rdLogin").click(function(e){e.preventDefault(),window.open($(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),$(".hoverDropdown").hoverIntent(function(){$(this).hasClass("open")||$(this).find(".dropdownBtn").dropdown("toggle")},function(){$(this).hasClass("open")&&$(this).find(".dropdownBtn").dropdown("toggle")},null,1),$(".dropdownBtn").click(function(e){var t;$(this).parent(".hoverDropdown").hasClass("open")&&(e.preventDefault(),t=$(this).attr("href"),e.ctrlKey||e.metaKey?window.open(t):location.href=t)}),f=function(e,t,n,r){var i;return i=e,i.length>0&&$(".write-btns a").each(function(){$(this).click(function(){return i.modal("show"),!1})}),$(".activate-change",i).click(function(){$(".activate-showmail").hide(),$(".activate-form").show()}),$(".activate-cancel",i).click(function(){$(".activate-showmail").show(),$(".activate-form").hide()}),i.find(".activate-form").on("submit",function(e){var t;return e.preventDefault(),t=$(this),$.post(n,{mail:t.find(".mail").val()},function(e){0===e.status&&(t.parent().find(".session-mail").text(t.find(".mail").val()),$(".activate-showmail").show(),$(".activate-form").hide(),location.reload())}),!1}),i.find(".activate-resend",i).click(function(){var e,n,i,o;n=$(this),e=n.siblings("span").find("span"),i=void 0,o=void 0,i=120,i--,$.post(t,function(t){var a;0===t.status?($(".company-activete-tips").length&&$(".company-activete-tips").html('<div class="alert alert-success">'+t.message+"</div>"),r&&r(),o=setInterval(function(){return 0===i?(clearInterval(o),n.show(),void n.siblings("span").hide()):void e.text(i--)},1e3)):($(".company-activete-tips").length&&$(".company-activete-tips").html(null!=(a='<div class="alert alert-danger">'+t.message)?a:t.data[1]+"</div>"),setTimeout(function(){$(".company-activete-tips").length&&$(".company-activete-tips").html('<div class="alert alert-success">激活邮件已发送 （<span>120</span>）</div>'),n.show()},9e5))})})},f($("#activate"),"/api/user/reactivate","/api/user/activate/mail"),f($("#companyActivate"),"/api/company/reactivate","/api/settings/mail/edit"),n}),define("bookmark",["jquery","sfModal","main","jquery_tmpl"],function(e,t){"use strict";var n,r;return n='<form class="bookmarklist-form" id="bookmarkArchives"><label for="bookmarkArchiveName" class="required">名称</label>    <input type="text" name="name" id="name" id="bookmarkArchiveName" class="form-control" value="${name}" placeholder="最多输入32个字" maxlength="32">    <br /><label for="bookmarkArchiveDescription" class="mt10">描述</label>    <textarea name="description" id="bookmarkArchiveDescription" class="form-control" placeholder="最多输入256个字">${description}</textarea>    <br /><input type="radio" name="isPrivate" class="mt10" value="0" id="bookmark-public"{{if !isPrivate}} checked{{/if}}/><label class="ml10" for="bookmark-public">公开</label>    <span class="text-muted">&mdash; 公开后不可再设置为私密</span><br />    <input type="radio" name="isPrivate" value="1" id="bookmark-private"{{if isPrivate}} checked{{/if}}{{if !isPrivate}} disabled{{/if}}/><label class="ml10" for="bookmark-private">私密</label>    <span class="text-muted">&mdash; 仅自己可见</span>    </form>',r='<form class="bookmarklist-form"><p class="required">添加到收藏夹</p><ul class="bookmarklist list-unstyled mb0">    {{each list}}<li data-id="${id}"{{if isBookmarked}}class="active"{{/if}}><input type="checkbox" {{if isBookmarked}}checked{{/if}}>${name}{{if ~~isPrivate}}<span class="text-muted label label-default ml10">私密</span>{{/if}}</li>{{/each}}</ul>    <div class="mt20"><a href="#" class="new-bookmark">+ 创建新收藏夹</a></div></form>',{createArchive:function(r,i,o){var a;a=this,t({title:"创建收藏夹",content:e.tmpl(n,{name:"",description:"",isPrivate:!0}),doneText:"提交",doneFn:function(){var t;t=e(".bookmarklist-form"),e.post("/api/bookmarkArchives/add",{name:t.find("[name=name]").val(),description:t.find("[name=description]").val(),isPrivate:t.find("[name=isPrivate]:checked").val()},function(e){0===e.status&&("edit"===i?a.editBookmark(r,o):"bookmark"===i?a.addBookmark(r,o,e.data.id):"other"===i?o(e):window.location.reload())})},hide:function(){"edit"===i?a.editBookmark(r,o):"bookmark"===i&&a.addBookmark(r,o)}})},editArchive:function(r){t({title:"编辑收藏夹",$content:e.tmpl(n,{name:r.data("name"),description:r.data("desc"),isPrivate:r.data("isprivate")}),doneText:"提交",doneFn:function(){var t;t=e(".bookmarklist-form"),e.post("/api/bookmarkArchive/"+r.data("id")+"/edit",{name:t.find("[name=name]").val(),description:t.find("[name=description]").val(),isPrivate:t.find("[name=isPrivate]:checked").val()},function(e){0===e.status&&window.location.reload()})}})},deleteArchive:function(n){t({title:"删除收藏夹",content:'确认要删除收藏夹「<span class="fuckXss"></span>」么？<br /><span class="text-danger">注意：收藏夹下的收藏也会被删除！</span>',doneText:"删除",doneClass:"btn-danger",closeText:"取消",show:function(){e(".fuckXss").text(n.data("name"))},doneFn:function(){e.post("/api/bookmarkArchive/"+n.data("id")+"/delete",function(e){e.status||(location.href=e.data)})}})},addBookmark:function(e,t,n){this.getArchive(e,t,"bookmark",n)},editBookmark:function(e,t){this.getArchive(e,t,"edit")},successFn:null,getArchive:function(n,i,o,a){var l;l=this,l.successFn=i,e.get("/api/user/bookmarkArchives",{objectId:n.data("id")},function(s){var c;c="",0===s.status&&(t({title:"收藏",content:e.tmpl(r),doneText:"提交",doneFn:function(){var r,o,a;o=e(this),e(".bookmarklist").removeClass("error").siblings(".error--msg").remove(),a=[],r=e(".bookmarklist-form").length>1?e(".bookmarklist-form").eq(1):e(".bookmarklist-form"),r.find("li.active").each(function(){a.push(e(this).data("id"))}),e(".sfmodal").find(".done-btn").text("加载中").attr("disabled","disabled"),e.post("/api/"+n.data("type")+"/"+n.data("id")+"/bookmark",{archiveIds:a},function(n){var r;0===n.status?("false"===n.data&&window.location.reload(),i&&i(n,a.length),t("hide"),r=location.pathname.split("/"),"bookmark"===r[1]&&-1===a.indexOf(r[2])&&location.reload()):(e(".bookmarklist").addClass("error").after('<span class="error--msg">必须选择收藏夹</span>'),e(".sfmodal").find(".done-btn").text("发布").removeAttr("disabled"))})}}),e(".sfModal-content").html(e.tmpl(r,[{list:s.data}])),e(".bookmarklist").delegate("li","click",function(){var t;t=e(this).find("input[type=checkbox]"),e(this).toggleClass("active"),e(this).hasClass("active")?t.prop("checked",!0):t.prop("checked",!1)}),a&&e(".bookmarklist li[data-id="+a+"]").click(),e(".sfmodal .new-bookmark").click(function(){return l.createArchive(n,o,i),!1}))})},deleteBookmark:function(n){t({title:"删除收藏",content:'确认要从收藏夹「<span class="delete-archivemodal"></span>」中删除收藏「<span class="delete-bookmarkmodal"></span>」么？',doneText:"删除",doneClass:"btn-danger",closeText:"取消",show:function(){e(".delete-archivemodal").text(n.data("archive")),e(".delete-bookmarkmodal").text(n.data("title"))},doneFn:function(){e.post("/api/"+n.data("type")+"/"+n.data("id")+"/bookmark",{archiveId:null},function(e){0===e.status&&(n.parents(".stream-list__item").fadeOut().remove(),t("hide"))})}})}}}),define("statusToggle",[],function(){"use strict";return function(e){e.data("toggle","false"),e.data("toggle")&&(e.on("active",function(t,n){e.data("toggle","true"),n.call(this)}),e.on("unactive",function(t,n){e.data("toggle","true"),n.call(this)}))}}),!function(e){"undefined"!=typeof exports?e(exports):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("highlightjs",[],function(){return window.hljs}))}(function(e){function t(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(e){return e.nodeName.toLowerCase()}function r(e,t){var n=e&&e.exec(t);return n&&0==n.index}function i(e){var t=(e.className+" "+(e.parentNode?e.parentNode.className:"")).split(/\s+/);return t=t.map(function(e){return e.replace(/^lang(uage)?-/,"")}),t.filter(function(e){return y(e)||/no(-?)highlight/.test(e)})[0]}function o(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}function a(e){var t=[];return function r(e,i){for(var o=e.firstChild;o;o=o.nextSibling)3==o.nodeType?i+=o.nodeValue.length:1==o.nodeType&&(t.push({event:"start",offset:i,node:o}),i=r(o,i),n(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:o}));return i}(e,0),t}function l(e,r,i){function o(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function a(e){function r(e){return" "+e.nodeName+'="'+t(e.value)+'"'}u+="<"+n(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function l(e){u+="</"+n(e)+">"}function s(e){("start"==e.event?a:l)(e.node)}for(var c=0,u="",d=[];e.length||r.length;){var f=o();if(u+=t(i.substr(c,f[0].offset-c)),c=f[0].offset,f==e){d.reverse().forEach(l);do s(f.splice(0,1)[0]),f=o();while(f==e&&f.length&&f[0].offset==c);d.reverse().forEach(a)}else"start"==f[0].event?d.push(f[0].node):d.pop(),s(f.splice(0,1)[0])}return u+t(i.substr(c))}function s(e){function t(e){return e&&e.source||e}function n(n,r){return RegExp(t(n),"m"+(e.cI?"i":"")+(r?"g":""))}function r(i,a){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var l={},s=function(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");l[n[0]]=[t,n[1]?Number(n[1]):1]})};"string"==typeof i.k?s("keyword",i.k):Object.keys(i.k).forEach(function(e){s(e,i.k[e])}),i.k=l}i.lR=n(i.l||/\b[A-Za-z0-9_]+\b/,!0),a&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=t(i.e)||"",i.eW&&a.tE&&(i.tE+=(i.e?"|":"")+a.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var c=[];i.c.forEach(function(e){e.v?e.v.forEach(function(t){c.push(o(e,t))}):c.push("self"==e?i:e)}),i.c=c,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,a);var u=i.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([i.tE,i.i]).map(t).filter(Boolean);i.t=u.length?n(u.join("|"),!0):{exec:function(){return null}}}}r(e)}function c(e,n,i,o){function a(e,t){for(var n=0;n<t.c.length;n++)if(r(t.c[n].bR,e))return t.c[n]}function l(e,t){return r(e.eR,t)?e:e.eW?l(e.parent,t):void 0}function d(e,t){return!i&&r(t.iR,e)}function f(e,t){var n=k.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function p(e,t,n,r){var i=r?"":w.classPrefix,o='<span class="'+i,a=n?"":"</span>";return o+=e+'">',o+t+a}function h(){if(!_.k)return t(M);var e="",n=0;_.lR.lastIndex=0;for(var r=_.lR.exec(M);r;){e+=t(M.substr(n,r.index-n));var i=f(_,r);i?(L+=i[1],e+=p(i[0],t(r[0]))):e+=t(r[0]),n=_.lR.lastIndex,r=_.lR.exec(M)}return e+t(M.substr(n))}function m(){if(_.sL&&!x[_.sL])return t(M);var e=_.sL?c(_.sL,M,!0,C[_.sL]):u(M);return _.r>0&&(L+=e.r),"continuous"==_.subLanguageMode&&(C[_.sL]=e.top),p(e.language,e.value,!1,!0)}function g(){return void 0!==_.sL?m():h()}function v(e,n){var r=e.cN?p(e.cN,"",!0):"";e.rB?(S+=r,M=""):e.eB?(S+=t(n)+r,M=""):(S+=r,M=n),_=Object.create(e,{parent:{value:_}})}function b(e,n){if(M+=e,void 0===n)return S+=g(),0;var r=a(n,_);if(r)return S+=g(),v(r,n),r.rB?0:n.length;var i=l(_,n);if(i){var o=_;o.rE||o.eE||(M+=n),S+=g();do _.cN&&(S+="</span>"),L+=_.r,_=_.parent;while(_!=i.parent);return o.eE&&(S+=t(n)),M="",i.starts&&v(i.starts,""),o.rE?0:n.length}if(d(n,_))throw new Error('Illegal lexeme "'+n+'" for mode "'+(_.cN||"<unnamed>")+'"');return M+=n,n.length||1}var k=y(e);if(!k)throw new Error('Unknown language: "'+e+'"');s(k);for(var _=o||k,C={},S="",T=_;T!=k;T=T.parent)T.cN&&(S=p(T.cN,"",!0)+S);var M="",L=0;try{for(var N,$,I=0;_.t.lastIndex=I,N=_.t.exec(n),N;)$=b(n.substr(I,N.index-I),N[0]),I=N.index+$;b(n.substr(I));for(var T=_;T.parent;T=T.parent)T.cN&&(S+="</span>");return{r:L,value:S,language:e,top:_}}catch(A){if(-1!=A.message.indexOf("Illegal"))return{r:0,value:t(n)};throw A}}function u(e,n){n=n||w.languages||Object.keys(x);var r={r:0,value:t(e)},i=r;return n.forEach(function(t){if(y(t)){var n=c(t,e,!1);n.language=t,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function d(e){return w.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,w.tabReplace)})),w.useBR&&(e=e.replace(/\n/g,"<br>")),e}function f(e,t,n){var r=t?k[t]:n,i=[e.trim()];return e.match(/(\s|^)hljs(\s|$)/)||i.push("hljs"),r&&i.push(r),i.join(" ").trim()}function p(e){var t=i(e);if(!/no(-?)highlight/.test(t)){var n;w.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e;var r=n.textContent,o=t?c(t,r,!0):u(r),s=a(n);if(s.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=o.value,o.value=l(s,a(p),r)}o.value=d(o.value),e.innerHTML=o.value,e.className=f(e.className,t,o.language),e.result={language:o.language,re:o.r},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.r})}}function h(e){w=o(w,e)}function m(){if(!m.called){m.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function g(){addEventListener("DOMContentLoaded",m,!1),addEventListener("load",m,!1)}function v(t,n){var r=x[t]=n(e);r.aliases&&r.aliases.forEach(function(e){k[e]=t})}function b(){return Object.keys(x)}function y(e){return x[e]||x[k[e]]}var w={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},x={},k={};return e.highlight=c,e.highlightAuto=u,e.fixMarkup=d,e.highlightBlock=p,e.configure=h,e.initHighlighting=m,e.initHighlightingOnLoad=g,e.registerLanguage=v,e.listLanguages=b,e.getLanguage=y,e.inherit=o,e.IR="[a-zA-Z][a-zA-Z0-9_]*",e.UIR="[a-zA-Z_][a-zA-Z0-9_]*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},e.CLCM={cN:"comment",b:"//",e:"$",c:[e.PWM]},e.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[e.PWM]},e.HCM={cN:"comment",b:"#",e:"$",c:[e.PWM]},e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e}),hljs.registerLanguage("coffeescript",function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:t},i=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=i;var o=e.inherit(e.TM,{b:n}),a="(\\(.*\\))?\\s*\\B[-=]>",l={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:t,c:["self"].concat(i)}]};return{aliases:["coffee","cson","iced"],k:t,i:/\/\*/,c:i.concat([{cN:"comment",b:"###",e:"###",c:[e.PWM]},e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+a,e:"[-=]>",rB:!0,c:[o,l]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:a,e:"[-=]>",rB:!0,c:[l]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[o]},o]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("apache",function(e){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("http",function(){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("cs",function(e){var t="abstract as base bool break byte case catch char checked const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",n=e.IR+"(<"+e.IR+">)?";return{aliases:["csharp"],k:t,i:/::/,c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]},e.CLCM,e.CBCM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM,{bK:"class namespace interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+n+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("java",function(e){var t=e.UIR+"(<"+e.UIR+">)?",n="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",r="(\\b(0b[01_]+)|\\b0[xX][a-fA-F0-9_]+|(\\b[\\d_]+(\\.[\\d_]*)?|\\.[\\d_]+)([eE][-+]?\\d+)?)[lLfF]?",i={cN:"number",b:r,r:0};return{aliases:["jsp"],k:n,i:/<\//,c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",r:0,c:[{cN:"javadoctag",b:"(^|\\s)@[A-Za-z]+"}]},e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return",r:0},{cN:"function",b:"("+t+"\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:n,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:n,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},i,{cN:"annotation",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("sql",function(e){var t={cN:"comment",b:"--",e:"$"};return{cI:!0,i:/[<>]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate savepoint release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup",e:/;/,eW:!0,k:{keyword:"abs absolute acos action add adddate addtime aes_decrypt aes_encrypt after aggregate all allocate alter analyze and any are as asc ascii asin assertion at atan atan2 atn2 authorization authors avg backup before begin benchmark between bin binlog bit_and bit_count bit_length bit_or bit_xor both by cache call cascade cascaded case cast catalog ceil ceiling chain change changed char_length character_length charindex charset check checksum checksum_agg choose close coalesce coercibility collate collation collationproperty column columns columns_updated commit compress concat concat_ws concurrent connect connection connection_id consistent constraint constraints continue contributors conv convert convert_tz corresponding cos cot count count_big crc32 create cross cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime data database databases datalength date_add date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts datetimeoffsetfromparts day dayname dayofmonth dayofweek dayofyear deallocate declare decode default deferrable deferred degrees delayed delete des_decrypt des_encrypt des_key_file desc describe descriptor diagnostics difference disconnect distinct distinctrow div do domain double drop dumpfile each else elt enclosed encode encrypt end end-exec engine engines eomonth errors escape escaped event eventdata events except exception exec execute exists exp explain export_set extended external extract fast fetch field fields find_in_set first first_value floor flush for force foreign format found found_rows from from_base64 from_days from_unixtime full function get get_format get_lock getdate getutcdate global go goto grant grants greatest group group_concat grouping grouping_id gtid_subset gtid_subtract handler having help hex high_priority hosts hour ident_current ident_incr ident_seed identified identity if ifnull ignore iif ilike immediate in index indicator inet6_aton inet6_ntoa inet_aton inet_ntoa infile initially inner innodb input insert install instr intersect into is is_free_lock is_ipv4 is_ipv4_compat is_ipv4_mapped is_not is_not_null is_used_lock isdate isnull isolation join key kill language last last_day last_insert_id last_value lcase lead leading least leaves left len lenght level like limit lines ln load load_file local localtime localtimestamp locate lock log log10 log2 logfile logs low_priority lower lpad ltrim make_set makedate maketime master master_pos_wait match matched max md5 medium merge microsecond mid min minute mod mode module month monthname mutex name_const names national natural nchar next no no_write_to_binlog not now nullif nvarchar oct octet_length of old_password on only open optimize option optionally or ord order outer outfile output pad parse partial partition password patindex percent_rank percentile_cont percentile_disc period_add period_diff pi plugin position pow power pragma precision prepare preserve primary prior privileges procedure procedure_analyze processlist profile profiles public publishingservername purge quarter query quick quote quotename radians rand read references regexp relative relaylog release release_lock rename repair repeat replace replicate reset restore restrict return returns reverse revoke right rlike rollback rollup round row row_count rows rpad rtrim savepoint schema scroll sec_to_time second section select serializable server session session_user set sha sha1 sha2 share show sign sin size slave sleep smalldatetimefromparts snapshot some soname soundex sounds_like space sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sql_variant_property sqlstate sqrt square start starting status std stddev stddev_pop stddev_samp stdev stdevp stop str str_to_date straight_join strcmp string stuff subdate substr substring subtime subtring_index sum switchoffset sysdate sysdatetime sysdatetimeoffset system_user sysutcdatetime table tables tablespace tan temporary terminated tertiary_weights then time time_format time_to_sec timediff timefromparts timestamp timestampadd timestampdiff timezone_hour timezone_minute to to_base64 to_days to_seconds todatetimeoffset trailing transaction translation trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse ucase uncompress uncompressed_length unhex unicode uninstall union unique unix_timestamp unknown unlock update upgrade upped upper usage use user user_resources using utc_date utc_time utc_timestamp uuid uuid_short validate_password_strength value values var var_pop var_samp variables variance varp version view warnings week weekday weekofyear weight_string when whenever where with work write xml xor year yearweek zon",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int integer interval number numeric real serial smallint varchar varying int8 serial8 text"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}
}),hljs.registerLanguage("nginx",function(e){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},n={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[e.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},t]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:e.UIR,starts:n}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("xml",function(){var e="[A-Za-z0-9\\._:-]+",t={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},n={eW:!0,i:/</,r:0,c:[t,{cN:"attribute",b:e,r:0},{b:"=",r:0,c:[{cN:"value",c:[t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[n],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[n],starts:{e:"</script>",rE:!0,sL:"javascript"}},t,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},n]}]}}),hljs.registerLanguage("diff",function(){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^\@\@ +\-\d+,\d+ +\+\d+,\d+ +\@\@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},c:[{cN:"pi",r:10,v:[{b:/^\s*('|")use strict('|")/},{b:/^\s*('|")use asm('|")/}]},e.ASM,e.QSM,e.CLCM,e.CBCM,e.CNM,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[e.CLCM,e.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)\}/}]},n={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},r={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,e.NM,n,r,t]}}),hljs.registerLanguage("objectivec",function(e){var t={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"NSString NSData NSDictionary CGRect CGPoint UIButton UILabel UITextView UIWebView MKMapView NSView NSViewController NSWindow NSWindowController NSSet NSUUID NSIndexSet UISegmentedControl NSObject UITableViewDelegate UITableViewDataSource NSThread UIActivityIndicator UITabbar UIToolBar UIBarButtonItem UIImageView NSAutoreleasePool UITableView BOOL NSInteger CGFloat NSException NSLog NSMutableString NSMutableArray NSMutableDictionary NSURL NSIndexPath CGSize UITableViewCell UIView UIViewController UINavigationBar UINavigationController UITabBarController UIPopoverController UIPopoverControllerDelegate UIImage NSNumber UISearchBar NSFetchedResultsController NSFetchedResultsChangeType UIScrollView UIScrollViewDelegate UIEdgeInsets UIColor UIFont UIApplication NSNotFound NSNotificationCenter NSNotification UILocalNotification NSBundle NSFileManager NSTimeInterval NSDate NSCalendar NSUserDefaults UIWindow NSRange NSArray NSError NSURLRequest NSURLConnection NSURLSession NSURLSessionDataTask NSURLSessionDownloadTask NSURLSessionUploadTask NSURLResponseUIInterfaceOrientation MPMoviePlayerController dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{aliases:["m","mm","objc","obj-c"],k:t,l:n,i:"</",c:[e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:r,l:n,c:[e.UTM]},{cN:"variable",b:"\\."+e.UIR,r:0}]}}),hljs.registerLanguage("markdown",function(){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},n=[e.QSM,e.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:t},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:r}],i:"\\S"},o={b:"\\[",e:"\\]",c:[e.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,o),{c:n,k:t,i:"\\S"}}),hljs.registerLanguage("python",function(e){var t={cN:"prompt",b:/^(>>>|\.\.\.) /},n={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[t],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[t],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},e.ASM,e.QSM]},r={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",t,r,n]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[t,r,n,e.HCM,{v:[{cN:"function",bK:"def",r:10},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n]/,c:[e.UTM,i]},{cN:"decorator",b:/@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("ruby",function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"value",b:"#<",e:">"},o={cN:"comment",v:[{b:"#",e:"$",c:[r]},{b:"^\\=begin",e:"^\\=end",c:[r],r:10},{b:"^__END__",e:"\\n$"}]},a={cN:"subst",b:"#\\{",e:"}",k:n},l={cN:"string",c:[e.BE,a],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},s={cN:"params",b:"\\(",e:"\\)",k:n},c=[l,i,o,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]},o]},{cN:"function",bK:"def",e:" |$|;",r:0,c:[e.inherit(e.TM,{b:t}),s,o]},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[l,{b:t}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:[i,o,{cN:"regexp",c:[e.BE,a],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}],r:0}];a.c=c,s.c=c;var u="[>?]>",d="[\\w#]+\\(\\w+\\):\\d+:\\d+>",f="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",p=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:c}},{cN:"prompt",b:"^("+u+"|"+d+"|"+f+")",starts:{e:"$",c:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:n,c:[o].concat(p).concat(c)}}),hljs.registerLanguage("cpp",function(e){var t={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex _Complex _Imaginaryintmax_t uintmax_t int8_t uint8_t int16_t uint16_t int32_t uint32_t  int64_t uint64_tint_least8_t uint_least8_t int_least16_t uint_least16_t int_least32_t uint_least32_tint_least64_t uint_least64_t int_fast8_t uint_fast8_t int_fast16_t uint_fast16_t int_fast32_tuint_fast32_t int_fast64_t uint_fast64_t intptr_t uintptr_t atomic_bool atomic_char atomic_scharatomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llongatomic_ullong atomic_wchar_t atomic_char16_t atomic_char32_t atomic_intmax_t atomic_uintmax_tatomic_intptr_t atomic_uintptr_t atomic_size_t atomic_ptrdiff_t atomic_int_least8_t atomic_int_least16_tatomic_int_least32_t atomic_int_least64_t atomic_uint_least8_t atomic_uint_least16_t atomic_uint_least32_tatomic_uint_least64_t atomic_int_fast8_t atomic_int_fast16_t atomic_int_fast32_t atomic_int_fast64_tatomic_uint_fast8_t atomic_uint_fast16_t atomic_uint_fast32_t atomic_uint_fast64_t",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf"};return{aliases:["c","h","c++","h++"],k:t,i:"</",c:[e.CLCM,e.CBCM,e.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},e.CNM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma",c:[{b:'include\\s*[<"]',e:'[>"]',k:"include",i:"\\n"},e.CLCM]},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:t,c:["self"]},{b:e.IR+"::"},{bK:"new throw return",r:0},{cN:"function",b:"("+e.IR+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("css",function(e){var t="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:t+"\\(",rB:!0,eE:!0,e:"\\("};return{cI:!0,i:"[=/|']",c:[e.CBCM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n,e.ASM,e.QSM,e.CSSNM]}]},{cN:"tag",b:t,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[e.CBCM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}),hljs.registerLanguage("php",function(e){var t={cN:"variable",b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},n={cN:"preprocessor",b:/<\?(php)?|\?>/},r={cN:"string",c:[e.BE,n],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},i={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.CLCM,e.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"},n]},{cN:"comment",b:"__halt_compiler.+?;",eW:!0,k:"__halt_compiler",l:e.UIR},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[e.BE]},n,t,{b:/->+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",t,e.CBCM,r,i]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},r,i]}}),hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},r={b:"->{",e:"}"},i={cN:"variable",v:[{b:/\$\d/},{b:/[\$\%\@](\^\w\b|#\w+(\:\:\w+)*|{\w+}|\w+(\:\:\w*)*)/},{b:/[\$\%\@][^\s\w{]/,r:0}]},o={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},a=[e.BE,n,i],l=[i,e.HCM,o,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:!0},r,{cN:"string",c:a,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,o,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return n.c=l,r.c=l,{aliases:["pl"],k:t,c:l}}),hljs.registerLanguage("ini",function(e){return{cI:!0,i:/\S/,c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[e.QSM,e.NM],r:0}]}]}}),hljs.registerLanguage("makefile",function(e){var t={cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]};return{aliases:["mk","mak"],c:[e.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[t]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[e.QSM,t]}]}}),define("math",["jquery","main"],function(e,t){"use strict";return function(n){var r,i;r=n||e(".fmt"),"undefined"!=typeof MathJax?r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e(this).get(0)])}):(i=t.staticUrl+"/build/3rd/MathJax/MathJax.js",e.getScript(i,function(){r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e(this).get(0)])})}))}}),define("flowChart",[],function(){"use strict";return function(e,t){require(["jquery","Raphael","flow_diagram"],function(n,r,i){var o;o=i.parse(e),o.drawSVG(t)})}}),define("sequenceChart",[],function(){"use strict";return function(e){require(["jquery","Raphael","underscore","sequence_diagram"],function(){e.sequenceDiagram({theme:"simple"})})}}),function(e,t){"use strict";var n,r,i=e,o=i.document,a=i.navigator,l=i.setTimeout,s=i.encodeURIComponent,c=i.ActiveXObject,u=(i.Error,i.Number.parseInt||i.parseInt),d=i.Number.parseFloat||i.parseFloat,f=i.Number.isNaN||i.isNaN,p=i.Math.round,h=i.Date.now,m=i.Object.keys,g=i.Object.defineProperty,v=i.Object.prototype.hasOwnProperty,b=i.Array.prototype.slice,y=function(){var e=function(e){return e};if("function"==typeof i.wrap&&"function"==typeof i.unwrap)try{var t=o.createElement("div"),n=i.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=i.unwrap)}catch(r){}return e}(),w=function(e){return b.call(e,0)},x=function(){var e,n,r,i,o,a,l=w(arguments),s=l[0]||{};for(e=1,n=l.length;n>e;e++)if(null!=(r=l[e]))for(i in r)v.call(r,i)&&(o=s[i],a=r[i],s!==a&&a!==t&&(s[i]=a));return s},k=function(e){var t,n,r,i;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;r>n;n++)v.call(e,n)&&(t[n]=k(e[n]));else{t={};for(i in e)v.call(e,i)&&(t[i]=k(e[i]))}return t},_=function(e,t){for(var n={},r=0,i=t.length;i>r;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},C=function(e,t){var n={};for(var r in e)-1===t.indexOf(r)&&(n[r]=e[r]);return n},S=function(e){if(e)for(var t in e)v.call(e,t)&&delete e[t];return e},T=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},M=function(){var e=SF.staticUrl+"/build/3rd/zeroclipboard/dist/";return e+"ZeroClipboard.swf"},L={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},N="11.0.0",$={},I={},A=null,E={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},z={swfPath:M(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},j=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(v.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))z[t]=e[t];else if(null==L.bridge)if("containerId"===t||"swfObjectId"===t){if(!Y(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");z[t]=e[t]}else z[t]=e[t];{if("string"!=typeof e||!e)return k(z);if(v.call(z,e))return z[e]}},O=function(){return{browser:_(a,["userAgent","platform","appName"]),flash:C(L,["bridge"]),zeroclipboard:{version:St.version,config:St.config()}}},q=function(){return!!(L.disabled||L.outdated||L.unavailable||L.deactivated)},D=function(e,t){var n,r,i,o={};if("string"==typeof e&&e)i=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&St.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;r>n;n++)e=i[n].replace(/^on/,""),o[e]=!0,$[e]||($[e]=[]),$[e].push(t);if(o.ready&&L.ready&&St.emit({type:"ready"}),o.error){var a=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=a.length;r>n;n++)if(L[a[n]]===!0){St.emit({type:"error",name:"flash-"+a[n]});break}}}return St},W=function(e,t){var n,r,i,o,a;if(0===arguments.length)o=m($);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&St.off(n,e[n]);if(o&&o.length)for(n=0,r=o.length;r>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=$[e],a&&a.length)if(t)for(i=a.indexOf(t);-1!==i;)a.splice(i,1),i=a.indexOf(t,i);else a.length=0;return St},H=function(e){var t;return t="string"==typeof e&&e?k($[e])||null:k($)},R=function(e){var t,n,r;return e=X(e),e&&!rt(e)?"ready"===e.type&&L.overdue===!0?St.emit({type:"error",name:"flash-overdue"}):(t=x({},e),nt.call(this,t),"copy"===e.type&&(r=ct(I),n=r.data,A=r.formatMap),n):void 0},B=function(){if("boolean"!=typeof L.ready&&(L.ready=!1),!St.isFlashUnusable()&&null===L.bridge){var e=z.flashLoadTimeout;"number"==typeof e&&e>=0&&l(function(){"boolean"!=typeof L.deactivated&&(L.deactivated=!0),L.deactivated===!0&&St.emit({type:"error",name:"flash-deactivated"})},e),L.overdue=!1,lt()}},F=function(){St.clearData(),St.blur(),St.emit("destroy"),st(),St.off()},P=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,St.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&v.call(n,r)&&"string"==typeof n[r]&&n[r]&&(I[r]=n[r])},U=function(e){"undefined"==typeof e?(S(I),A=null):"string"==typeof e&&v.call(I,e)&&delete I[e]},V=function(e){return"undefined"==typeof e?k(I):"string"==typeof e&&v.call(I,e)?I[e]:void 0},K=function(e){if(e&&1===e.nodeType){n&&(vt(n,z.activeClass),n!==e&&vt(n,z.hoverClass)),n=e,gt(e,z.hoverClass);var t=e.getAttribute("title")||z.title;if("string"==typeof t&&t){var r=at(L.bridge);r&&r.setAttribute("title",t)}var i=z.forceHandCursor===!0||"pointer"===bt(e,"cursor");kt(i),xt()}},G=function(){var e=at(L.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),n&&(vt(n,z.hoverClass),vt(n,z.activeClass),n=null)},Z=function(){return n||null},Y=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},X=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){!e.target&&/^(copy|aftercopy|_click)$/.test(t.toLowerCase())&&(e.target=r),x(e,{type:t.toLowerCase(),target:e.target||n||null,relatedTarget:e.relatedTarget||null,currentTarget:L&&L.bridge||null,timeStamp:e.timeStamp||h()||null});var i=E[e.type];return"error"===e.type&&e.name&&i&&(i=i[e.name]),i&&(e.message=i),"ready"===e.type&&x(e,{target:null,version:L.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&x(e,{target:null,minimumVersion:N}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&x(e,{version:L.version})),"copy"===e.type&&(e.clipboardData={setData:St.setData,clearData:St.clearData}),"aftercopy"===e.type&&(e=ut(e,A)),e.target&&!e.relatedTarget&&(e.relatedTarget=Q(e.target)),e=J(e)}},Q=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},J=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,r="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,a="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,l=wt(n),s=i.screenLeft||i.screenX||0,c=i.screenTop||i.screenY||0,u=o.body.scrollLeft+o.documentElement.scrollLeft,d=o.body.scrollTop+o.documentElement.scrollTop,f=l.left+("number"==typeof e._stageX?e._stageX:0),p=l.top+("number"==typeof e._stageY?e._stageY:0),h=f-u,m=p-d,g=s+h,v=c+m,b="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,x(e,{srcElement:n,fromElement:r,toElement:a,screenX:g,screenY:v,pageX:f,pageY:p,clientX:h,clientY:m,x:h,y:m,movementX:b,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},et=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},tt=function(e,t,n,r){r?l(function(){e.apply(t,n)},0):e.apply(t,n)},nt=function(e){if("object"==typeof e&&e&&e.type){var t=et(e),n=$["*"]||[],r=$[e.type]||[],o=n.concat(r);if(o&&o.length){var a,l,s,c,u,d=this;for(a=0,l=o.length;l>a;a++)s=o[a],c=d,"string"==typeof s&&"function"==typeof i[s]&&(s=i[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(c=s,s=s.handleEvent),"function"==typeof s&&(u=x({},e),tt(s,c,[u],t))}return this}},rt=function(e){var t=e.target||n||null,i="swf"===e._source;delete e._source;var o=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(e.type){case"error":-1!==o.indexOf(e.name)&&x(L,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var a=L.deactivated===!0;x(L,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:a,ready:!a});break;case"beforecopy":r=t;break;case"copy":var l,s,c=e.relatedTarget;!I["text/html"]&&!I["text/plain"]&&c&&(s=c.value||c.outerHTML||c.innerHTML)&&(l=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),s!==l&&e.clipboardData.setData("text/html",s)):!I["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":St.clearData(),t&&t!==mt()&&t.focus&&t.focus();break;case"_mouseover":St.focus(t),z.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!T(e.relatedTarget,t)&&it(x({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),it(x({},e,{type:"mouseover"})));break;case"_mouseout":St.blur(),z.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!T(e.relatedTarget,t)&&it(x({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),it(x({},e,{type:"mouseout"})));break;case"_mousedown":gt(t,z.activeClass),z.bubbleEvents===!0&&i&&it(x({},e,{type:e.type.slice(1)}));break;case"_mouseup":vt(t,z.activeClass),z.bubbleEvents===!0&&i&&it(x({},e,{type:e.type.slice(1)}));break;case"_click":r=null,z.bubbleEvents===!0&&i&&it(x({},e,{type:e.type.slice(1)}));break;case"_mousemove":z.bubbleEvents===!0&&i&&it(x({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},it=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,r=n&&n.ownerDocument||o,a={view:r.defaultView||i,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:r.createEvent?0:1},l=x(a,e);n&&r.createEvent&&n.dispatchEvent&&(l=[l.type,l.canBubble,l.cancelable,l.view,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget],t=r.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,l),t._source="js",n.dispatchEvent(t)))}},ot=function(){var e=o.createElement("div");return e.id=z.containerId,e.className=z.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+_t(z.zIndex),e},at=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},lt=function(){var e,t=L.bridge,n=at(t);if(!t){var r=ht(i.location.host,z),a="never"===r?"none":"all",l=ft(z),s=z.swfPath+dt(z.swfPath,z);n=ot();var c=o.createElement("div");n.appendChild(c),o.body.appendChild(n);var u=o.createElement("div"),d="activex"===L.pluginType;u.innerHTML='<object id="'+z.swfObjectId+'" name="'+z.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+s+'"')+">"+(d?'<param name="movie" value="'+s+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+a+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+l+'"/></object>',t=u.firstChild,u=null,y(t).ZeroClipboard=St,n.replaceChild(t,c)
}return t||(t=o[z.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),L.bridge=t||null,t},st=function(){var e=L.bridge;if(e){var t=at(e);t&&("activex"===L.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else l(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),L.ready=null,L.bridge=null,L.deactivated=null}},ct=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&v.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},ut=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(v.call(e,r)){if("success"!==r&&"data"!==r){n[r]=e[r];continue}n[r]={};var i=e[r];for(var o in i)o&&v.call(i,o)&&v.call(t,o)&&(n[r][t[o]]=i[o])}return n},dt=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+h():""},ft=function(e){var t,n,r,o,a="",l=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?o=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(o=e.trustedDomains)),o&&o.length)for(t=0,n=o.length;n>t;t++)if(v.call(o,t)&&o[t]&&"string"==typeof o[t]){if(r=pt(o[t]),!r)continue;if("*"===r){l.length=0,l.push(r);break}l.push.apply(l,[r,"//"+r,i.location.protocol+"//"+r])}return l.length&&(a+="trustedOrigins="+s(l.join(","))),e.forceEnhancedClipboard===!0&&(a+=(a?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(a+=(a?"&":"")+"swfObjectId="+s(e.swfObjectId)),a},pt=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},ht=function(){var e=function(e){var t,n,r,i=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return i;for(t=0,n=e.length;n>t;t++)if(v.call(e,t)&&(r=pt(e[t]))){if("*"===r){i.length=0,i.push("*");break}-1===i.indexOf(r)&&i.push(r)}return i};return function(t,n){var r=pt(n.swfPath);null===r&&(r=t);var i=e(n.trustedDomains),o=i.length;if(o>0){if(1===o&&"*"===i[0])return"always";if(-1!==i.indexOf(t))return 1===o&&t===r?"sameDomain":"always"}return"never"}}(),mt=function(){try{return o.activeElement}catch(e){return null}},gt=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var n=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var r=" "+e.className+" ",i=e.className,o=0,a=n.length;a>o;o++)r.indexOf(" "+n[o]+" ")<0&&(i+=" "+n[o]);e.className=i.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},vt=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var n=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var r=(" "+e.className+" ").replace(/[\n\t]/g," "),i=0,o=n.length;o>i;i++)r=r.replace(" "+n[i]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}}return e},bt=function(e,t){var n=i.getComputedStyle(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},yt=function(){var e,t,n,r=1;return"function"==typeof o.body.getBoundingClientRect&&(e=o.body.getBoundingClientRect(),t=e.right-e.left,n=o.body.offsetWidth,r=p(t/n*100)/100),r},wt=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n,r,a,l=e.getBoundingClientRect();"pageXOffset"in i&&"pageYOffset"in i?(n=i.pageXOffset,r=i.pageYOffset):(a=yt(),n=p(o.documentElement.scrollLeft/a),r=p(o.documentElement.scrollTop/a));var s=o.documentElement.clientLeft||0,c=o.documentElement.clientTop||0;t.left=l.left+n-s,t.top=l.top+r-c,t.width="width"in l?l.width:l.right-l.left,t.height="height"in l?l.height:l.bottom-l.top}return t},xt=function(){var e;if(n&&(e=at(L.bridge))){var t=wt(n);x(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+_t(z.zIndex)})}},kt=function(e){L.ready===!0&&(L.bridge&&"function"==typeof L.bridge.setHandCursor?L.bridge.setHandCursor(e):L.ready=!1)},_t=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||f(e)?"string"==typeof e&&(t=_t(u(e,10))):t=e,"number"==typeof t?t:"auto"},Ct=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(s=!0,e.version&&(f=t(e.version)),!f&&e.description&&(f=t(e.description)),e.filename&&(u=n(e.filename)))}var i,o,l,s=!1,c=!1,u=!1,f="";if(a.plugins&&a.plugins.length)i=a.plugins["Shockwave Flash"],r(i),a.plugins["Shockwave Flash 2.0"]&&(s=!0,f="2.0.0.11");else if(a.mimeTypes&&a.mimeTypes.length)l=a.mimeTypes["application/x-shockwave-flash"],i=l&&l.enabledPlugin,r(i);else if("undefined"!=typeof e){c=!0;try{o=new e("ShockwaveFlash.ShockwaveFlash.7"),s=!0,f=t(o.GetVariable("$version"))}catch(p){try{o=new e("ShockwaveFlash.ShockwaveFlash.6"),s=!0,f="6.0.21"}catch(h){try{o=new e("ShockwaveFlash.ShockwaveFlash"),s=!0,f=t(o.GetVariable("$version"))}catch(m){c=!1}}}}L.disabled=s!==!0,L.outdated=f&&d(f)<d(N),L.version=f||"0.0.0",L.pluginType=u?"pepper":c?"activex":s?"netscape":"unknown"};Ct(c);var St=function(){return this instanceof St?void("function"==typeof St._createClient&&St._createClient.apply(this,w(arguments))):new St};g(St,"version",{value:"2.1.6",writable:!1,configurable:!0,enumerable:!0}),St.config=function(){return j.apply(this,w(arguments))},St.state=function(){return O.apply(this,w(arguments))},St.isFlashUnusable=function(){return q.apply(this,w(arguments))},St.on=function(){return D.apply(this,w(arguments))},St.off=function(){return W.apply(this,w(arguments))},St.handlers=function(){return H.apply(this,w(arguments))},St.emit=function(){return R.apply(this,w(arguments))},St.create=function(){return B.apply(this,w(arguments))},St.destroy=function(){return F.apply(this,w(arguments))},St.setData=function(){return P.apply(this,w(arguments))},St.clearData=function(){return U.apply(this,w(arguments))},St.getData=function(){return V.apply(this,w(arguments))},St.focus=St.activate=function(){return K.apply(this,w(arguments))},St.blur=St.deactivate=function(){return G.apply(this,w(arguments))},St.activeElement=function(){return Z.apply(this,w(arguments))};var Tt=0,Mt={},Lt=0,Nt={},$t={};x(z,{autoActivate:!0});var It=function(e){var t=this;t.id=""+Tt++,Mt[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),St.on("*",function(e){return t.emit(e)}),St.on("destroy",function(){t.destroy()}),St.create()},At=function(e,t){var n,r,i,o={},a=Mt[this.id]&&Mt[this.id].handlers;if("string"==typeof e&&e)i=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;r>n;n++)e=i[n].replace(/^on/,""),o[e]=!0,a[e]||(a[e]=[]),a[e].push(t);if(o.ready&&L.ready&&this.emit({type:"ready",client:this}),o.error){var l=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=l.length;r>n;n++)if(L[l[n]]){this.emit({type:"error",name:"flash-"+l[n],client:this});break}}}return this},Et=function(e,t){var n,r,i,o,a,l=Mt[this.id]&&Mt[this.id].handlers;if(0===arguments.length)o=m(l);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(o&&o.length)for(n=0,r=o.length;r>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=l[e],a&&a.length)if(t)for(i=a.indexOf(t);-1!==i;)a.splice(i,1),i=a.indexOf(t,i);else a.length=0;return this},zt=function(e){var t=null,n=Mt[this.id]&&Mt[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:k(n)),t},jt=function(e){if(Ht.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=x({},e));var t=x({},X(e),{client:this});Rt.call(this,t)}return this},Ot=function(e){e=Bt(e);for(var t=0;t<e.length;t++)if(v.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Nt[e[t].zcClippingId].indexOf(this.id)&&Nt[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Lt++,Nt[e[t].zcClippingId]=[this.id],z.autoActivate===!0&&Ft(e[t]));var n=Mt[this.id]&&Mt[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},qt=function(e){var t=Mt[this.id];if(!t)return this;var n,r=t.elements;e="undefined"==typeof e?r.slice(0):Bt(e);for(var i=e.length;i--;)if(v.call(e,i)&&e[i]&&1===e[i].nodeType){for(n=0;-1!==(n=r.indexOf(e[i],n));)r.splice(n,1);var o=Nt[e[i].zcClippingId];if(o){for(n=0;-1!==(n=o.indexOf(this.id,n));)o.splice(n,1);0===o.length&&(z.autoActivate===!0&&Pt(e[i]),delete e[i].zcClippingId)}}return this},Dt=function(){var e=Mt[this.id];return e&&e.elements?e.elements.slice(0):[]},Wt=function(){this.unclip(),this.off(),delete Mt[this.id]},Ht=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Mt[this.id]&&Mt[this.id].elements,n=!!t&&t.length>0,r=!e.target||n&&-1!==t.indexOf(e.target),i=e.relatedTarget&&n&&-1!==t.indexOf(e.relatedTarget),o=e.client&&e.client===this;return r||i||o?!0:!1},Rt=function(e){if("object"==typeof e&&e&&e.type){var t=et(e),n=Mt[this.id]&&Mt[this.id].handlers["*"]||[],r=Mt[this.id]&&Mt[this.id].handlers[e.type]||[],o=n.concat(r);if(o&&o.length){var a,l,s,c,u,d=this;for(a=0,l=o.length;l>a;a++)s=o[a],c=d,"string"==typeof s&&"function"==typeof i[s]&&(s=i[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(c=s,s=s.handleEvent),"function"==typeof s&&(u=x({},e),tt(s,c,[u],t))}return this}},Bt=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},Ft=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=i.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=i.event))&&(t(n),St.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),$t[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},Pt=function(e){if(e&&1===e.nodeType){var t=$t[e.zcClippingId];if("object"==typeof t&&t){for(var n,r,i=["move","leave","enter","out","over"],o=0,a=i.length;a>o;o++)n="mouse"+i[o],r=t[n],"function"==typeof r&&e.removeEventListener(n,r,!1);delete $t[e.zcClippingId]}}};St._createClient=function(){It.apply(this,w(arguments))},St.prototype.on=function(){return At.apply(this,w(arguments))},St.prototype.off=function(){return Et.apply(this,w(arguments))},St.prototype.handlers=function(){return zt.apply(this,w(arguments))},St.prototype.emit=function(){return jt.apply(this,w(arguments))},St.prototype.clip=function(){return Ot.apply(this,w(arguments))},St.prototype.unclip=function(){return qt.apply(this,w(arguments))},St.prototype.elements=function(){return Dt.apply(this,w(arguments))},St.prototype.destroy=function(){return Wt.apply(this,w(arguments))},St.prototype.setText=function(e){return St.setData("text/plain",e),this},St.prototype.setHtml=function(e){return St.setData("text/html",e),this},St.prototype.setRichText=function(e){return St.setData("application/rtf",e),this},St.prototype.setData=function(){return St.setData.apply(this,w(arguments)),this},St.prototype.clearData=function(){return St.clearData.apply(this,w(arguments)),this},St.prototype.getData=function(){return St.getData.apply(this,w(arguments))},"function"==typeof define&&define.amd?define("ZeroClipboard",[],function(){return St}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=St:e.ZeroClipboard=St}(function(){return this||window}()),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define("codemirror/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{},oo(ya,r,!1),h(r);var i=r.value;"string"==typeof i&&(i=new Fa(i,r.mode)),this.doc=i;var o=this.display=new t(n,i);o.wrapper.CodeMirror=this,u(this),s(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!Qo&&mn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Qi},Ro&&11>Bo&&setTimeout(ao(hn,this,!0),20),bn(this),xo();var a=this;Xt(this,function(){a.curOp.forceUpdate=!0,yi(a,i),r.autofocus&&!Qo||mo()==o.input?setTimeout(ao(Rn,a),20):Bn(a);for(var e in wa)wa.hasOwnProperty(e)&&wa[e](a,r[e],xa);for(var t=0;t<Sa.length;++t)Sa[t](a)})}function t(e,t){var n=this,r=n.input=uo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Fo?r.style.width="1000px":r.setAttribute("wrap","off"),Xo&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=uo("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=uo("div",[uo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=uo("div",[uo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=uo("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=uo("div",null,"CodeMirror-gutter-filler"),n.lineDiv=uo("div",null,"CodeMirror-code"),n.selectionDiv=uo("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=uo("div",null,"CodeMirror-cursors"),n.measure=uo("div",null,"CodeMirror-measure"),n.lineMeasure=uo("div",null,"CodeMirror-measure"),n.lineSpace=uo("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=uo("div",[uo("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=uo("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=uo("div",null,null,"position: absolute; height: "+el+"px; width: 1px;"),n.gutters=uo("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=uo("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=uo("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Ro&&8>Bo&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),Xo&&(r.style.width="0px"),Fo||(n.scroller.draggable=!0),Go&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),Ro&&8>Bo&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Qi,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,yt(e,100),e.state.modeGen++,e.curOp&&rn(e)}function i(e){e.options.lineWrapping?(bo(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(vo(e.display.wrapper,"CodeMirror-wrap"),p(e)),a(e),rn(e),Ot(e),setTimeout(function(){v(e)},100)}function o(e){var t=Kt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Gt(e.display)-3);return function(i){if(Vr(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function a(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&_i(e,t)})}function l(e){var t=$a[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ot(e)}function c(e){u(e),rn(e),setTimeout(function(){y(e)},20)}function u(e){var t=e.display.gutters,n=e.options.gutters;fo(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(uo("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function f(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Wr(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Hr(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function p(e){var t=e.display,n=e.doc;t.maxLine=wi(n,n.first),t.maxLineLength=f(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=f(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function h(e){var t=no(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function m(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<el-3}function g(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:m(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Ct(e.display))}}function v(e,t){t||(t=g(e));var n=e.display,r=_o(n.measure),i=t.docHeight+el,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&r>0&&!t.hScrollbarTakesSpace&&(o=!1);var a=i>t.clientHeight;if(a?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=o?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),o?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=a?r+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),o&&a?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===r){var l=Jo&&!Zo?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=l;var s=function(t){Pi(t)!=n.scrollbarV&&Pi(t)!=n.scrollbarH&&Qt(e,kn)(t)};Ya(n.scrollbarV,"mousedown",s),Ya(n.scrollbarH,"mousedown",s)}e.state.checkedOverlayScrollbar=!0}}function b(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-_t(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Si(t,r),a=Si(t,i);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;if(o>l)return{from:l,to:Si(t,Ti(wi(t,l))+e.wrapper.clientHeight)};if(Math.min(s,t.lastLine())>=a)return{from:Si(t,Ti(wi(t,s))-e.wrapper.clientHeight),to:s}}return{from:o,to:Math.max(a,o+1)}}function y(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=k(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function w(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=x(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(uo("div",[uo("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",d(e),!0}return!1}function x(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function k(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function _(e,t,n){for(var r,i=e.display.viewFrom,o=e.display.viewTo,a=b(e.display,e.doc,t),l=!0;;l=!1){var s=e.display.scroller.clientWidth;if(!C(e,a,n))break;r=!0,e.display.maxLineChanged&&!e.options.lineWrapping&&S(e);var c=g(e);if(mt(e),T(e,c),v(e,c),Fo&&e.options.lineWrapping&&M(e,c),Fo&&c.scrollWidth>c.clientWidth&&c.scrollWidth<c.clientWidth+1&&!m(e)&&v(e),l&&e.options.lineWrapping&&s!=e.display.scroller.clientWidth)n=!0;else if(n=!1,t&&null!=t.top&&(t={top:Math.min(c.docHeight-el-c.clientHeight,t.top)}),a=b(e.display,e.doc,t),a.from>=e.display.viewFrom&&a.to<=e.display.viewTo)break}return e.display.updateLineNumbers=null,r&&(Vi(e,"update",e),(e.display.viewFrom!=i||e.display.viewTo!=o)&&Vi(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)),r}function C(e,t,n){var r=e.display,i=e.doc;if(!r.wrapper.offsetWidth)return void an(e);if(!(!n&&t.from>=r.viewFrom&&t.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==un(e))){w(e)&&an(e);var o=$(e),a=i.first+i.size,l=Math.max(t.from-e.options.viewportMargin,i.first),s=Math.min(a,t.to+e.options.viewportMargin);r.viewFrom<l&&l-r.viewFrom<20&&(l=Math.max(i.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(a,r.viewTo)),oa&&(l=Pr(e.doc,l),s=Ur(e.doc,s));var c=l!=r.viewFrom||s!=r.viewTo||r.lastSizeC!=r.wrapper.clientHeight;cn(e,l,s),r.viewOffset=Ti(wi(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=un(e);if(c||0!=u||n){var d=mo();return u>4&&(r.lineDiv.style.display="none"),I(e,r.updateLineNumbers,o),u>4&&(r.lineDiv.style.display=""),d&&mo()!=d&&d.offsetHeight&&d.focus(),fo(r.cursorDiv),fo(r.selectionDiv),c&&(r.lastSizeC=r.wrapper.clientHeight,yt(e,400)),L(e),!0}}}function S(e){var t=e.display,n=Nt(e,t.maxLine,t.maxLine.text.length).left;t.maxLineChanged=!1;var r=Math.max(0,n+3),i=Math.max(0,t.sizer.offsetLeft+r+el-t.scroller.clientWidth);t.sizer.style.minWidth=r+"px",i<e.doc.scrollLeft&&In(e,Math.min(t.scroller.scrollLeft,i),!0)}function T(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-el)+"px"}function M(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function L(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(Ro&&8>Bo){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var l=o.node.getBoundingClientRect();i=l.bottom-l.top}var s=o.line.height-i;if(2>i&&(i=Kt(t)),(s>.001||-.001>s)&&(_i(o.line,i),N(o.line),o.rest))for(var c=0;c<o.rest.length;c++)N(o.rest[c])}}}function N(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function $(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[e.options.gutters[o]]=i.offsetLeft,r[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:k(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function I(e,t,n){function r(t){var n=t.nextSibling;return Fo&&Jo&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,l=a.firstChild,s=i.view,c=i.viewFrom,u=0;u<s.length;u++){var d=s[u];if(d.hidden);else if(d.node){for(;l!=d.node;)l=r(l);var f=o&&null!=t&&c>=t&&d.lineNumber;d.changes&&(no(d.changes,"gutter")>-1&&(f=!1),A(e,d,c,n)),f&&(fo(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(x(e.options,c)))),l=d.node.nextSibling}else{var p=H(e,d,c,n);a.insertBefore(p,l)}c+=d.size}for(;l;)l=r(l)}function A(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?O(e,t):"gutter"==o?D(e,t,n,r):"class"==o?q(t):"widget"==o&&W(t,r)}t.changes=null}function E(e){return e.node==e.text&&(e.node=uo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Ro&&8>Bo&&(e.node.style.zIndex=2)),e.node}function z(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=E(e);e.background=n.insertBefore(uo("div",null,t),n.firstChild)}}function j(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):li(e,t)}function O(e,t){var n=t.text.className,r=j(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,q(t)):n&&(t.text.className=n)}function q(e){z(e),e.line.wrapClass?E(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function D(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=E(t),a=t.gutter=o.insertBefore(uo("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(uo("div",x(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var l=0;l<e.options.gutters.length;++l){var s=e.options.gutters[l],c=i.hasOwnProperty(s)&&i[s];c&&a.appendChild(uo("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[s]+"px; width: "+r.gutterWidth[s]+"px"))}}}function W(e,t){e.alignable&&(e.alignable=null);for(var n,r=e.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}R(e,t)}function H(e,t,n,r){var i=j(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),q(t),D(e,t,n,r),R(t,r),t.node}function R(e,t){if(B(e.line,e,t,!0),e.rest)for(var n=0;n<e.rest.length;n++)B(e.rest[n],e,t,!1)}function B(e,t,n,r){if(e.widgets)for(var i=E(t),o=0,a=e.widgets;o<a.length;++o){var l=a[o],s=uo("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||(s.ignoreEvents=!0),F(l,s,t,n),r&&l.above?i.insertBefore(s,t.gutter||t.text):i.appendChild(s),Vi(l,"redraw")}}function F(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function P(e){return aa(e.line,e.ch)}function U(e,t){return la(e,t)<0?t:e}function V(e,t){return la(e,t)<0?e:t}function K(e,t){this.ranges=e,this.primIndex=t}function G(e,t){this.anchor=e,this.head=t}function Z(e,t){var n=e[t];e.sort(function(e,t){return la(e.from(),t.from())}),t=no(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(la(o.to(),i.from())>=0){var a=V(o.from(),i.from()),l=U(o.to(),i.to()),s=o.empty()?i.from()==i.head:o.from()==o.head;t>=r&&--t,e.splice(--r,2,new G(s?l:a,s?a:l))}}return new K(e,t)}function Y(e,t){return new K([new G(e,t||e)],0)}function X(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Q(e,t){if(t.line<e.first)return aa(e.first,0);var n=e.first+e.size-1;return t.line>n?aa(n,wi(e,n).text.length):J(t,wi(e,t.line).text.length)}function J(e,t){var n=e.ch;return null==n||n>t?aa(e.line,t):0>n?aa(e.line,0):e}function et(e,t){return t>=e.first&&t<e.first+e.size}function tt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Q(e,t[r]);return n}function nt(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=la(n,i)<0;o!=la(r,i)<0?(i=n,n=r):o!=la(n,r)<0&&(n=r)}return new G(i,n)}return new G(r||n,n)}function rt(e,t,n,r){ct(e,new K([nt(e,e.sel.primary(),t,n)],0),r)}function it(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=nt(e,e.sel.ranges[i],t[i],null);var o=Z(r,e.sel.primIndex);ct(e,o,n)}function ot(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,ct(e,Z(i,e.sel.primIndex),r)}function at(e,t,n,r){ct(e,Y(t,n),r)}function lt(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new G(Q(e,t[n].anchor),Q(e,t[n].head))}};return Qa(e,"beforeSelectionChange",e,n),e.cm&&Qa(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?Z(n.ranges,n.ranges.length-1):t}function st(e,t,n){var r=e.history.done,i=to(r);i&&i.ranges?(r[r.length-1]=t,ut(e,t,n)):ct(e,t,n)}function ct(e,t,n){ut(e,t,n),zi(e,e.sel,e.cm?e.cm.curOp.id:0/0,n)}function ut(e,t,n){(Yi(e,"beforeSelectionChange")||e.cm&&Yi(e.cm,"beforeSelectionChange"))&&(t=lt(e,t));var r=n&&n.bias||(la(t.primary().head,e.sel.primary().head)<0?-1:1);dt(e,pt(e,t,r,!0)),n&&n.scroll===!1||!e.cm||sr(e.cm)}function dt(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Zi(e.cm)),Vi(e,"cursorActivity",e))}function ft(e){dt(e,pt(e,e.sel,null,!1),nl)}function pt(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=ht(e,a.anchor,n,r),s=ht(e,a.head,n,r);(i||l!=a.anchor||s!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new G(l,s))}return i?Z(i,t.primIndex):t}function ht(e,t,n,r){var i=!1,o=t,a=n||1;e.cantEdit=!1;e:for(;;){var l=wi(e,o.line);if(l.markedSpans)for(var s=0;s<l.markedSpans.length;++s){var c=l.markedSpans[s],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&(Qa(u,"beforeCursorEnter"),u.explicitlyCleared)){if(l.markedSpans){--s;continue}break}if(!u.atomic)continue;var d=u.find(0>a?-1:1);if(0==la(d,o)&&(d.ch+=a,d.ch<0?d=d.line>e.first?Q(e,aa(d.line-1)):null:d.ch>l.text.length&&(d=d.line<e.first+e.size-1?aa(d.line+1,0):null),!d)){if(i)return r?(e.cantEdit=!0,aa(e.first,0)):ht(e,t,n,!0);i=!0,d=t,a=-a}o=d;continue e}}return o}}function mt(e){for(var t=e.display,n=e.doc,r=document.createDocumentFragment(),i=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++){var a=n.sel.ranges[o],l=a.empty();(l||e.options.showCursorWhenSelecting)&&gt(e,a,r),l||vt(e,a,i)}if(e.options.moveInputWithCursor){var s=Bt(e,n.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect(),d=Math.max(0,Math.min(t.wrapper.clientHeight-10,s.top+u.top-c.top)),f=Math.max(0,Math.min(t.wrapper.clientWidth-10,s.left+u.left-c.left));
t.inputDiv.style.top=d+"px",t.inputDiv.style.left=f+"px"}po(t.cursorDiv,r),po(t.selectionDiv,i)}function gt(e,t,n){var r=Bt(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(uo("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(uo("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function vt(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),l.appendChild(uo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return Rt(e,aa(t,n),"div",d,r)}var l,s,d=wi(a,t),f=d.text.length;return To(Mi(d),n||0,null==i?f:i,function(e,t,a){var d,p,h,m=o(e,"left");if(e==t)d=m,p=h=m.left;else{if(d=o(t-1,"right"),"rtl"==a){var g=m;m=d,d=g}p=m.left,h=d.right}null==n&&0==e&&(p=c),d.top-m.top>3&&(r(p,m.top,null,m.bottom),p=c,m.bottom<d.top&&r(p,m.bottom,null,d.top)),null==i&&t==f&&(h=u),(!l||m.top<l.top||m.top==l.top&&m.left<l.left)&&(l=m),(!s||d.bottom>s.bottom||d.bottom==s.bottom&&d.right>s.right)&&(s=d),c+1>p&&(p=c),r(p,d.top,h-p,d.bottom)}),{start:l,end:s}}var o=e.display,a=e.doc,l=document.createDocumentFragment(),s=St(e.display),c=s.left,u=o.lineSpace.offsetWidth-s.right,d=t.from(),f=t.to();if(d.line==f.line)i(d.line,d.ch,f.ch);else{var p=wi(a,d.line),h=wi(a,f.line),m=Br(p)==Br(h),g=i(d.line,d.ch,m?p.text.length+1:null).end,v=i(f.line,m?0:null,f.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(c,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(c,g.bottom,null,v.top)}n.appendChild(l)}function bt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function yt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,ao(wt,e))}function wt(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ma(t.mode,kt(e,t.frontier));Xt(e,function(){t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(i){if(t.frontier>=e.display.viewFrom){var o=i.styles,a=ri(e,i,r,!0);i.styles=a.styles;var l=i.styleClasses,s=a.classes;s?i.styleClasses=s:l&&(i.styleClasses=null);for(var c=!o||o.length!=i.styles.length||l!=s&&(!l||!s||l.bgClass!=s.bgClass||l.textClass!=s.textClass),u=0;!c&&u<o.length;++u)c=o[u]!=i.styles[u];c&&on(e,t.frontier,"text"),i.stateAfter=Ma(t.mode,r)}else oi(e,i.text,r),i.stateAfter=t.frontier%5==0?Ma(t.mode,r):null;return++t.frontier,+new Date>n?(yt(e,e.options.workDelay),!0):void 0})})}}function xt(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>a;--l){if(l<=o.first)return o.first;var s=wi(o,l-1);if(s.stateAfter&&(!n||l<=o.frontier))return l;var c=ol(s.text,null,e.options.tabSize);(null==i||r>c)&&(i=l-1,r=c)}return i}function kt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=xt(e,t,n),a=o>r.first&&wi(r,o-1).stateAfter;return a=a?Ma(r.mode,a):La(r.mode),r.iter(o,t,function(n){oi(e,n.text,a);var l=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=l?Ma(r.mode,a):null,++o}),n&&(r.frontier=o),a}function _t(e){return e.lineSpace.offsetTop}function Ct(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function St(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=po(e.measure,uo("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Tt(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],c=a[l+1];Math.abs(s.bottom-c.bottom)>2&&o.push((s.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Mt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Ci(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Lt(e,t){t=Br(t);var n=Ci(t),r=e.display.externalMeasured=new tn(e.doc,t,n);r.lineN=n;var i=r.built=li(e,r);return r.text=i.pre,po(e.display.lineMeasure,i.pre),r}function Nt(e,t,n,r){return At(e,It(e,t),n,r)}function $t(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ln(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function It(e,t){var n=Ci(t),r=$t(e,n);r&&!r.text?r=null:r&&r.changes&&A(e,r,n,$(e)),r||(r=Lt(e,t));var i=Mt(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function At(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Tt(e,t.view,t.rect),t.hasHeights=!0),o=Et(e,t,n,r),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Et(e,t,n,r){for(var i,o,a,l,s=t.map,c=0;c<s.length;c+=3){var u=s[c],d=s[c+1];if(u>n?(o=0,a=1,l="left"):d>n?(o=n-u,a=o+1):(c==s.length-3||n==d&&s[c+3]>n)&&(a=d-u,o=a-1,n>=d&&(l="right")),null!=o){if(i=s[c+2],u==d&&r==(i.insertLeft?"left":"right")&&(l=r),"left"==r&&0==o)for(;c&&s[c-2]==s[c-3]&&s[c-1].insertLeft;)i=s[(c-=3)+2],l="left";if("right"==r&&o==d-u)for(;c<s.length-3&&s[c+3]==s[c+4]&&!s[c+5].insertLeft;)i=s[(c+=3)+2],l="right";break}}var f;if(3==i.nodeType){for(;o&&co(t.line.text.charAt(u+o));)--o;for(;d>u+a&&co(t.line.text.charAt(u+a));)++a;if(Ro&&9>Bo&&0==o&&a==d-u)f=i.parentNode.getBoundingClientRect();else if(Ro&&e.options.lineWrapping){var p=sl(i,o,a).getClientRects();f=p.length?p["right"==r?p.length-1:0]:da}else f=sl(i,o,a).getBoundingClientRect()||da}else{o>0&&(l=r="right");var p;f=e.options.lineWrapping&&(p=i.getClientRects()).length>1?p["right"==r?p.length-1:0]:i.getBoundingClientRect()}if(Ro&&9>Bo&&!o&&(!f||!f.left&&!f.right)){var h=i.parentNode.getClientRects()[0];f=h?{left:h.left,right:h.left+Gt(e.display),top:h.top,bottom:h.bottom}:da}for(var m=f.top-t.rect.top,g=f.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,c=0;c<b.length-1&&!(v<b[c]);c++);var y=c?b[c-1]:0,w=b[c],x={left:("right"==l?f.right:f.left)-t.rect.left,right:("left"==l?f.left:f.right)-t.rect.left,top:y,bottom:w};return f.left||f.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=m,x.rbottom=g),x}function zt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function jt(e){e.display.externalMeasure=null,fo(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)zt(e.display.view[t])}function Ot(e){jt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function qt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Dt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wt(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Zr(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Ti(t);if("local"==r?a+=_t(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==r?0:Dt());var s=l.left+("window"==r?0:qt());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function Ht(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=qt(),i-=Dt();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Rt(e,t,n,r,i){return r||(r=wi(e.doc,t.line)),Wt(e,r,Nt(e,r,t.ch,i),n)}function Bt(e,t,n,r,i,o){function a(t,a){var l=At(e,i,t,a?"right":"left",o);return a?l.left=l.right:l.right=l.left,Wt(e,r,l,n)}function l(e,t){var n=s[t],r=n.level%2;return e==Mo(n)&&t&&n.level<s[t-1].level?(n=s[--t],e=Lo(n)-(n.level%2?0:1),r=!0):e==Lo(n)&&t<s.length-1&&n.level<s[t+1].level&&(n=s[++t],e=Mo(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?a(e-1):a(e,r)}r=r||wi(e.doc,t.line),i||(i=It(e,r));var s=Mi(r),c=t.ch;if(!s)return a(c);var u=zo(s,c),d=l(c,u);return null!=xl&&(d.other=l(c,xl)),d}function Ft(e,t){var n=0,t=Q(e.doc,t);e.options.lineWrapping||(n=Gt(e.display)*t.ch);var r=wi(e.doc,t.line),i=Ti(r)+_t(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Pt(e,t,n,r){var i=aa(e,t);return i.xRel=r,n&&(i.outside=!0),i}function Ut(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return Pt(r.first,0,!0,-1);var i=Si(r,n),o=r.first+r.size-1;if(i>o)return Pt(r.first+r.size-1,wi(r,o).text.length,!0,1);0>t&&(t=0);for(var a=wi(r,i);;){var l=Vt(e,a,i,t,n),s=Hr(a),c=s&&s.find(0,!0);if(!s||!(l.ch>c.from.ch||l.ch==c.from.ch&&l.xRel>0))return l;i=Ci(a=c.to.line)}}function Vt(e,t,n,r,i){function o(r){var i=Bt(e,aa(n,r),"line",t,c);return l=!0,a>i.bottom?i.left-s:a<i.top?i.left+s:(l=!1,i.left)}var a=i-Ti(t),l=!1,s=2*e.display.wrapper.clientWidth,c=It(e,t),u=Mi(t),d=t.text.length,f=No(t),p=$o(t),h=o(f),m=l,g=o(p),v=l;if(r>g)return Pt(n,p,v,1);for(;;){if(u?p==f||p==Oo(t,f,1):1>=p-f){for(var b=h>r||g-r>=r-h?f:p,y=r-(b==f?h:g);co(t.text.charAt(b));)++b;var w=Pt(n,b,b==f?m:v,-1>y?-1:y>1?1:0);return w}var x=Math.ceil(d/2),k=f+x;if(u){k=f;for(var _=0;x>_;++_)k=Oo(t,k,1)}var C=o(k);C>r?(p=k,g=C,(v=l)&&(g+=1e3),d=x):(f=k,h=C,m=l,d-=x)}}function Kt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==sa){sa=uo("pre");for(var t=0;49>t;++t)sa.appendChild(document.createTextNode("x")),sa.appendChild(uo("br"));sa.appendChild(document.createTextNode("x"))}po(e.measure,sa);var n=sa.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),fo(e.measure),n||1}function Gt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=uo("span","xxxxxxxxxx"),n=uo("pre",[t]);po(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Zt(e){e.curOp={viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++fa},Ja++||(Va=[])}function Yt(e){var t=e.curOp,n=e.doc,r=e.display;if(e.curOp=null,t.updateMaxLine&&p(e),t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping){var i=_(e,{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate);e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)}if(!i&&t.selectionChanged&&mt(e),i||t.startHeight==e.doc.height||v(e),null==r.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=t.scrollTop&&r.scroller.scrollTop!=t.scrollTop){var o=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,t.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=o}if(null!=t.scrollLeft&&r.scroller.scrollLeft!=t.scrollLeft){var a=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,t.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=a,y(e)}if(t.scrollToPos){var l=ir(e,Q(e.doc,t.scrollToPos.from),Q(e.doc,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&rr(e,l)}t.selectionChanged&&bt(e),e.state.focused&&t.updateInput&&hn(e,t.typing);var s=t.maybeHiddenMarkers,c=t.maybeUnhiddenMarkers;if(s)for(var u=0;u<s.length;++u)s[u].lines.length||Qa(s[u],"hide");if(c)for(var u=0;u<c.length;++u)c[u].lines.length&&Qa(c[u],"unhide");var d;if(--Ja||(d=Va,Va=null),t.changeObjs&&Qa(e,"changes",e,t.changeObjs),d)for(var u=0;u<d.length;++u)d[u]();if(t.cursorActivityHandlers)for(var u=0;u<t.cursorActivityHandlers.length;u++)t.cursorActivityHandlers[u](e)}function Xt(e,t){if(e.curOp)return t();Zt(e);try{return t()}finally{Yt(e)}}function Qt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Zt(e);try{return t.apply(e,arguments)}finally{Yt(e)}}}function Jt(e){return function(){if(this.curOp)return e.apply(this,arguments);Zt(this);try{return e.apply(this,arguments)}finally{Yt(this)}}}function en(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Zt(t);try{return e.apply(this,arguments)}finally{Yt(t)}}}function tn(e,t,n){this.line=t,this.rest=Fr(t),this.size=this.rest?Ci(to(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Vr(e,t)}function nn(e,t,n){for(var r,i=[],o=t;n>o;o=r){var a=new tn(e.doc,wi(e.doc,o),o);r=o+a.size,i.push(a)}return i}function rn(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)oa&&Pr(e.doc,t)<i.viewTo&&an(e);else if(n<=i.viewFrom)oa&&Ur(e.doc,n+r)>i.viewFrom?an(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)an(e);else if(t<=i.viewFrom){var o=sn(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):an(e)}else if(n>=i.viewTo){var o=sn(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):an(e)}else{var a=sn(e,t,t,-1),l=sn(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(nn(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):an(e)}var s=i.externalMeasured;s&&(n<s.lineN?s.lineN+=r:t<s.lineN+s.size&&(i.externalMeasured=null))}function on(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ln(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==no(a,n)&&a.push(n)}}}function an(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ln(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,0>t)return r}function sn(e,t,n,r){var i,o=ln(e,t),a=e.display.view;if(!oa||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var l=0,s=e.display.viewFrom;o>l;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;Pr(e.doc,n)!=n;){if(o==(0>r?0:a.length-1))return null;n+=r*a[o-(0>r?1:0)].size,o+=r}return{index:o,lineN:n}}function cn(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=nn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=nn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ln(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(nn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ln(e,n)))),r.viewTo=n}function un(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function dn(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){pn(e),e.state.focused&&dn(e)})}function fn(e){function t(){var r=pn(e);r||n?(e.display.pollingFast=!1,dn(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function pn(e){var t=e.display.input,n=e.display.prevInput,r=e.doc;if(!e.state.focused||bl(t)&&!n||vn(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(Ro&&Bo>=9&&e.display.inputHasSelection===i)return hn(e),!1;var o=!e.curOp;o&&Zt(e),e.display.shift=!1,8203!=i.charCodeAt(0)||r.sel!=e.display.selForContextMenu||n||(n="​");for(var a=0,l=Math.min(n.length,i.length);l>a&&n.charCodeAt(a)==i.charCodeAt(a);)++a;for(var s=i.slice(a),c=vl(s),u=e.state.pasteIncoming&&c.length>1&&r.sel.ranges.length==c.length,d=r.sel.ranges.length-1;d>=0;d--){var f=r.sel.ranges[d],p=f.from(),h=f.to();a<n.length?p=aa(p.line,p.ch-(n.length-a)):e.state.overwrite&&f.empty()&&!e.state.pasteIncoming&&(h=aa(h.line,Math.min(wi(r,h.line).text.length,h.ch+to(c).length)));var m=e.curOp.updateInput,g={from:p,to:h,text:u?[c[d]]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(Yn(e.doc,g),Vi(e,"inputRead",e,g),s&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&f.head.ch<100&&(!d||r.sel.ranges[d-1].head.line!=f.head.line)){var v=e.getModeAt(f.head);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(s.indexOf(v.electricChars.charAt(b))>-1){ur(e,f.head.line,"smart");break}}else if(v.electricInput){var y=ba(g);v.electricInput.test(wi(r,y.line).text.slice(0,y.ch))&&ur(e,f.head.line,"smart")}}}return sr(e),e.curOp.updateInput=m,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&Yt(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function hn(e,t){var n,r,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();n=yl&&(o.to().line-o.from().line>100||(r=e.getSelection()).length>1e3);var a=n?"-":r||e.getSelection();e.display.input.value=a,e.state.focused&&ll(e.display.input),Ro&&Bo>=9&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",Ro&&Bo>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function mn(e){"nocursor"==e.options.readOnly||Qo&&mo()==e.display.input||e.display.input.focus()}function gn(e){e.state.focused||(mn(e),Rn(e))}function vn(e){return e.options.readOnly||e.doc.cantEdit}function bn(e){function t(){e.state.focused&&setTimeout(ao(mn,e),0)}function n(t){Gi(e,t)||Za(t)}function r(t){if(e.somethingSelected())i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=e.getSelection(),ll(i.input));else{for(var n="",r=[],o=0;o<e.doc.sel.ranges.length;o++){var a=e.doc.sel.ranges[o].head.line,l={anchor:aa(a,0),head:aa(a+1,0)};r.push(l),n+=e.getRange(l.anchor,l.head)}"cut"==t.type?e.setSelections(r,null,nl):(i.prevInput="",i.input.value=n,ll(i.input))}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;Ya(i.scroller,"mousedown",Qt(e,kn)),Ro&&11>Bo?Ya(i.scroller,"dblclick",Qt(e,function(t){if(!Gi(e,t)){var n=xn(e,t);if(n&&!Mn(e,t)&&!wn(e.display,t)){Ka(t);var r=mr(e,n);rt(e.doc,r.anchor,r.head)}}})):Ya(i.scroller,"dblclick",function(t){Gi(e,t)||Ka(t)}),Ya(i.lineSpace,"selectstart",function(e){wn(i,e)||Ka(e)}),ra||Ya(i.scroller,"contextmenu",function(t){Fn(e,t)}),Ya(i.scroller,"scroll",function(){i.scroller.clientHeight&&($n(e,i.scroller.scrollTop),In(e,i.scroller.scrollLeft,!0),Qa(e,"scroll",e))}),Ya(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&$n(e,i.scrollbarV.scrollTop)}),Ya(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&In(e,i.scrollbarH.scrollLeft)}),Ya(i.scroller,"mousewheel",function(t){An(e,t)}),Ya(i.scroller,"DOMMouseScroll",function(t){An(e,t)}),Ya(i.scrollbarH,"mousedown",t),Ya(i.scrollbarV,"mousedown",t),Ya(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),Ya(i.input,"keyup",Qt(e,Wn)),Ya(i.input,"input",function(){Ro&&Bo>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),fn(e)}),Ya(i.input,"keydown",Qt(e,qn)),Ya(i.input,"keypress",Qt(e,Hn)),Ya(i.input,"focus",ao(Rn,e)),Ya(i.input,"blur",ao(Bn,e)),e.options.dragDrop&&(Ya(i.scroller,"dragstart",function(t){Nn(e,t)}),Ya(i.scroller,"dragenter",n),Ya(i.scroller,"dragover",n),Ya(i.scroller,"drop",Qt(e,Ln))),Ya(i.scroller,"paste",function(t){wn(i,t)||(e.state.pasteIncoming=!0,mn(e),fn(e))}),Ya(i.input,"paste",function(){if(Fo&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,n=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=n,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,fn(e)}),Ya(i.input,"cut",r),Ya(i.input,"copy",r),Go&&Ya(i.sizer,"mouseup",function(){mo()==i.input&&i.input.blur(),mn(e)})}function yn(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function wn(e,t){for(var n=Pi(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function xn(e,t,n,r){var i=e.display;if(!n){var o=Pi(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var a,l,s=i.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var c,u=Ut(e,a,l);if(r&&1==u.xRel&&(c=wi(e.doc,u.line).text).length==u.ch){var d=ol(c,c.length,e.options.tabSize)-c.length;u=aa(u.line,Math.max(0,Math.round((a-St(e.display).left)/Gt(e.display))-d))}return u}function kn(e){if(!Gi(this,e)){var t=this,n=t.display;if(n.shift=e.shiftKey,wn(n,e))return void(Fo||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Mn(t,e)){var r=xn(t,e);switch(window.focus(),Ui(e)){case 1:r?_n(t,e,r):Pi(e)==n.scroller&&Ka(e);break;case 2:Fo&&(t.state.lastMiddleDown=+new Date),r&&rt(t.doc,r),setTimeout(ao(mn,t),20),Ka(e);break;case 3:ra&&Fn(t,e)}}}}function _n(e,t,n){setTimeout(ao(gn,e),0);var r,i=+new Date;ua&&ua.time>i-400&&0==la(ua.pos,n)?r="triple":ca&&ca.time>i-400&&0==la(ca.pos,n)?(r="double",ua={time:i,pos:n}):(r="single",ca={time:i,pos:n});var o=e.doc.sel,a=Jo?t.metaKey:t.ctrlKey;e.options.dragDrop&&gl&&!vn(e)&&"single"==r&&o.contains(n)>-1&&o.somethingSelected()?Cn(e,t,n,a):Sn(e,t,n,r,a)}function Cn(e,t,n,r){var i=e.display,o=Qt(e,function(a){Fo&&(i.scroller.draggable=!1),e.state.draggingText=!1,Xa(document,"mouseup",o),Xa(i.scroller,"drop",o),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(Ka(a),r||rt(e.doc,n),mn(e),Ro&&9==Bo&&setTimeout(function(){document.body.focus(),mn(e)},20))});Fo&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),Ya(document,"mouseup",o),Ya(i.scroller,"drop",o)}function Sn(e,t,n,r,i){function o(t){if(0!=la(m,t))if(m=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=ol(wi(c,n.line).text,n.ch,o),l=ol(wi(c,t.line).text,t.ch,o),s=Math.min(a,l),p=Math.max(a,l),h=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));g>=h;h++){var v=wi(c,h).text,b=Ji(v,s,o);s==p?i.push(new G(aa(h,b),aa(h,b))):v.length>b&&i.push(new G(aa(h,b),aa(h,Ji(v,p,o))))}i.length||i.push(new G(n,n)),ct(c,Z(f.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=u,w=y.anchor,x=t;if("single"!=r){if("double"==r)var k=mr(e,t);else var k=new G(aa(t.line,0),Q(c,aa(t.line+1,0)));la(k.anchor,w)>0?(x=k.head,w=V(y.from(),k.anchor)):(x=k.anchor,w=U(y.to(),k.head))}var i=f.ranges.slice(0);i[d]=new G(Q(c,w),x),ct(c,Z(i,d),rl)}}function a(t){var n=++v,i=xn(e,t,!0,"rect"==r);if(i)if(0!=la(i,m)){gn(e),o(i);var l=b(s,c);(i.line>=l.to||i.line<l.from)&&setTimeout(Qt(e,function(){v==n&&a(t)}),150)}else{var u=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;u&&setTimeout(Qt(e,function(){v==n&&(s.scroller.scrollTop+=u,a(t))}),50)}}function l(t){v=1/0,Ka(t),mn(e),Xa(document,"mousemove",y),Xa(document,"mouseup",w),c.history.lastSelOrigin=null}var s=e.display,c=e.doc;Ka(t);var u,d,f=c.sel;if(i&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?c.sel.ranges[d]:new G(n,n)):u=c.sel.primary(),t.altKey)r="rect",i||(u=new G(n,n)),n=xn(e,t,!0,!0),d=-1;else if("double"==r){var p=mr(e,n);u=e.display.shift||c.extend?nt(c,u,p.anchor,p.head):p}else if("triple"==r){var h=new G(aa(n.line,0),Q(c,aa(n.line+1,0)));u=e.display.shift||c.extend?nt(c,u,h.anchor,h.head):h}else u=nt(c,u,n);i?d>-1?ot(c,d,u,rl):(d=c.sel.ranges.length,ct(c,Z(c.sel.ranges.concat([u]),d),{scroll:!1,origin:"*mouse"})):(d=0,ct(c,new K([u],0),rl),f=c.sel);var m=n,g=s.wrapper.getBoundingClientRect(),v=0,y=Qt(e,function(e){Ui(e)?a(e):l(e)}),w=Qt(e,l);Ya(document,"mousemove",y),Ya(document,"mouseup",w)}function Tn(e,t,n,r,i){try{var o=t.clientX,a=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ka(t);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(a>s.bottom||!Yi(e,n))return Fi(t);a-=s.top-l.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var u=l.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=o){var d=Si(e.doc,a),f=e.options.gutters[c];return i(e,n,e,d,f,t),Fi(t)}}}function Mn(e,t){return Tn(e,t,"gutterClick",!0,Vi)}function Ln(e){var t=this;if(!Gi(t,e)&&!wn(t.display,e)){Ka(e),Ro&&(pa=+new Date);var n=xn(t,e,!0),r=e.dataTransfer.files;if(n&&!vn(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(e,r){var l=new FileReader;l.onload=Qt(t,function(){if(o[r]=l.result,++a==i){n=Q(t.doc,n);var e={from:n,to:n,text:vl(o.join("\n")),origin:"paste"};Yn(t.doc,e),st(t.doc,Y(n,ba(e)))}}),l.readAsText(e)},s=0;i>s;++s)l(r[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(ao(mn,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(Jo?e.metaKey:e.ctrlKey))var c=t.listSelections();if(ut(t.doc,Y(n,n)),c)for(var s=0;s<c.length;++s)nr(t.doc,"",c[s].anchor,c[s].head,"drag");t.replaceSelection(o,"around","paste"),mn(t)}}catch(e){}}}}function Nn(e,t){if(Ro&&(!e.state.draggingText||+new Date-pa<100))return void Za(t);if(!Gi(e,t)&&!wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!Ko)){var n=uo("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Vo&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Vo&&n.parentNode.removeChild(n)}}function $n(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Do||_(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Do&&_(e),yt(e,100))}function In(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,y(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function An(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&Jo&&Fo)e:for(var a=t.target,l=i.view;a!=o;a=a.parentNode)for(var s=0;s<l.length;s++)if(l[s].node==a){e.display.currentWheelTarget=a;break e}if(n&&!Do&&!Vo&&null!=ma)return r&&$n(e,Math.max(0,Math.min(o.scrollTop+r*ma,o.scrollHeight-o.clientHeight))),In(e,Math.max(0,Math.min(o.scrollLeft+n*ma,o.scrollWidth-o.clientWidth))),Ka(t),void(i.wheelStartX=null);if(r&&null!=ma){var c=r*ma,u=e.doc.scrollTop,d=u+i.wrapper.clientHeight;0>c?u=Math.max(0,u+c-50):d=Math.min(e.doc.height,d+c+50),_(e,{top:u,bottom:d})}20>ha&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(ma=(ma*ha+n)/(ha+1),++ha)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function En(e,t,n){if("string"==typeof t&&(t=Na[t],!t))return!1;e.display.pollingFast&&pn(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{vn(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=tl}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function zn(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function jn(e,t){var n=vr(e.options.keyMap),r=n.auto;clearTimeout(ga),r&&!Aa(t)&&(ga=setTimeout(function(){vr(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,l(e))},50));var i=Ea(t,!0),o=!1;if(!i)return!1;var a=zn(e);return o=t.shiftKey?Ia("Shift-"+i,a,function(t){return En(e,t,!0)})||Ia(i,a,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?En(e,t):void 0}):Ia(i,a,function(t){return En(e,t)}),o&&(Ka(t),bt(e),Vi(e,"keyHandled",e,i,t)),o}function On(e,t,n){var r=Ia("'"+n+"'",zn(e),function(t){return En(e,t,!0)});return r&&(Ka(t),bt(e),Vi(e,"keyHandled",e,"'"+n+"'",t)),r}function qn(e){var t=this;if(gn(t),!Gi(t,e)){Ro&&11>Bo&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=jn(t,e);Vo&&(va=r?n:null,!r&&88==n&&!yl&&(Jo?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Dn(t)}}function Dn(e){function t(e){18!=e.keyCode&&e.altKey||(vo(n,"CodeMirror-crosshair"),Xa(document,"keyup",t),Xa(document,"mouseover",t))}var n=e.display.lineDiv;bo(n,"CodeMirror-crosshair"),Ya(document,"keyup",t),Ya(document,"mouseover",t)}function Wn(e){Gi(this,e)||16==e.keyCode&&(this.doc.sel.shift=!1)}function Hn(e){var t=this;if(!(Gi(t,e)||e.ctrlKey||Jo&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Vo&&n==va)return va=null,void Ka(e);if(!(Vo&&(!e.which||e.which<10)||Go)||!jn(t,e)){var i=String.fromCharCode(null==r?n:r);On(t,e,i)||(Ro&&Bo>=9&&(t.display.inputHasSelection=null),fn(t))}}}function Rn(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Qa(e,"focus",e),e.state.focused=!0,bo(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(hn(e),Fo&&setTimeout(ao(hn,e,!0),0))),dn(e),bt(e))}function Bn(e){e.state.focused&&(Qa(e,"blur",e),e.state.focused=!1,vo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Fn(e,t){function n(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),n=i.input.value="​"+(t?i.input.value:"");i.prevInput=t?"":"​",i.input.selectionStart=1,i.input.selectionEnd=n.length,i.selForContextMenu=e.doc.sel}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=s,Ro&&9>Bo&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),dn(e),null!=i.input.selectionStart){(!Ro||Ro&&9>Bo)&&n();var t=0,r=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?Qt(e,Na.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(r,500):hn(e)};i.detectingSelectAll=setTimeout(r,200)}}if(!Gi(e,t,"contextmenu")){var i=e.display;if(!wn(i,t)&&!Pn(e,t)){var o=xn(e,t),a=i.scroller.scrollTop;if(o&&!Vo){var l=e.options.resetSelectionOnContextMenu;l&&-1==e.doc.sel.contains(o)&&Qt(e,ct)(e.doc,Y(o),nl);var s=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Ro?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",mn(e),hn(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),Ro&&Bo>=9&&n(),ra){Za(t);var c=function(){Xa(window,"mouseup",c),setTimeout(r,20)};Ya(window,"mouseup",c)}else setTimeout(r,50)}}}}function Pn(e,t){return Yi(e,"gutterContextMenu")?Tn(e,t,"gutterContextMenu",!1,Qa):!1}function Un(e,t){if(la(e,t.from)<0)return e;if(la(e,t.to)<=0)return ba(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ba(t).ch-t.to.ch),aa(n,r)
}function Vn(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new G(Un(i.anchor,t),Un(i.head,t)))}return Z(n,e.sel.primIndex)}function Kn(e,t,n){return e.line==t.line?aa(n.line,e.ch-t.ch+n.ch):aa(n.line+(e.line-t.line),e.ch)}function Gn(e,t,n){for(var r=[],i=aa(e.first,0),o=i,a=0;a<t.length;a++){var l=t[a],s=Kn(l.from,i,o),c=Kn(ba(l),i,o);if(i=l.to,o=c,"around"==n){var u=e.sel.ranges[a],d=la(u.head,u.anchor)<0;r[a]=new G(d?c:s,d?s:c)}else r[a]=new G(s,s)}return new K(r,e.sel.primIndex)}function Zn(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Q(e,t)),n&&(this.to=Q(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Qa(e,"beforeChange",e,r),e.cm&&Qa(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Yn(e,t,n){if(e.cm){if(!e.cm.curOp)return Qt(e.cm,Yn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Yi(e,"beforeChange")||e.cm&&Yi(e.cm,"beforeChange"))||(t=Zn(e,t,!0))){var r=ia&&!n&&Ar(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Xn(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Xn(e,t)}}function Xn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=la(t.from,t.to)){var n=Vn(e,t);Ai(e,t,n,e.cm?e.cm.curOp.id:0/0),er(e,t,n,Nr(e,t));var r=[];bi(e,function(e,n){n||-1!=no(r,e.history)||(Bi(e.history,t),r.push(e.history)),er(e,t,null,Nr(e,t))})}}function Qn(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,l="undo"==t?i.undone:i.done,s=0;s<a.length&&(r=a[s],n?!r.ranges||r.equals(e.sel):r.ranges);s++);if(s!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if(ji(r,l),n&&!r.equals(e.sel))return void ct(e,r,{clearRedo:!1});o=r}var c=[];ji(o,l),l.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=Yi(e,"beforeChange")||e.cm&&Yi(e.cm,"beforeChange"),s=r.changes.length-1;s>=0;--s){var d=r.changes[s];if(d.origin=t,u&&!Zn(e,d,!1))return void(a.length=0);c.push(Ni(e,d));var f=s?Vn(e,d,null):to(a);er(e,d,f,Ir(e,d)),!s&&e.cm&&e.cm.scrollIntoView(d);var p=[];bi(e,function(e,t){t||-1!=no(p,e.history)||(Bi(e.history,d),p.push(e.history)),er(e,d,null,Ir(e,d))})}}}}function Jn(e,t){if(0!=t&&(e.first+=t,e.sel=new K(ro(e.sel.ranges,function(e){return new G(aa(e.anchor.line+t,e.anchor.ch),aa(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){rn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)on(e.cm,r,"gutter")}}function er(e,t,n,r){if(e.cm&&!e.cm.curOp)return Qt(e.cm,er)(e,t,n,r);if(t.to.line<e.first)return void Jn(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Jn(e,i),t={from:aa(e.first,0),to:aa(t.to.line+i,t.to.ch),text:[to(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:aa(o,wi(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=xi(e,t.from,t.to),n||(n=Vn(e,t,null)),e.cm?tr(e.cm,t,r):mi(e,t,r),ut(e,n,nl)}}function tr(e,t,n){var r=e.doc,i=e.display,a=t.from,l=t.to,s=!1,c=a.line;e.options.lineWrapping||(c=Ci(Br(wi(r,a.line))),r.iter(c,l.line+1,function(e){return e==i.maxLine?(s=!0,!0):void 0})),r.sel.contains(t.from,t.to)>-1&&Zi(e),mi(r,t,n,o(e)),e.options.lineWrapping||(r.iter(c,a.line+t.text.length,function(e){var t=f(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),yt(e,400);var u=t.text.length-(l.line-a.line)-1;a.line!=l.line||1!=t.text.length||hi(e.doc,t)?rn(e,a.line,l.line+1,u):on(e,a.line,"text");var d=Yi(e,"changes"),p=Yi(e,"change");if(p||d){var h={from:a,to:l,text:t.text,removed:t.removed,origin:t.origin};p&&Vi(e,"change",e,h),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function nr(e,t,n,r,i){if(r||(r=n),la(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=vl(t)),Yn(e,{from:n,to:r,text:t,origin:i})}function rr(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Yo){var o=uo("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-_t(e.display))+"px; height: "+(t.bottom-t.top+el)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function ir(e,t,n,r){for(null==r&&(r=0);;){var i=!1,o=Bt(e,t),a=n&&n!=t?Bt(e,n):o,l=ar(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),s=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&($n(e,l.scrollTop),Math.abs(e.doc.scrollTop-s)>1&&(i=!0)),null!=l.scrollLeft&&(In(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(i=!0)),!i)return o}}function or(e,t,n,r,i){var o=ar(e,t,n,r,i);null!=o.scrollTop&&$n(e,o.scrollTop),null!=o.scrollLeft&&In(e,o.scrollLeft)}function ar(e,t,n,r,i){var o=e.display,a=Kt(e.display);0>n&&(n=0);var l=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,s=o.scroller.clientHeight-el,c={},u=e.doc.height+Ct(o),d=a>n,f=i>u-a;if(l>n)c.scrollTop=d?0:n;else if(i>l+s){var p=Math.min(n,(f?u:i)-s);p!=l&&(c.scrollTop=p)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-el;t+=o.gutters.offsetWidth,r+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>t;return h+g>t||v?(v&&(t=0),c.scrollLeft=Math.max(0,t-10-g)):r>m+h-3&&(c.scrollLeft=r+10-m),c}function lr(e,t,n){(null!=t||null!=n)&&cr(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function sr(e){cr(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?aa(t.line,t.ch-1):t,r=aa(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function cr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Ft(e,t.from),r=Ft(e,t.to),i=ar(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function ur(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(e.doc.mode.indent?i=kt(e,t):n="prev");var a=e.options.tabSize,l=wi(o,t),s=ol(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var c,u=l.text.match(/^\s*/)[0];if(r||/\S/.test(l.text)){if("smart"==n&&(c=e.doc.mode.indent(i,l.text.slice(u.length),l.text),c==tl)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?ol(wi(o,t-1).text,null,a):0:"add"==n?c=s+e.options.indentUnit:"subtract"==n?c=s-e.options.indentUnit:"number"==typeof n&&(c=s+n),c=Math.max(0,c);var d="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/a);p;--p)f+=a,d+="	";if(c>f&&(d+=eo(c-f)),d!=u)nr(e.doc,d,aa(t,0),aa(t,u.length),"+input");else for(var p=0;p<o.sel.ranges.length;p++){var h=o.sel.ranges[p];if(h.head.line==t&&h.head.ch<u.length){var f=aa(t,u.length);ot(o,p,new G(f,f));break}}l.stateAfter=null}function dr(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=wi(e,X(e,t)):i=Ci(t),null==i?null:(r(o,i)&&e.cm&&on(e.cm,i,n),o)}function fr(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&la(o.from,to(r).to)<=0;){var a=r.pop();if(la(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Xt(e,function(){for(var t=r.length-1;t>=0;t--)nr(e.doc,"",r[t].from,r[t].to,"+delete");sr(e)})}function pr(e,t,n,r,i){function o(){var t=l+n;return t<e.first||t>=e.first+e.size?d=!1:(l=t,u=wi(e,t))}function a(e){var t=(i?Oo:qo)(u,s,n,!0);if(null==t){if(e||!o())return d=!1;s=i?(0>n?$o:No)(u):0>n?u.text.length:0}else s=t;return!0}var l=t.line,s=t.ch,c=n,u=wi(e,l),d=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var f=null,p="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>n)||a(!m);m=!1){var g=u.text.charAt(s)||"\n",v=lo(g,h)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(!p||m||v||(v="s"),f&&f!=v){0>n&&(n=1,a());break}if(v&&(f=v),n>0&&!a(!m))break}var b=ht(e,aa(l,s),c,!0);return d||(b.hitSide=!0),b}function hr(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(l-(0>n?1.5:.5)*Kt(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var s=Ut(e,a,i);if(!s.outside)break;if(0>n?0>=i:i>=o.height){s.hitSide=!0;break}i+=5*n}return s}function mr(e,t){var n=e.doc,r=wi(n,t.line).text,i=t.ch,o=t.ch;if(r){var a=e.getHelper(t,"wordChars");(t.xRel<0||o==r.length)&&i?--i:++o;for(var l=r.charAt(i),s=lo(l,a)?function(e){return lo(e,a)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!lo(e)};i>0&&s(r.charAt(i-1));)--i;for(;o<r.length&&s(r.charAt(o));)++o}return new G(aa(t.line,i),aa(t.line,o))}function gr(t,n,r,i){e.defaults[t]=n,r&&(wa[t]=i?function(e,t,n){n!=xa&&r(e,t,n)}:r)}function vr(e){return"string"==typeof e?$a[e]:e}function br(e,t,n,r,i){if(r&&r.shared)return yr(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Qt(e.cm,br)(e,t,n,r,i);var o=new ja(e,i),a=la(t,n);if(r&&oo(r,o,!1),a>0||0==a&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=uo("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Rr(e,t.line,t,n,o)||t.line!=n.line&&Rr(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");oa=!0}o.addToHistory&&Ai(e,{from:t,to:n,origin:"markText"},e.sel,0/0);var l,s=t.line,c=e.cm;if(e.iter(s,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Br(e)==c.display.maxLine&&(l=!0),o.collapsed&&s!=t.line&&_i(e,0),Tr(e,new _r(o,s==t.line?t.ch:null,s==n.line?n.ch:null)),++s}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Vr(e,t)&&_i(t,0)}),o.clearOnEnter&&Ya(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(ia=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Oa,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)rn(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var u=t.line;u<=n.line;u++)on(c,u,"text");o.atomic&&ft(c.doc),Vi(c,"markerAdded",c,o)}return o}function yr(e,t,n,r,i){r=oo(r),r.shared=!1;var o=[br(e,t,n,r,i)],a=o[0],l=r.widgetNode;return bi(e,function(e){l&&(r.widgetNode=l.cloneNode(!0)),o.push(br(e,Q(e,t),Q(e,n),r,i));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=to(o)}),new qa(o,a)}function wr(e){return e.findMarks(aa(e.first,0),e.clipPos(aa(e.lastLine())),function(e){return e.parent})}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(la(o,a)){var l=br(e,o,a,r.primary,r.primary.type);r.markers.push(l),l.parent=r}}}function kr(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];bi(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==no(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function _r(e,t,n){this.marker=e,this.from=t,this.to=n}function Cr(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Sr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Tr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Mr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(l||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new _r(a,o.from,s?null:o.to))}}return r}function Lr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(l||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new _r(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return r}function Nr(e,t){var n=et(e,t.from.line)&&wi(e,t.from.line).markedSpans,r=et(e,t.to.line)&&wi(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==la(t.from,t.to),l=Mr(n,i,a),s=Lr(r,o,a),c=1==t.text.length,u=to(t.text).length+(c?i:0);if(l)for(var d=0;d<l.length;++d){var f=l[d];if(null==f.to){var p=Cr(s,f.marker);p?c&&(f.to=null==p.to?null:p.to+u):f.to=i}}if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null!=f.to&&(f.to+=u),null==f.from){var p=Cr(l,f.marker);p||(f.from=u,c&&(l||(l=[])).push(f))}else f.from+=u,c&&(l||(l=[])).push(f)}l&&(l=$r(l)),s&&s!=l&&(s=$r(s));var h=[l];if(!c){var m,g=t.text.length-2;if(g>0&&l)for(var d=0;d<l.length;++d)null==l[d].to&&(m||(m=[])).push(new _r(l[d].marker,null,null));for(var d=0;g>d;++d)h.push(m);h.push(s)}return h}function $r(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Ir(e,t){var n=Di(e,t),r=Nr(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else a&&(n[i]=a)}return n}function Ar(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=no(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],l=a.find(0),s=0;s<i.length;++s){var c=i[s];if(!(la(c.to,l.from)<0||la(c.from,l.to)>0)){var u=[s,1],d=la(c.from,l.from),f=la(c.to,l.to);(0>d||!a.inclusiveLeft&&!d)&&u.push({from:c.from,to:l.from}),(f>0||!a.inclusiveRight&&!f)&&u.push({from:l.to,to:c.to}),i.splice.apply(i,u),s+=u.length-1}}return i}function Er(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function zr(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function jr(e){return e.inclusiveLeft?-1:0}function Or(e){return e.inclusiveRight?1:0}function qr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=la(r.from,i.from)||jr(e)-jr(t);if(o)return-o;var a=la(r.to,i.to)||Or(e)-Or(t);return a?a:t.id-e.id}function Dr(e,t){var n,r=oa&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||qr(n,i.marker)<0)&&(n=i.marker);return n}function Wr(e){return Dr(e,!0)}function Hr(e){return Dr(e,!1)}function Rr(e,t,n,r,i){var o=wi(e,t),a=oa&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var c=s.marker.find(0),u=la(c.from,n)||jr(s.marker)-jr(i),d=la(c.to,r)||Or(s.marker)-Or(i);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(la(c.to,n)>0||s.marker.inclusiveRight&&i.inclusiveLeft)||u>=0&&(la(c.from,r)<0||s.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Br(e){for(var t;t=Wr(e);)e=t.find(-1,!0).line;return e}function Fr(e){for(var t,n;t=Hr(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Pr(e,t){var n=wi(e,t),r=Br(n);return n==r?t:Ci(r)}function Ur(e,t){if(t>e.lastLine())return t;var n,r=wi(e,t);if(!Vr(e,r))return t;for(;n=Hr(r);)r=n.find(1,!0).line;return Ci(r)+1}function Vr(e,t){var n=oa&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Kr(e,t,r))return!0}}function Kr(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Kr(e,r.line,Cr(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Kr(e,t,i))return!0}function Gr(e,t,n){Ti(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&lr(e,null,n)}function Zr(e){if(null!=e.height)return e.height;if(!ho(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),po(e.cm.display.measure,uo("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function Yr(e,t,n,r){var i=new Da(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),dr(e.doc,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Vr(e.doc,t)){var r=Ti(t)<e.doc.scrollTop;_i(t,t.height+Zr(i)),r&&lr(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function Xr(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Er(e),zr(e,n);var i=r?r(e):1;i!=e.height&&_i(e,i)}function Qr(e){e.parent=null,Er(e)}function Jr(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function ei(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function ti(e,t,n){for(var r=0;10>r;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function ni(t,n,r,i,o,a,l){var s=r.flattenSpans;null==s&&(s=t.options.flattenSpans);var c,u=0,d=null,f=new za(n,t.options.tabSize);for(""==n&&Jr(ei(r,i),a);!f.eol();){if(f.pos>t.options.maxHighlightLength?(s=!1,l&&oi(t,n,i,f.pos),f.pos=n.length,c=null):c=Jr(ti(r,f,i),a),t.options.addModeClass){var p=e.innerMode(r,i).mode.name;p&&(c="m-"+(c?p+" "+c:p))}s&&d==c||(u<f.start&&o(f.start,d),u=f.start,d=c),f.start=f.pos}for(;u<f.pos;){var h=Math.min(f.pos,u+5e4);o(h,d),u=h}}function ri(e,t,n,r){var i=[e.state.modeGen],o={};ni(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},o,r);for(var a=0;a<e.state.overlays.length;++a){var l=e.state.overlays[a],s=1,c=0;ni(e,t.text,l.mode,!0,function(e,t){for(var n=s;e>c;){var r=i[s];r>e&&i.splice(s,1,e,i[s+1],r),s+=2,c=Math.min(e,r)}if(t)if(l.opaque)i.splice(n,s-n,e,"cm-overlay "+t),s=n+2;else for(;s>n;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ii(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=ri(e,t,t.stateAfter=kt(e,Ci(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function oi(e,t,n,r){var i=e.doc.mode,o=new za(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&ei(i,n);!o.eol()&&o.pos<=e.options.maxHighlightLength;)ti(i,o,n),o.start=o.pos}function ai(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Ra:Ha;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function li(e,t){var n=uo("span",null,null,Fo?"padding-right: .1px":null),r={pre:uo("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=ci,(Ro||Fo)&&e.getOption("lineWrapping")&&(r.addToken=ui(r.addToken)),So(e.display.measure)&&(o=Mi(a))&&(r.addToken=di(r.addToken,o)),r.map=[],pi(a,r,ii(e,a)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=yo(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=yo(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Co(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return Qa(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=yo(r.pre.className,r.textClass||"")),r}function si(e){var t=uo("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function ci(e,t,n,r,i,o){if(t){var a=e.cm.options.specialChars,l=!1;if(a.test(t))for(var s=document.createDocumentFragment(),c=0;;){a.lastIndex=c;var u=a.exec(t),d=u?u.index-c:t.length-c;if(d){var f=document.createTextNode(t.slice(c,c+d));s.appendChild(Ro&&9>Bo?uo("span",[f]):f),e.map.push(e.pos,e.pos+d,f),e.col+=d,e.pos+=d}if(!u)break;if(c+=d+1,"	"==u[0]){var p=e.cm.options.tabSize,h=p-e.col%p,f=s.appendChild(uo("span",eo(h),"cm-tab"));e.col+=h}else{var f=e.cm.options.specialCharPlaceholder(u[0]);s.appendChild(Ro&&9>Bo?uo("span",[f]):f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var s=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,s),Ro&&9>Bo&&(l=!0),e.pos+=t.length}if(n||r||i||l){var m=n||"";r&&(m+=r),i&&(m+=i);var g=uo("span",[s],m);return o&&(g.title=o),e.content.appendChild(g)}e.content.appendChild(s)}}function ui(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}return function(n,r,i,o,a,l){e(n,r.replace(/ {3,}/g,t),i,o,a,l)}}function di(e,t){return function(n,r,i,o,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var s=n.pos,c=s+r.length;;){for(var u=0;u<t.length;u++){var d=t[u];if(d.to>s&&d.from<=s)break}if(d.to>=c)return e(n,r,i,o,a,l);e(n,r.slice(0,d.to-s),i,o,null,l),o=null,r=r.slice(d.to-s),s=d.to}}}function fi(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function pi(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,l,s,c,u,d,f=i.length,p=0,h=1,m="",g=0;;){if(g==p){l=s=c=u="",d=null,g=1/0;for(var v=[],b=0;b<r.length;++b){var y=r[b],w=y.marker;y.from<=p&&(null==y.to||y.to>p)?(null!=y.to&&g>y.to&&(g=y.to,s=""),w.className&&(l+=" "+w.className),w.startStyle&&y.from==p&&(c+=" "+w.startStyle),w.endStyle&&y.to==g&&(s+=" "+w.endStyle),w.title&&!u&&(u=w.title),w.collapsed&&(!d||qr(d.marker,w)<0)&&(d=y)):y.from>p&&g>y.from&&(g=y.from),"bookmark"==w.type&&y.from==p&&w.widgetNode&&v.push(w)}if(d&&(d.from||0)==p&&(fi(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var b=0;b<v.length;++b)fi(t,0,v[b])}if(p>=f)break;for(var x=Math.min(f,g);;){if(m){var k=p+m.length;if(!d){var _=k>x?m.slice(0,x-p):m;t.addToken(t,_,a?a+l:l,c,p+_.length==g?s:"",u)}if(k>=x){m=m.slice(x-p),p=x;break}p=k,c=""}m=i.slice(o,o=n[h++]),a=ai(n[h++],t.cm.options)}}else for(var h=1;h<n.length;h+=2)t.addToken(t,i.slice(o,o=n[h]),ai(n[h+1],t.cm.options))}function hi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==to(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function mi(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){Xr(e,n,i,r),Vi(e,"change",e,t)}var a=t.from,l=t.to,s=t.text,c=wi(e,a.line),u=wi(e,l.line),d=to(s),f=i(s.length-1),p=l.line-a.line;if(hi(e,t)){for(var h=0,m=[];h<s.length-1;++h)m.push(new Wa(s[h],i(h),r));o(u,u.text,f),p&&e.remove(a.line,p),m.length&&e.insert(a.line,m)}else if(c==u)if(1==s.length)o(c,c.text.slice(0,a.ch)+d+c.text.slice(l.ch),f);else{for(var m=[],h=1;h<s.length-1;++h)m.push(new Wa(s[h],i(h),r));m.push(new Wa(d+c.text.slice(l.ch),f,r)),o(c,c.text.slice(0,a.ch)+s[0],i(0)),e.insert(a.line+1,m)}else if(1==s.length)o(c,c.text.slice(0,a.ch)+s[0]+u.text.slice(l.ch),i(0)),e.remove(a.line+1,p);else{o(c,c.text.slice(0,a.ch)+s[0],i(0)),o(u,d+u.text.slice(l.ch),f);for(var h=1,m=[];h<s.length-1;++h)m.push(new Wa(s[h],i(h),r));p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,m)}Vi(e,"change",e,t)}function gi(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function vi(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function bi(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var l=e.linked[a];if(l.doc!=i){var s=o&&l.sharedHist;(!n||s)&&(t(l.doc,s),r(l.doc,e,s))}}}r(e,null,!0)}function yi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,rn(e)}function wi(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(o>t){n=i;break}t-=o}return n.lines[t]}function xi(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ki(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function _i(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ci(e){if(null==e.parent)return null;for(var t=e.parent,n=no(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Si(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(o>t){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var a=e.lines[r],l=a.height;if(l>t)break;t-=l}return n+r}function Ti(e){e=Br(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;t+=a.height}return t}function Mi(e){var t=e.order;return null==t&&(t=e.order=kl(e.text)),t}function Li(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ni(e,t){var n={from:P(t.from),to:ba(t),text:xi(e,t.from,t.to)};return Oi(e,n,t.from.line,t.to.line+1),bi(e,function(e){Oi(e,n,t.from.line,t.to.line+1)},!0),n}function $i(e){for(;e.length;){var t=to(e);if(!t.ranges)break;e.pop()}}function Ii(e,t){return t?($i(e.done),to(e.done)):e.done.length&&!to(e.done).ranges?to(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),to(e.done)):void 0}function Ai(e,t,n,r){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Ii(i,i.lastOp==r))){var l=to(o.changes);0==la(t.from,t.to)&&0==la(t.from,l.to)?l.to=ba(t):o.changes.push(Ni(e,t))}else{var s=to(i.done);for(s&&s.ranges||ji(e.sel,i.done),o={changes:[Ni(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,l||Qa(e,"historyAdded")}function Ei(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function zi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Ei(e,o,to(i.done),t))?i.done[i.done.length-1]=t:ji(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastOp=n,r&&r.clearRedo!==!1&&$i(i.undone)}function ji(e,t){var n=to(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Oi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function qi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Di(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(qi(n[r]));return i}function Wi(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?K.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];i.push({changes:l});for(var s=0;s<a.length;++s){var c,u=a[s];if(l.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&no(t,Number(c[1]))>-1&&(to(l)[d]=u[d],delete u[d])}}}return i}function Hi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Ri(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var l=0;l<o.ranges.length;l++)Hi(o.ranges[l].anchor,t,n,r),Hi(o.ranges[l].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var s=o.changes[l];if(n<s.from.line)s.from=aa(s.from.line+r,s.from.ch),s.to=aa(s.to.line+r,s.to.ch);else if(t<=s.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Bi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Ri(e.done,n,r,i),Ri(e.undone,n,r,i)}function Fi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Pi(e){return e.target||e.srcElement}function Ui(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Jo&&e.ctrlKey&&1==t&&(t=3),t}function Vi(e,t){function n(e){return function(){e.apply(null,i)}}var r=e._handlers&&e._handlers[t];if(r){var i=Array.prototype.slice.call(arguments,2);Va||(++Ja,Va=[],setTimeout(Ki,0));for(var o=0;o<r.length;++o)Va.push(n(r[o]))}}function Ki(){--Ja;var e=Va;Va=null;for(var t=0;t<e.length;++t)e[t]()}function Gi(e,t,n){return Qa(e,n||t.type,e,t),Fi(t)||t.codemirrorIgnore}function Zi(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==no(n,t[r])&&n.push(t[r])}function Yi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Xi(e){e.prototype.on=function(e,t){Ya(this,e,t)},e.prototype.off=function(e,t){Xa(this,e,t)}}function Qi(){this.id=null}function Ji(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("	",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}}function eo(e){for(;al.length<=e;)al.push(to(al)+" ");return al[e]}function to(e){return e[e.length-1]}function no(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function ro(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function io(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&oo(t,n),n}function oo(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function ao(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function lo(e,t){return t?t.source.indexOf("\\w")>-1&&ul(e)?!0:t.test(e):ul(e)}function so(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function co(e){return e.charCodeAt(0)>=768&&dl.test(e)}function uo(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function fo(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function po(e,t){return fo(e).appendChild(t)}function ho(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function mo(){return document.activeElement}function go(e){return new RegExp("\\b"+e+"\\b\\s*")}function vo(e,t){var n=go(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function bo(e,t){go(t).test(e.className)||(e.className+=" "+t)}function yo(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!go(n[r]).test(t)&&(t+=" "+n[r]);return t}function wo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function xo(){ml||(ko(),ml=!0)}function ko(){var e;Ya(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,fl=null,wo(yn)},100))}),Ya(window,"blur",function(){wo(Bn)})}function _o(e){if(null!=fl)return fl;var t=uo("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return po(e,t),t.offsetWidth&&(fl=t.offsetHeight-t.clientHeight),fl||0}function Co(e){if(null==pl){var t=uo("span","​");
po(e,uo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(pl=t.offsetWidth<=1&&t.offsetHeight>2&&!(Ro&&8>Bo))}return pl?uo("span","​"):uo("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function So(e){if(null!=hl)return hl;var t=po(e,document.createTextNode("AخA")),n=sl(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=sl(t,1,2).getBoundingClientRect();return hl=r.right-n.right<3}function To(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function Mo(e){return e.level%2?e.to:e.from}function Lo(e){return e.level%2?e.from:e.to}function No(e){var t=Mi(e);return t?Mo(t[0]):0}function $o(e){var t=Mi(e);return t?Lo(to(t)):e.text.length}function Io(e,t){var n=wi(e.doc,t),r=Br(n);r!=n&&(t=Ci(r));var i=Mi(r),o=i?i[0].level%2?$o(r):No(r):0;return aa(t,o)}function Ao(e,t){for(var n,r=wi(e.doc,t);n=Hr(r);)r=n.find(1,!0).line,t=null;var i=Mi(r),o=i?i[0].level%2?No(r):$o(r):r.text.length;return aa(null==t?Ci(r):t,o)}function Eo(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function zo(e,t){xl=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return Eo(e,i.level,e[n].level)?(i.from!=i.to&&(xl=n),r):(i.from!=i.to&&(xl=r),n);n=r}}return n}function jo(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&co(e.text.charAt(t)));return t}function Oo(e,t,n,r){var i=Mi(e);if(!i)return qo(e,t,n,r);for(var o=zo(i,t),a=i[o],l=jo(e,t,a.level%2?-n:n,r);;){if(l>a.from&&l<a.to)return l;if(l==a.from||l==a.to)return zo(i,l)==o?l:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;l=n>0==a.level%2?jo(e,a.to,-1,r):jo(e,a.from,1,r)}}function qo(e,t,n,r){var i=t+n;if(r)for(;i>0&&co(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var Do=/gecko\/\d/i.test(navigator.userAgent),Wo=/MSIE \d/.test(navigator.userAgent),Ho=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ro=Wo||Ho,Bo=Ro&&(Wo?document.documentMode||6:Ho[1]),Fo=/WebKit\//.test(navigator.userAgent),Po=Fo&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Uo=/Chrome\//.test(navigator.userAgent),Vo=/Opera\//.test(navigator.userAgent),Ko=/Apple Computer/.test(navigator.vendor),Go=/KHTML\//.test(navigator.userAgent),Zo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Yo=/PhantomJS/.test(navigator.userAgent),Xo=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Qo=Xo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Jo=Xo||/Mac/.test(navigator.platform),ea=/win/i.test(navigator.platform),ta=Vo&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ta&&(ta=Number(ta[1])),ta&&ta>=15&&(Vo=!1,Fo=!0);var na=Jo&&(Po||Vo&&(null==ta||12.11>ta)),ra=Do||Ro&&Bo>=9,ia=!1,oa=!1,aa=e.Pos=function(e,t){return this instanceof aa?(this.line=e,void(this.ch=t)):new aa(e,t)},la=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};K.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=la(n.anchor,r.anchor)||0!=la(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new G(P(this.ranges[t].anchor),P(this.ranges[t].head));return new K(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(la(t,r.from())>=0&&la(e,r.to())<=0)return n}return-1}},G.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return U(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var sa,ca,ua,da={left:0,right:0,top:0,bottom:0},fa=0,pa=0,ha=0,ma=null;Ro?ma=-.53:Do?ma=15:Uo?ma=-.7:Ko&&(ma=-1/3);var ga,va=null,ba=e.changeEnd=function(e){return e.text?aa(e.from.line+e.text.length-1,to(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),mn(this),fn(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,wa.hasOwnProperty(e)&&Qt(this,wa[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Jt(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,rn(this)}),removeOverlay:Jt(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void rn(this)}}),indentLine:Jt(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),et(this.doc,e)&&ur(this,e,t,n)}),indentSelection:Jt(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(ur(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&sr(this));else{var o=Math.max(n,i.from().line),a=i.to();n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=o;n>l;++l)ur(this,l,e)}}}),getTokenAt:function(e,t){var n=this.doc;e=Q(n,e);for(var r=kt(this,e.line,t),i=this.doc.mode,o=wi(n,e.line),a=new za(o.text,this.options.tabSize);a.pos<e.ch&&!a.eol();){a.start=a.pos;var l=ti(i,a,r)}return{start:a.start,end:a.pos,string:a.current(),type:l||null,state:r}},getTokenTypeAt:function(e){e=Q(this.doc,e);var t,n=ii(this,wi(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var l=t?t.indexOf("cm-overlay "):-1;return 0>l?t:0==l?null:t.slice(0,l-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!Ta.hasOwnProperty(t))return Ta;var r=Ta[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var o=0;o<r._global.length;o++){var l=r._global[o];l.pred(i,this)&&-1==no(n,l.val)&&n.push(l.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=X(n,null==e?n.first+n.size-1:e),kt(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?Q(this.doc,e):e?r.from():r.to(),Bt(this,n,t||"page")},charCoords:function(e,t){return Rt(this,Q(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Ht(this,e,t||"page"),Ut(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Ht(this,{top:e,left:0},t||"page").top,Si(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=wi(this.doc,e);return Wt(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Ti(i):0)},defaultTextHeight:function(){return Kt(this.display)},defaultCharWidth:function(){return Gt(this.display)},setGutterMarker:Jt(function(e,t,n){return dr(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&so(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Jt(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,on(t,r,"gutter"),so(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:Jt(function(e,t,n){return Yr(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!et(this.doc,e))return null;var t=e;if(e=wi(this.doc,e),!e)return null}else{var t=Ci(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=Bt(this,Q(this.doc,e));var a=e.bottom,l=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var s=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(a=e.bottom),l+t.offsetWidth>c&&(l=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(l=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&or(this,l,a,l+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:Jt(qn),triggerOnKeyPress:Jt(Hn),triggerOnKeyUp:Jt(Wn),execCommand:function(e){return Na.hasOwnProperty(e)?Na[e](this):void 0},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=Q(this.doc,e);t>o&&(a=pr(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:Jt(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?pr(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()},il)}),deleteH:Jt(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):fr(this,function(n){var i=pr(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,l=Q(this.doc,e);t>a;++a){var s=Bt(this,l,"div");if(null==o?o=s.left:s.left=o,l=hr(this,s,i,n),l.hitSide)break}return l},moveV:Jt(function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return 0>e?a.from():a.to();var l=Bt(n,a.head,"div");null!=a.goalColumn&&(l.left=a.goalColumn),i.push(l.left);var s=hr(n,l,e,t);return"page"==t&&a==r.sel.primary()&&lr(n,null,Rt(n,s,"div").top-l.top),s},il),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?bo(this.display.cursorDiv,"CodeMirror-overwrite"):vo(this.display.cursorDiv,"CodeMirror-overwrite"),Qa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return mo()==this.display.input},scrollTo:Jt(function(e,t){(null!=e||null!=t)&&cr(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=el;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Jt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:aa(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)cr(this),this.curOp.scrollToPos=e;else{var n=ar(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Jt(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&jt(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){on(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Qa(r,"refresh",this)}),operation:function(e){return Xt(this,e)},refresh:Jt(function(){var e=this.display.cachedTextHeight;rn(this),this.curOp.forceUpdate=!0,Ot(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-Kt(this.display))>.5)&&a(this),Qa(this,"refresh",this)}),swapDoc:Jt(function(e){var t=this.doc;return t.cm=null,yi(this,e),Ot(this),hn(this),this.scrollTo(e.scrollLeft,e.scrollTop),Vi(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Xi(e);var ya=e.defaults={},wa=e.optionHandlers={},xa=e.Init={toString:function(){return"CodeMirror.Init"}};gr("value","",function(e,t){e.setValue(t)},!0),gr("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),gr("indentUnit",2,n,!0),gr("indentWithTabs",!1),gr("smartIndent",!0),gr("tabSize",4,function(e){r(e),Ot(e),rn(e)},!0),gr("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),gr("specialCharPlaceholder",si,function(e){e.refresh()},!0),gr("electricChars",!0),gr("rtlMoveVisually",!ea),gr("wholeLineUpdateBefore",!0),gr("theme","default",function(e){s(e),c(e)},!0),gr("keyMap","default",l),gr("extraKeys",null),gr("lineWrapping",!1,i,!0),gr("gutters",[],function(e){h(e.options),c(e)},!0),gr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?k(e.display)+"px":"0",e.refresh()},!0),gr("coverGutterNextToScrollbar",!1,v,!0),gr("lineNumbers",!1,function(e){h(e.options),c(e)},!0),gr("firstLineNumber",1,c,!0),gr("lineNumberFormatter",function(e){return e},c,!0),gr("showCursorWhenSelecting",!1,mt,!0),gr("resetSelectionOnContextMenu",!0),gr("readOnly",!1,function(e,t){"nocursor"==t?(Bn(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||hn(e))}),gr("disableInput",!1,function(e,t){t||hn(e)},!0),gr("dragDrop",!0),gr("cursorBlinkRate",530),gr("cursorScrollMargin",0),gr("cursorHeight",1,mt,!0),gr("singleCursorHeightPerLine",!0,mt,!0),gr("workTime",100),gr("workDelay",100),gr("flattenSpans",!0,r,!0),gr("addModeClass",!1,r,!0),gr("pollInterval",100),gr("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),gr("historyEventDelay",1250),gr("viewportMargin",10,function(e){e.refresh()},!0),gr("maxHighlightLength",1e4,r,!0),gr("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),gr("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),gr("autofocus",null);var ka=e.modes={},_a=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}ka[t]=n},e.defineMIME=function(e,t){_a[e]=t},e.resolveMode=function(t){if("string"==typeof t&&_a.hasOwnProperty(t))t=_a[t];else if(t&&"string"==typeof t.name&&_a.hasOwnProperty(t.name)){var n=_a[t.name];"string"==typeof n&&(n={name:n}),t=io(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=ka[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(Ca.hasOwnProperty(n.name)){var o=Ca[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Ca=e.modeExtensions={};e.extendMode=function(e,t){var n=Ca.hasOwnProperty(e)?Ca[e]:Ca[e]={};oo(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){Fa.prototype[e]=t},e.defineOption=gr;var Sa=[];e.defineInitHook=function(e){Sa.push(e)};var Ta=e.helpers={};e.registerHelper=function(t,n,r){Ta.hasOwnProperty(t)||(Ta[t]=e[t]={_global:[]}),Ta[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),Ta[t]._global.push({pred:r,val:i})};var Ma=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},La=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var Na=e.commands={selectAll:function(e){e.setSelection(aa(e.firstLine(),0),aa(e.lastLine()),nl)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),nl)},killLine:function(e){fr(e,function(t){if(t.empty()){var n=wi(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:aa(t.head.line+1,0)}:{from:t.head,to:aa(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){fr(e,function(t){return{from:aa(t.from().line,0),to:Q(e.doc,aa(t.to().line+1,0))}})},delLineLeft:function(e){fr(e,function(e){return{from:aa(e.from().line,0),to:e.from()}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(aa(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(aa(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Io(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){var n=Io(e,t.head.line),r=e.getLineHandle(n.line),i=Mi(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.head.line==n.line&&t.head.ch<=o&&t.head.ch;return aa(n.line,a?0:o)}return n},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Ao(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},il)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},il)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=ol(e.getLine(o.line),o.ch,r);t.push(new Array(r-a%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Xt(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=wi(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new aa(i.line,i.ch-1)),i.ch>0)i=new aa(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),aa(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=wi(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+"\n"+a.charAt(a.length-1),aa(i.line-1,a.length-1),aa(i.line,1),"+transpose")}n.push(new G(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){Xt(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),sr(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},$a=e.keyMap={};$a.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$a.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$a.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},$a.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},$a["default"]=Jo?$a.macDefault:$a.pcDefault;var Ia=e.lookupKey=function(e,t,n){function r(t){t=vr(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0;a<o.length;++a){var l=r(o[a]);if(l)return l}return!1}for(var i=0;i<t.length;++i){var o=r(t[i]);if(o)return"stop"!=o}},Aa=e.isModifierKey=function(e){var t=wl[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Ea=e.keyName=function(e,t){if(Vo&&34==e.keyCode&&e["char"])return!1;var n=wl[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(na?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(na?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)};e.fromTextArea=function(t,n){function r(){t.value=c.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=mo();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Ya(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var l=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=l}}catch(s){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c.save=r,c.getTextArea=function(){return t},c.toTextArea=function(){r(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(Xa(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=a))},c};var za=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};za.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ol(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ol(this.string,null,this.tabSize)-(this.lineStart?ol(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ja=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};Xi(ja),ja.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Zt(e),Yi(this,"clear")){var n=this.find();n&&Vi(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Cr(a.markedSpans,this);e&&!this.collapsed?on(e,Ci(a),"text"):e&&(null!=l.to&&(i=Ci(a)),null!=l.from&&(r=Ci(a))),a.markedSpans=Sr(a.markedSpans,l),null==l.from&&this.collapsed&&!Vr(this.doc,a)&&e&&_i(a,Kt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var s=Br(this.lines[o]),c=f(s);c>e.display.maxLineLength&&(e.display.maxLine=s,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&rn(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ft(e.doc)),e&&Vi(e,"markerCleared",e,this),t&&Yt(e),this.parent&&this.parent.clear()}},ja.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=Cr(o.markedSpans,this);if(null!=a.from&&(n=aa(t?o:Ci(o),a.from),-1==e))return n;if(null!=a.to&&(r=aa(t?o:Ci(o),a.to),1==e))return r}return n&&{from:n,to:r}},ja.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&Xt(n,function(){var r=e.line,i=Ci(e.line),o=$t(n,i);if(o&&(zt(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Vr(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var l=Zr(t)-a;l&&_i(r,r.height+l)}})},ja.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=no(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ja.prototype.detachLine=function(e){if(this.lines.splice(no(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Oa=0,qa=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Xi(qa),qa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Vi(this,"clear")}},qa.prototype.find=function(e,t){return this.primary.find(e,t)};var Da=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};Xi(Da),Da.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Ci(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Zr(this);Xt(e,function(){Gr(e,n,-o),on(e,r,"widget"),_i(n,Math.max(0,n.height-o))})}},Da.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=Zr(this)-e;r&&Xt(t,function(){t.curOp.forceUpdate=!0,Gr(t,n,r),_i(n,n.height+r)})};var Wa=e.Line=function(e,t,n){this.text=e,zr(this,t),this.height=n?n(this):1};Xi(Wa),Wa.prototype.lineNo=function(){return Ci(this)};var Ha={},Ra={};gi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Qr(i),Vi(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},vi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof gi))){var l=[];this.collapse(l),this.children=[new gi(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var a=i.lines.splice(i.lines.length-25,25),l=new gi(a);i.height-=l.height,this.children.splice(r+1,0,l),l.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new vi(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=no(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new vi(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var Ba=0,Fa=e.Doc=function(e,t,n){if(!(this instanceof Fa))return new Fa(e,t,n);null==n&&(n=0),vi.call(this,[new gi([new Wa("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=aa(n,0);this.sel=Y(r),this.history=new Li(null),this.id=++Ba,this.modeOption=t,"string"==typeof e&&(e=vl(e)),mi(this,{from:r,to:r,text:e}),ct(this,Y(r),nl)};Fa.prototype=io(vi.prototype,{constructor:Fa,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ki(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")
},setValue:en(function(e){var t=aa(this.first,0),n=this.first+this.size-1;Yn(this,{from:t,to:aa(n,wi(this,n).text.length),text:vl(e),origin:"setValue"},!0),ct(this,Y(t))}),replaceRange:function(e,t,n,r){t=Q(this,t),n=n?Q(this,n):t,nr(this,e,t,n,r)},getRange:function(e,t,n){var r=xi(this,Q(this,e),Q(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return et(this,e)?wi(this,e):void 0},getLineNumber:function(e){return Ci(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=wi(this,e)),Br(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Q(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:en(function(e,t,n){at(this,Q(this,"number"==typeof e?aa(e,t||0):e),null,n)}),setSelection:en(function(e,t,n){at(this,Q(this,e),Q(this,t||e),n)}),extendSelection:en(function(e,t,n){rt(this,Q(this,e),t&&Q(this,t),n)}),extendSelections:en(function(e,t){it(this,tt(this,e,t))}),extendSelectionsBy:en(function(e,t){it(this,ro(this.sel.ranges,e),t)}),setSelections:en(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new G(Q(this,e[r].anchor),Q(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ct(this,Z(i,t),n)}}),addSelection:en(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new G(Q(this,e),Q(this,t||e))),ct(this,Z(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=xi(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=xi(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:en(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:vl(e[o]),origin:n}}for(var l=t&&"end"!=t&&Gn(this,r,t),o=r.length-1;o>=0;o--)Yn(this,r[o]);l?st(this,l):this.cm&&sr(this.cm)}),undo:en(function(){Qn(this,"undo")}),redo:en(function(){Qn(this,"redo")}),undoSelection:en(function(){Qn(this,"undo",!0)}),redoSelection:en(function(){Qn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Li(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wi(this.history.done),undone:Wi(this.history.undone)}},setHistory:function(e){var t=this.history=new Li(this.history.maxGeneration);t.done=Wi(e.done.slice(0),null,!0),t.undone=Wi(e.undone.slice(0),null,!0)},addLineClass:en(function(e,t,n){return dr(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:en(function(e,t,n){return dr(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),markText:function(e,t,n){return br(this,Q(this,e),Q(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Q(this,e),br(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Q(this,e);var t=[],n=wi(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Q(this,e),t=Q(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var l=0;l<a.length;l++){var s=a[l];i==e.line&&e.ch>s.to||null==s.from&&i!=e.line||i==t.line&&s.from>t.ch||n&&!n(s.marker)||r.push(s.marker.parent||s.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),Q(this,aa(n,t))},indexFromPos:function(e){e=Q(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Fa(ki(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Fa(ki(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],xr(r,wr(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),kr(wr(this));break}}if(t.history==this.history){var i=[t.id];bi(t,function(e){i.push(e.id)},!0),t.history=new Li(null),t.history.done=Wi(this.history.done,i),t.history.undone=Wi(this.history.undone,i)}},iterLinkedDocs:function(e){bi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Fa.prototype.eachLine=Fa.prototype.iter;var Pa="iter insert remove copy getEditor".split(" ");for(var Ua in Fa.prototype)Fa.prototype.hasOwnProperty(Ua)&&no(Pa,Ua)<0&&(e.prototype[Ua]=function(e){return function(){return e.apply(this.doc,arguments)}}(Fa.prototype[Ua]));Xi(Fa);var Va,Ka=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Ga=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Za=e.e_stop=function(e){Ka(e),Ga(e)},Ya=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},Xa=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},Qa=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Ja=0,el=30,tl=e.Pass={toString:function(){return"CodeMirror.Pass"}},nl={scroll:!1},rl={origin:"*mouse"},il={origin:"+move"};Qi.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ol=e.countColumn=function(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=r||0,a=i||0;;){var l=e.indexOf("	",o);if(0>l||l>=t)return a+(t-o);a+=l-o,a+=n-a%n,o=l+1}},al=[""],ll=function(e){e.select()};Xo?ll=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Ro&&(ll=function(e){try{e.select()}catch(t){}}),[].indexOf&&(no=function(e,t){return e.indexOf(t)}),[].map&&(ro=function(e,t){return e.map(t)});var sl,cl=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ul=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||cl.test(e))},dl=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;sl=document.createRange?function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},Ro&&11>Bo&&(mo=function(){try{return document.activeElement}catch(e){return document.body}});var fl,pl,hl,ml=!1,gl=function(){if(Ro&&9>Bo)return!1;var e=uo("div");return"draggable"in e||"dragDrop"in e}(),vl=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},bl=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},yl=function(){var e=uo("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),wl={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=wl,function(){for(var e=0;10>e;e++)wl[e+48]=wl[e+96]=String(e);for(var e=65;90>=e;e++)wl[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)wl[e+111]=wl[e+63235]="F"+e}();var xl,kl=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,l=/[Lb1n]/,s=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r,u=n.length,d=[],f=0;u>f;++f)d.push(r=e(n.charCodeAt(f)));for(var f=0,p=c;u>f;++f){var r=d[f];"m"==r?d[f]=p:p=r}for(var f=0,h=c;u>f;++f){var r=d[f];"1"==r&&"r"==h?d[f]="n":a.test(r)&&(h=r,"r"==r&&(d[f]="R"))}for(var f=1,p=d[0];u-1>f;++f){var r=d[f];"+"==r&&"1"==p&&"1"==d[f+1]?d[f]="1":","!=r||p!=d[f+1]||"1"!=p&&"n"!=p||(d[f]=p),p=r}for(var f=0;u>f;++f){var r=d[f];if(","==r)d[f]="N";else if("%"==r){for(var m=f+1;u>m&&"%"==d[m];++m);for(var g=f&&"!"==d[f-1]||u>m&&"1"==d[m]?"1":"N",v=f;m>v;++v)d[v]=g;f=m-1}}for(var f=0,h=c;u>f;++f){var r=d[f];"L"==h&&"1"==r?d[f]="L":a.test(r)&&(h=r)}for(var f=0;u>f;++f)if(o.test(d[f])){for(var m=f+1;u>m&&o.test(d[m]);++m);for(var b="L"==(f?d[f-1]:c),y="L"==(u>m?d[m]:c),g=b||y?"L":"R",v=f;m>v;++v)d[v]=g;f=m-1}for(var w,x=[],f=0;u>f;)if(l.test(d[f])){var k=f;for(++f;u>f&&l.test(d[f]);++f);x.push(new t(0,k,f))}else{var _=f,C=x.length;for(++f;u>f&&"L"!=d[f];++f);for(var v=_;f>v;)if(s.test(d[v])){v>_&&x.splice(C,0,new t(1,_,v));var S=v;for(++v;f>v&&s.test(d[v]);++v);x.splice(C,0,new t(2,S,v)),_=v}else++v;f>_&&x.splice(C,0,new t(1,_,f))}return 1==x[0].level&&(w=n.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==to(x).level&&(w=n.match(/\s+$/))&&(to(x).to-=w[0].length,x.push(new t(0,u-w[0].length,u))),x[0].level!=to(x).level&&x.push(new t(x[0].level,u,u)),x}}();return e.version="4.3.0",e}),define("codemirror",["codemirror/lib/codemirror"],function(e){return e}),define("autoSave",["jquery"],function(e){"use strict";var t,n,r,i;return n=void 0,i=void 0,r=void 0,t=function(){},t.prototype.bind=function(t,i){var o,a,l,s;o=e("#editorStatus"),n=t,this.form=i,r=this,e("[name=title]").on("input",function(){""!==e.trim(e(this).val())&&r.change(),window.localStorage&&localStorage.setItem("autoSaveTitle_"+location.pathname+location.search,e(this).val())}),a=e("#license"),a.length&&a.on("change",function(){return r.change()}),s=e(".reasons"),s.length&&s.on("click",function(){return r.change()}),l=e("input[name=noticeAnswerers]"),l.length&&l.on("change",function(){return r.change()}),n.change?n.change(function(){""!==e.trim(n.getVal())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getVal())}):n.on("change",function(){""!==e.trim(n.getValue())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getValue())}),e("#dropIt").click(function(){e.post("/api/draft/"+e("#draftId").val()+"/delete",function(t){0===t.status?(o.html("已舍弃"),e("#draftId").val(""),window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname)):o.html("舍弃失败"),e("#dropIt").addClass("hidden")})})},t.prototype.change=function(){var t;t=e("#editorStatus"),t.html("保存中...").removeClass("hidden"),e("#dropIt").addClass("hidden"),clearTimeout(i),i=setTimeout(function(){r.save()},4e3)},t.prototype.save=function(){var t,n,r;t=e("#editorStatus"),n=this,e("#publishIt").attr("disabled","disabled"),r=new n.form,e.post("/api/"+r.type+"/draft/save",r,function(n){e("#publishIt").removeAttr("disabled"),0===n.status?(t.html("已保存草稿"),e("#dropIt").data("id",n.data).removeClass("hidden"),e("#draftId").val(n.data),window.localStorage&&(window.localStorage.removeItem("autoSaveContent_"+location.pathname+location.search),window.localStorage.removeItem("autoSaveTitle_"+location.pathname+location.search))):t.html("保存失败")})},new t}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/python/python",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e){return e.scopes[e.scopes.length-1]}var r=t(["and","or","not","is","in"]),i=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],o=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],a={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},l={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};e.registerHelper("hintWords","python",i.concat(o)),e.defineMode("python",function(s,c){function u(e,t){if(e.sol()&&"py"==n(t).type){var r=n(t).offset;if(e.eatSpace()){var i=e.indentation();return i>r?p(e,t,"py"):r>i&&h(e,t)&&(t.errorToken=!0),null}var o=d(e,t);return r>0&&h(e,t)&&(o+=" "+g),o}return d(e,t)}function d(e,t){if(e.eatSpace())return null;var n=e.peek();if("#"==n)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var i=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),e.match(/^\d+\.\d*/)&&(i=!0),e.match(/^\.\d+/)&&(i=!0),i)return e.eat(/J/i),"number";var o=!1;if(e.match(/^0x[0-9a-f]+/i)&&(o=!0),e.match(/^0b[01]+/i)&&(o=!0),e.match(/^0o[0-7]+/i)&&(o=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),o=!0),e.match(/^0(?![\dx])/i)&&(o=!0),o)return e.eat(/L/i),"number"}return e.match(T)?(t.tokenize=f(e.current()),t.tokenize(e,t)):e.match(x)||e.match(w)?null:e.match(y)||e.match(v)||e.match(r)?"operator":e.match(b)?null:e.match(M)?"keyword":e.match(L)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(k)?"def"==t.lastToken||"class"==t.lastToken?"def":"variable":(e.next(),g)}function f(e){function t(t,i){for(;!t.eol();)if(t.eatWhile(/[^'"\\]/),t.eat("\\")){if(t.next(),n&&t.eol())return r}else{if(t.match(e))return i.tokenize=u,r;t.eat(/['"]/)}if(n){if(c.singleLineStringErrors)return g;i.tokenize=u}return r}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n=1==e.length,r="string";return t.isString=!0,t}function p(e,t,r){var i=0,o=null;if("py"==r)for(;"py"!=n(t).type;)t.scopes.pop();i=n(t).offset+("py"==r?s.indentUnit:_),"py"==r||e.match(/^(\s|#.*)*$/,!1)||(o=e.column()+1),t.scopes.push({offset:i,type:r,align:o})}function h(e,t){for(var r=e.indentation();n(t).offset>r;){if("py"!=n(t).type)return!0;t.scopes.pop()}return n(t).offset!=r}function m(e,t){var r=t.tokenize(e,t),i=e.current();if("."==i)return r=e.match(k,!1)?null:g,null==r&&"meta"==t.lastStyle&&(r="meta"),r;if("@"==i)return e.match(k,!1)?"meta":g;"variable"!=r&&"builtin"!=r||"meta"!=t.lastStyle||(r="meta"),("pass"==i||"return"==i)&&(t.dedent+=1),"lambda"==i&&(t.lambda=!0),":"!=i||t.lambda||"py"!=n(t).type||p(e,t,"py");var o=1==i.length?"[({".indexOf(i):-1;if(-1!=o&&p(e,t,"])}".slice(o,o+1)),o="])}".indexOf(i),-1!=o){if(n(t).type!=i)return g;t.scopes.pop()}return t.dedent>0&&e.eol()&&"py"==n(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),r}var g="error",v=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),b=c.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),y=c.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),w=c.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),x=c.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),k=c.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),_=c.hangingIndent||s.indentUnit,C=i,S=o;if(void 0!=c.extra_keywords&&(C=C.concat(c.extra_keywords)),void 0!=c.extra_builtins&&(S=S.concat(c.extra_builtins)),c.version&&3==parseInt(c.version,10)){C=C.concat(l.keywords),S=S.concat(l.builtins);var T=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{C=C.concat(a.keywords),S=S.concat(a.builtins);var T=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var M=t(C),L=t(S),N={startState:function(e){return{tokenize:u,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=!1);var r=m(e,t);t.lastStyle=r;var i=e.current();return i&&r&&(t.lastToken=i),e.eol()&&t.lambda&&(t.lambda=!1),n?r+" "+g:r},indent:function(t,r){if(t.tokenize!=u)return t.tokenize.isString?e.Pass:0;var i=n(t),o=r&&r.charAt(0)==i.type;return null!=i.align?i.align-(o?1:0):o&&t.scopes.length>1?t.scopes[t.scopes.length-2].offset:i.offset},lineComment:"#",fold:"indent"};return N}),e.defineMIME("text/x-python","python");var s=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:s("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/ruby/ruby",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("ruby",function(e){function t(e){for(var t={},n=0,r=e.length;r>n;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function r(e,t){if(c=null,e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(s),"comment";if(e.eatSpace())return null;var r,i=e.next();if("`"==i||"'"==i||'"'==i)return n(a(i,"string",'"'==i||"`"==i),e,t);if("/"!=i||e.eol()||" "==e.peek()){if("%"==i){var o="string",u=!0;e.eat("s")?o="atom":e.eat(/[WQ]/)?o="string":e.eat(/[r]/)?o="string-2":e.eat(/[wxq]/)&&(o="string",u=!1);var d=e.eat(/[^\w\s]/);return d?(p.propertyIsEnumerable(d)&&(d=p[d]),n(a(d,o,u,!0),e,t)):"operator"}if("#"==i)return e.skipToEnd(),"comment";if("<"==i&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(l(r[1]),e,t);if("0"==i)return e.eatWhile(e.eat("x")?/[\da-fA-F]/:e.eat("b")?/[01]/:/[0-7]/),"number";if(/\d/.test(i))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return":"==i?e.eat("'")?n(a("'","atom",!1),e,t):e.eat('"')?n(a('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_]/)?(e.eatWhile(/[\w]/),e.eat(/[\?\!\=]/),"atom"):"operator":"@"==i&&e.match(/^@?[a-zA-Z_]/)?(e.eat("@"),e.eatWhile(/[\w]/),"variable-2"):"$"==i?(e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3"):/[a-zA-Z_]/.test(i)?(e.eatWhile(/[\w]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident"):"|"!=i||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok?/[\(\)\[\]{}\\;]/.test(i)?(c=i,null):"-"==i&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(i)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(c="|",null)}return e.eat("=")?"operator":n(a(i,"string-2",!0),e,t)}function i(){var e=1;return function(t,n){if("}"==t.peek()){if(e--,0==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else"{"==t.peek()&&e++;return r(t,n)}}function o(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,r(t,n))}}function a(e,t,n,r){return function(a,l){var s,c=!1;for("read-quoted-paused"===l.context.type&&(l.context=l.context.prev,a.eat("}"));null!=(s=a.next());){if(s==e&&(r||!c)){l.tokenize.pop();break}if(n&&"#"==s&&!c){if(a.eat("{")){"}"==e&&(l.context={prev:l.context,type:"read-quoted-paused"}),l.tokenize.push(i());break}if(/[@\$]/.test(a.peek())){l.tokenize.push(o());break}}c=!c&&"\\"==s}return t}}function l(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function s(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var c,u=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),d=t(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),f=t(["end","until"]),p={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var n,r=t.tokenize[t.tokenize.length-1](e,t);if("ident"==r){var i=e.current();r=u.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(i)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable",d.propertyIsEnumerable(i)?n="indent":f.propertyIsEnumerable(i)?n="dedent":"if"!=i&&"unless"!=i||e.column()!=e.indentation()?"do"==i&&t.context.indented<t.indented&&(n="indent"):n="indent"}return(c||r&&"comment"!=r)&&(t.lastTok=i||c||r),"|"==c&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(c)?t.context={prev:t.context,type:c||r,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(c))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==c||"operator"==r),r},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),o=t.context,a=o.type==p[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return o.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/xml/xml",["codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function r(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(l(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta"):(_=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket");if("&"==r){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=r,_=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return _="equals",null;if("<"==n){t.tokenize=r,t.state=d,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=o(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}function a(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=r;break}n.next()}return e}}function l(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=l(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=r;break}return n.tokenize=l(e-1),n.tokenize(t,n)}}return"meta"}}function s(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(S.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!S.contextGrabbers.hasOwnProperty(n)||!S.contextGrabbers[n].hasOwnProperty(t))return;c(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),f):"closeTag"==e?p:d}function f(e,t,n){return"word"==e?(n.tagName=t.current(),C="tag",g):(C="error",f)}function p(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&S.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==r?(C="tag",h):(C="tag error",m)}return C="error",m}function h(e,t,n){return"endTag"!=e?(C="error",h):(c(n),d)}function m(e,t,n){return C="error",h(e,t,n)}function g(e,t,n){if("word"==e)return C="attribute",v;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||S.autoSelfClosers.hasOwnProperty(r)?u(n,r):(u(n,r),n.context=new s(n,r,i==n.indented)),d}return C="error",g}function v(e,t,n){return"equals"==e?b:(S.allowMissing||(C="error"),g(e,t,n))}function b(e,t,n){return"string"==e?y:"word"==e&&S.allowUnquoted?(C="string",g):(C="error",g(e,t,n))}function y(e,t,n){return"string"==e?y:g(e,t,n)}var w=t.indentUnit,x=n.multilineTagIndentFactor||1,k=n.multilineTagIndentPastTag;null==k&&(k=!0);var _,C,S=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=n.alignCDATA;return{startState:function(){return{tokenize:r,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;_=null;var n=t.tokenize(e,t);return(n||_)&&"comment"!=n&&(C=null,t.state=t.state(_||n,e,t),C&&(n="error"==C?n+" error":C)),n},indent:function(t,n,o){var a=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+w;if(a&&a.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=r)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return k?t.tagStart+t.tagName.length+2:t.tagStart+w*x;if(T&&/<!\[CDATA\[/.test(n))return 0;var l=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(l&&l[1])for(;a;){if(a.tagName==l[2]){a=a.prev;break}if(!S.implicitlyClosed.hasOwnProperty(a.tagName))break;a=a.prev}else if(l)for(;a;){var s=S.contextGrabbers[a.tagName];
if(!s||!s.hasOwnProperty(l[2]))break;a=a.prev}for(;a&&!a.startOfLine;)a=a.prev;return a?a.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function r(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function i(e,t,n){return ht=e,mt=n,t}function o(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=a(n),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==n&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&e.eat(">"))return i("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==n)return e.eat("*")?(t.tokenize=l,l(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(r(e),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(kt),i("operator","operator",e.current()));if("`"==n)return t.tokenize=s,s(e,t);if("#"==n)return e.skipToEnd(),i("error","error");if(kt.test(n))return e.eatWhile(kt),i("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var o=e.current(),c=xt.propertyIsEnumerable(o)&&xt[o];return c&&"."!=t.lastType?i(c.type,c.style,o):i("variable","variable",o)}function a(e){return function(t,n){var r,a=!1;if(bt&&"@"==t.peek()&&t.match(_t))return n.tokenize=o,i("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||a);)a=!a&&"\\"==r;return a||(n.tokenize=o),i("string","string")}}function l(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function s(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=o;break}r=!r&&"\\"==n}return i("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(0>n)){for(var r=0,i=!1,o=n-1;o>=0;--o){var a=e.string.charAt(o),l=Ct.indexOf(a);if(l>=0&&3>l){if(!r){++o;break}if(0==--r)break}else if(l>=3&&6>l)++r;else if(/[$\w]/.test(a))i=!0;else if(i&&!r){++o;break}}i&&!r&&(t.fatArrowAt=o)}}function u(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function f(e,t,n,r,i){var o=e.cc;for(Tt.state=e,Tt.stream=i,Tt.marked=null,Tt.cc=o,Tt.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():yt?k:x;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Tt.marked?Tt.marked:"variable"==n&&d(e,r)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Tt.cc.push(arguments[e])}function h(){return p.apply(null,arguments),!0}function m(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=Tt.state;if(r.context){if(Tt.marked="def",t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function g(){Tt.state.context={prev:Tt.state.context,vars:Tt.state.localVars},Tt.state.localVars=Mt}function v(){Tt.state.localVars=Tt.state.context.vars,Tt.state.context=Tt.state.context.prev}function b(e,t){var n=function(){var n=Tt.state,r=n.indented;"stat"==n.lexical.type&&(r=n.lexical.indented),n.lexical=new u(r,Tt.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function y(){var e=Tt.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(n){return n==e?h():";"==e?p():h(t)}return t}function x(e,t){return"var"==e?h(b("vardef",t.length),F,w(";"),y):"keyword a"==e?h(b("form"),k,x,y):"keyword b"==e?h(b("form"),x,y):"{"==e?h(b("}"),H,y):";"==e?h():"if"==e?("else"==Tt.state.lexical.info&&Tt.state.cc[Tt.state.cc.length-1]==y&&Tt.state.cc.pop()(),h(b("form"),k,x,y,G)):"function"==e?h(et):"for"==e?h(b("form"),Z,x,y):"variable"==e?h(b("stat"),E):"switch"==e?h(b("form"),k,b("}","switch"),w("{"),H,y,y):"case"==e?h(k,w(":")):"default"==e?h(w(":")):"catch"==e?h(b("form"),g,w("("),tt,w(")"),x,y,v):"module"==e?h(b("form"),g,at,v,y):"class"==e?h(b("form"),nt,y):"export"==e?h(b("form"),lt,y):"import"==e?h(b("form"),st,y):p(b("stat"),k,w(";"),y)}function k(e){return C(e,!1)}function _(e){return C(e,!0)}function C(e,t){if(Tt.state.fatArrowAt==Tt.stream.start){var n=t?A:I;if("("==e)return h(g,b(")"),D(P,")"),y,w("=>"),n,v);if("variable"==e)return p(g,P,w("=>"),n,v)}var r=t?L:M;return St.hasOwnProperty(e)?h(r):"function"==e?h(et,r):"keyword c"==e?h(t?T:S):"("==e?h(b(")"),S,pt,w(")"),y,r):"operator"==e||"spread"==e?h(t?_:k):"["==e?h(b("]"),dt,y,r):"{"==e?W(j,"}",null,r):"quasi"==e?p(N,r):h()}function S(e){return e.match(/[;\}\)\],]/)?p():p(k)}function T(e){return e.match(/[;\}\)\],]/)?p():p(_)}function M(e,t){return","==e?h(k):L(e,t,!1)}function L(e,t,n){var r=0==n?M:L,i=0==n?k:_;return"=>"==t?h(g,n?A:I,v):"operator"==e?/\+\+|--/.test(t)?h(r):"?"==t?h(k,w(":"),i):h(i):"quasi"==e?p(N,r):";"!=e?"("==e?W(_,")","call",r):"."==e?h(z,r):"["==e?h(b("]"),S,w("]"),y,r):void 0:void 0}function N(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?h(N):h(k,$)}function $(e){return"}"==e?(Tt.marked="string-2",Tt.state.tokenize=s,h(N)):void 0}function I(e){return c(Tt.stream,Tt.state),p("{"==e?x:k)}function A(e){return c(Tt.stream,Tt.state),p("{"==e?x:_)}function E(e){return":"==e?h(y,x):p(M,w(";"),y)}function z(e){return"variable"==e?(Tt.marked="property",h()):void 0}function j(e,t){return"variable"==e||"keyword"==Tt.style?(Tt.marked="property",h("get"==t||"set"==t?O:q)):"number"==e||"string"==e?(Tt.marked=bt?"property":Tt.style+" property",h(q)):"jsonld-keyword"==e?h(q):"["==e?h(k,w("]"),q):void 0}function O(e){return"variable"!=e?p(q):(Tt.marked="property",h(et))}function q(e){return":"==e?h(_):"("==e?p(et):void 0}function D(e,t){function n(r){if(","==r){var i=Tt.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),h(e,n)}return r==t?h():h(w(t))}return function(r){return r==t?h():p(e,n)}}function W(e,t,n){for(var r=3;r<arguments.length;r++)Tt.cc.push(arguments[r]);return h(b(t,n),D(e,t),y)}function H(e){return"}"==e?h():p(x,H)}function R(e){return wt&&":"==e?h(B):void 0}function B(e){return"variable"==e?(Tt.marked="variable-3",h()):void 0}function F(){return p(P,R,V,K)}function P(e,t){return"variable"==e?(m(t),h()):"["==e?W(P,"]"):"{"==e?W(U,"}"):void 0}function U(e,t){return"variable"!=e||Tt.stream.match(/^\s*:/,!1)?("variable"==e&&(Tt.marked="property"),h(w(":"),P,V)):(m(t),h(V))}function V(e,t){return"="==t?h(_):void 0}function K(e){return","==e?h(F):void 0}function G(e,t){return"keyword b"==e&&"else"==t?h(b("form","else"),x,y):void 0}function Z(e){return"("==e?h(b(")"),Y,w(")"),y):void 0}function Y(e){return"var"==e?h(F,w(";"),Q):";"==e?h(Q):"variable"==e?h(X):p(k,w(";"),Q)}function X(e,t){return"in"==t||"of"==t?(Tt.marked="keyword",h(k)):h(M,Q)}function Q(e,t){return";"==e?h(J):"in"==t||"of"==t?(Tt.marked="keyword",h(k)):p(k,w(";"),J)}function J(e){")"!=e&&h(k)}function et(e,t){return"*"==t?(Tt.marked="keyword",h(et)):"variable"==e?(m(t),h(et)):"("==e?h(g,b(")"),D(tt,")"),y,x,v):void 0}function tt(e){return"spread"==e?h(tt):p(P,R)}function nt(e,t){return"variable"==e?(m(t),h(rt)):void 0}function rt(e,t){return"extends"==t?h(k,rt):"{"==e?h(b("}"),it,y):void 0}function it(e,t){return"variable"==e||"keyword"==Tt.style?(Tt.marked="property","get"==t||"set"==t?h(ot,et,it):h(et,it)):"*"==t?(Tt.marked="keyword",h(it)):";"==e?h(it):"}"==e?h():void 0}function ot(e){return"variable"!=e?p():(Tt.marked="property",h())}function at(e,t){return"string"==e?h(x):"variable"==e?(m(t),h(ut)):void 0}function lt(e,t){return"*"==t?(Tt.marked="keyword",h(ut,w(";"))):"default"==t?(Tt.marked="keyword",h(k,w(";"))):p(x)}function st(e){return"string"==e?h():p(ct,ut)}function ct(e,t){return"{"==e?W(ct,"}"):("variable"==e&&m(t),h())}function ut(e,t){return"from"==t?(Tt.marked="keyword",h(k)):void 0}function dt(e){return"]"==e?h():p(_,ft)}function ft(e){return"for"==e?p(pt,w("]")):","==e?h(D(_,"]")):p(D(_,"]"))}function pt(e){return"for"==e?h(Z,pt):"if"==e?h(k,pt):void 0}var ht,mt,gt=t.indentUnit,vt=n.statementIndent,bt=n.jsonld,yt=n.json||bt,wt=n.typescript,xt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},a={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":r,"export":e("export"),"import":e("import"),"extends":r};if(wt){var l={type:"variable",style:"variable-3"},s={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:l,number:l,bool:l,any:l};for(var c in s)a[c]=s[c]}return a}(),kt=/[+\-*&%=<>!?|~^]/,_t=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ct="([{}])",St={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Tt={state:null,column:null,marked:null,cc:null},Mt={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new u((e||0)-gt,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=l&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==ht?n:(t.lastType="operator"!=ht||"++"!=mt&&"--"!=mt?ht:"incdec",f(t,n,ht,mt,e))},indent:function(t,r){if(t.tokenize==l)return e.Pass;if(t.tokenize!=o)return 0;var i=r&&r.charAt(0),a=t.lexical;if(!/^\s*else\b/.test(r))for(var s=t.cc.length-1;s>=0;--s){var c=t.cc[s];if(c==y)a=a.prev;else if(c!=G)break}"stat"==a.type&&"}"==i&&(a=a.prev),vt&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,d=i==u;return"vardef"==u?a.indented+("operator"==t.lastType||","==t.lastType?a.info+1:0):"form"==u&&"{"==i?a.indented:"form"==u?a.indented+gt:"stat"==u?a.indented+("operator"==t.lastType||","==t.lastType?vt||gt:0):"switch"!=a.info||d||0==n.doubleIndentSwitch?a.align?a.column+(d?0:1):a.indented+(d?0:gt):a.indented+(/^(?:case|default)\b/.test(r)?gt:2*gt)},electricChars:":{}",blockCommentStart:yt?null:"/*",blockCommentEnd:yt?null:"*/",lineComment:yt?null:"//",fold:"brace",helperType:yt?"json":"javascript",jsonldMode:bt,jsonMode:yt}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function n(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}function r(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,n){function r(e,t){return p=t,e}function i(e,t){var n=e.next();if(g[n]){var i=g[n](e,t);if(i!==!1)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),r("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?r(null,"compare"):'"'==n||"'"==n?(t.tokenize=o(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),r("atom","hash")):"!"==n?(e.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),r("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?r(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?r("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?r(null,n):"u"==n&&e.match("rl(")?(e.backUp(1),t.tokenize=a,r("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),r("property","word")):r(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),r("number","unit")):e.match(/^\w+-/)?r("meta","meta"):void 0}function o(e){return function(t,n){for(var i,o=!1;null!=(i=t.next());){if(i==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==i}return(i==e||!o&&")"!=e)&&(n.tokenize=null),r("string","string")}}function a(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:o(")"),r(null,"(")}function l(e,t,n){this.type=e,this.indent=t,this.prev=n}function s(e,t,n){return e.context=new l(n,t.indentation()+m,e.context),n}function c(e){return e.context=e.context.prev,e.context.type}function u(e,t,n){return S[n.context.type](e,t,n)}function d(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return u(e,t,n)}function f(e){var t=e.current().toLowerCase();h=k.hasOwnProperty(t)?"atom":x.hasOwnProperty(t)?"keyword":"variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var p,h,m=t.indentUnit,g=n.tokenHooks,v=n.mediaTypes||{},b=n.mediaFeatures||{},y=n.propertyKeywords||{},w=n.nonStandardPropertyKeywords||{},x=n.colorKeywords||{},k=n.valueKeywords||{},_=n.fontProperties||{},C=n.allowNested,S={};return S.top=function(e,t,n){if("{"==e)return s(n,t,"block");if("}"==e&&n.context.prev)return c(n);if("@media"==e)return s(n,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return s(n,t,"at");if("hash"==e)h="builtin";else if("word"==e)h="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return s(n,t,"interpolation");if(":"==e)return"pseudo";if(C&&"("==e)return s(n,t,"parens")}return n.context.type},S.block=function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return y.hasOwnProperty(r)?(h="property","maybeprop"):w.hasOwnProperty(r)?(h="string-2","maybeprop"):C?(h=t.match(/^\s*:/,!1)?"property":"tag","block"):(h+=" error","maybeprop")}return"meta"==e?"block":C||"hash"!=e&&"qualifier"!=e?S.top(e,t,n):(h="error","block")},S.maybeprop=function(e,t,n){return":"==e?s(n,t,"prop"):u(e,t,n)},S.prop=function(e,t,n){if(";"==e)return c(n);if("{"==e&&C)return s(n,t,"propBlock");if("}"==e||"{"==e)return d(e,t,n);if("("==e)return s(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)f(t);else if("interpolation"==e)return s(n,t,"interpolation")}else h+=" error";return"prop"},S.propBlock=function(e,t,n){return"}"==e?c(n):"word"==e?(h="property","maybeprop"):n.context.type},S.parens=function(e,t,n){return"{"==e||"}"==e?d(e,t,n):")"==e?c(n):"("==e?s(n,t,"parens"):("word"==e&&f(t),"parens")},S.pseudo=function(e,t,n){return"word"==e?(h="variable-3",n.context.type):u(e,t,n)},S.media=function(e,t,n){if("("==e)return s(n,t,"media_parens");if("}"==e)return d(e,t,n);if("{"==e)return c(n)&&s(n,t,C?"block":"top");if("word"==e){var r=t.current().toLowerCase();h="only"==r||"not"==r||"and"==r?"keyword":v.hasOwnProperty(r)?"attribute":b.hasOwnProperty(r)?"property":"error"}return n.context.type},S.media_parens=function(e,t,n){return")"==e?c(n):"{"==e||"}"==e?d(e,t,n,2):S.media(e,t,n)},S.font_face_before=function(e,t,n){return"{"==e?s(n,t,"font_face"):u(e,t,n)},S.font_face=function(e,t,n){return"}"==e?c(n):"word"==e?(h=_.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(e,t,n){return"word"==e?(h="variable","keyframes"):"{"==e?s(n,t,"top"):u(e,t,n)},S.at=function(e,t,n){return";"==e?c(n):"{"==e||"}"==e?d(e,t,n):("word"==e?h="tag":"hash"==e&&(h="builtin"),"at")},S.interpolation=function(e,t,n){return"}"==e?c(n):"{"==e||";"==e?d(e,t,n):("variable"!=e&&(h="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new l("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||i)(e,t);return n&&"object"==typeof n&&(p=n[1],n=n[0]),h=n,t.state=S[t.state](p,e,t),h},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),!n.prev||("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"font_face"!=n.type)&&(")"!=r||"parens"!=n.type&&"media_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"media"!=n.type)||(i=n.indent-m,n=n.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],l=t(a),s=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=t(s),u=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=t(u),d=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],f=t(d),p=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],h=t(p),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],g=t(m),v=i.concat(a).concat(s).concat(u).concat(d).concat(p);e.registerHelper("hintWords","css",v),e.defineMIME("text/css",{mediaTypes:o,mediaFeatures:l,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:h,fontProperties:g,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=r,r(e,t)):!1
},"/":function(e,t){return e.eat("*")?(t.tokenize=n,n(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:l,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:h,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:l,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:h,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("htmlmixed",function(t,n){function r(e,t){var n=t.htmlState.tagName,r=l.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(r)&&">"==e.current()){var i=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);i=i?i[1]:"",i&&/[\"\']/.test(i.charAt(0))&&(i=i.slice(1,i.length-1));for(var u=0;u<c.length;++u){var d=c[u];if("string"==typeof d.matches?i==d.matches:d.matches.test(i)){d.mode&&(t.token=o,t.localMode=d.mode,t.localState=d.mode.startState&&d.mode.startState(l.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(r)&&">"==e.current()&&(t.token=a,t.localMode=s,t.localState=s.startState(l.indent(t.htmlState,"")));return r}function i(e,t,n){var r,i=e.current(),o=i.search(t);return o>-1?e.backUp(i.length-o):(r=i.match(/<\/?$/))&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function a(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*style\s*>/,s.token(e,t.localState))}var l=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),s=e.getMode(t,"css"),c=[],u=n&&n.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),u)for(var d=0;d<u.length;++d){var f=u[d];c.push({matches:f.matches,mode:f.mode&&e.getMode(t,f.mode)})}return c.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=l.startState();return{token:r,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var n=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:n,htmlState:e.copyState(l,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?l.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||l}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/clike/clike",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}if(e.next(),e.eol()){t.tokenize=n;break}}return"meta"}function r(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=o,o(e,t)):!1}return e.match(/(u8|u|U|L)/)?e.match(/["']/,!1)?"string":!1:(e.next(),!1)}function i(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function o(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=e.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:e.skipToEnd(),"string"}function a(t,n){function r(e){if(e)for(var t in e)e.hasOwnProperty(t)&&i.push(t)}"string"==typeof t&&(t=[t]);var i=[];r(n.keywords),r(n.builtin),r(n.atoms),i.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],i));for(var o=0;o<t.length;++o)e.defineMIME(t[o],n)}e.defineMode("clike",function(t,n){function r(e,t){var n=e.next();if(v[n]){var r=v[n](e,t);if(r!==!1)return r}if('"'==n||"'"==n)return t.tokenize=i(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return c=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if("/"==n){if(e.eat("*"))return t.tokenize=o,o(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(y.test(n))return e.eatWhile(y),"operator";e.eatWhile(/[\w\$_]/);var a=e.current();return p.propertyIsEnumerable(a)?(m.propertyIsEnumerable(a)&&(c="newstatement"),"keyword"):h.propertyIsEnumerable(a)?(m.propertyIsEnumerable(a)&&(c="newstatement"),"builtin"):g.propertyIsEnumerable(a)?"atom":"variable"}function i(e){return function(t,n){for(var r,i=!1,o=!1;null!=(r=t.next());){if(r==e&&!i){o=!0;break}i=!i&&"\\"==r}return(o||!i&&!b)&&(n.tokenize=null),"string"}}function o(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=null;break}r="*"==n}return"comment"}function a(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function l(e,t,n){var r=e.indented;return e.context&&"statement"==e.context.type&&(r=e.context.indented),e.context=new a(r,t,n,null,e.context)}function s(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var c,u=t.indentUnit,d=n.statementIndentUnit||u,f=n.dontAlignCalls,p=n.keywords||{},h=n.builtin||{},m=n.blockKeywords||{},g=n.atoms||{},v=n.hooks||{},b=n.multiLineStrings,y=/[+\-*&%=<>!?|\/]/;return{startState:function(e){return{tokenize:null,context:new a((e||0)-u,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;if(e.sol()&&(null==n.align&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;c=null;var i=(t.tokenize||r)(e,t);if("comment"==i||"meta"==i)return i;if(null==n.align&&(n.align=!0),";"!=c&&":"!=c&&","!=c||"statement"!=n.type)if("{"==c)l(t,e.column(),"}");else if("["==c)l(t,e.column(),"]");else if("("==c)l(t,e.column(),")");else if("}"==c){for(;"statement"==n.type;)n=s(t);for("}"==n.type&&(n=s(t));"statement"==n.type;)n=s(t)}else c==n.type?s(t):(("}"==n.type||"top"==n.type)&&";"!=c||"statement"==n.type&&"newstatement"==c)&&l(t,e.column(),"statement");else s(t);return t.startOfLine=!1,i},indent:function(t,n){if(t.tokenize!=r&&null!=t.tokenize)return e.Pass;var i=t.context,o=n&&n.charAt(0);"statement"==i.type&&"}"==o&&(i=i.prev);var a=o==i.type;return"statement"==i.type?i.indented+("{"==o?0:d):!i.align||f&&")"==i.type?")"!=i.type||a?i.indented+(a?0:u):i.indented+d:i.column+(a?0:1)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var l="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";a(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:t(l),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":n},modeProps:{fold:["brace","include"]}}),a(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:t(l+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),blockKeywords:t("catch class do else finally for if struct switch try while"),atoms:t("true false null"),hooks:{"#":n,u:r,U:r,L:r,R:r},modeProps:{fold:["brace","include"]}}),a("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:t("catch class do else finally for if switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),a("text/x-csharp",{name:"clike",keywords:t("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),builtin:t("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=i,i(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),a("text/x-scala",{name:"clike",keywords:t("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:t("catch class do else finally for forSome if match switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),a(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:t("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:t("for while do if else struct"),builtin:t("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:t("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":n},modeProps:{fold:["brace","include"]}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define("codemirror/mode/php/php",["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e){return function(t,n){return t.match(e)?n.tokenize=null:t.skipToEnd(),"string"}}function r(e){return 0==e.length?i:function(t,n){for(var o=e[0],a=0;a<o.length;a++)if(t.match(o[a][0]))return n.tokenize=r(e.slice(1)),o[a][1];return n.tokenize=i,"string"}}function i(e,t){var n,i=!1,o=!1;if('"'==e.current())return"string";if(e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(e.match(/\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=r([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]])),e.match(/\-\>\w/,!1)&&(t.tokenize=r([[["->",null]],[[/[\w]+/,"variable"]]])),"variable-2";for(;!(e.eol()||e.match("{$",!1)||e.match(/(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)&&!i);){if(n=e.next(),!i&&'"'==n){o=!0;break}i=!i&&"\\"==n}return o&&(t.tokenize=null,t.phpEncapsStack.pop()),"string"}var o="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",a="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",l="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once";e.registerHelper("hintWords","php",[o,a,l].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\\w$]/);var s={name:"clike",helperType:"php",keywords:t(o),blockKeywords:t("catch do else elseif for foreach if switch try while finally"),atoms:t(a),builtin:t(l),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,t){return e.match(/<</)?(e.eatWhile(/[\w\.]/),t.tokenize=n(e.current().slice(3)),t.tokenize(e,t)):!1},"#":function(e){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"},"/":function(e){if(e.eat("/")){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"}return!1},'"':function(e,t){return t.phpEncapsStack||(t.phpEncapsStack=[]),t.phpEncapsStack.push(0),t.tokenize=i,t.tokenize(e,t)},"{":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&t.phpEncapsStack[t.phpEncapsStack.length-1]++,!1},"}":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&0==--t.phpEncapsStack[t.phpEncapsStack.length-1]&&(t.tokenize=i),!1}}};e.defineMode("php",function(t,n){function r(e,t){var n=t.curMode==o;if(e.sol()&&t.pending&&'"'!=t.pending&&"'"!=t.pending&&(t.pending=null),n)return n&&null==t.php.tokenize&&e.match("?>")?(t.curMode=i,t.curState=t.html,"meta"):o.token(e,t.curState);if(e.match(/^<\?\w*/))return t.curMode=o,t.curState=t.php,"meta";if('"'==t.pending||"'"==t.pending){for(;!e.eol()&&e.next()!=t.pending;);var r="string"}else if(t.pending&&e.pos<t.pending.end){e.pos=t.pending.end;var r=t.pending.style}else var r=i.token(e,t.curState);t.pending&&(t.pending=null);var a,l=e.current(),s=l.search(/<\?/);return-1!=s&&(t.pending="string"==r&&(a=l.match(/[\'\"]$/))&&!/\?>/.test(l)?a[0]:{end:e.pos,style:r},e.backUp(l.length-s)),r}var i=e.getMode(t,"text/html"),o=e.getMode(t,s);return{startState:function(){var t=e.startState(i),r=e.startState(o);return{html:t,php:r,curMode:n.startOpen?o:i,curState:n.startOpen?r:t,pending:null}},copyState:function(t){var n,r=t.html,a=e.copyState(i,r),l=t.php,s=e.copyState(o,l);return n=t.curMode==i?a:s,{html:a,php:s,curMode:t.curMode,curState:n,pending:t.pending}},token:r,indent:function(e,t){return e.curMode!=o&&/^\s*<\//.test(t)||e.curMode==o&&/^\?>/.test(t)?i.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",s)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/go/go",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("go",function(e){function t(e,t){var i=e.next();if('"'==i||"'"==i||"`"==i)return t.tokenize=n(i),t.tokenize(e,t);if(/[\d\.]/.test(i))return"."==i?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==i?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(i))return l=i,null;if("/"==i){if(e.eat("*"))return t.tokenize=r,r(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(d.test(i))return e.eatWhile(d),"operator";e.eatWhile(/[\w\$_]/);var o=e.current();return c.propertyIsEnumerable(o)?(("case"==o||"default"==o)&&(l="case"),"keyword"):u.propertyIsEnumerable(o)?"atom":"variable"}function n(e){return function(n,r){for(var i,o=!1,a=!1;null!=(i=n.next());){if(i==e&&!o){a=!0;break}o=!o&&"\\"==i}return(a||!o&&"`"!=e)&&(r.tokenize=t),"string"}}function r(e,n){for(var r,i=!1;r=e.next();){if("/"==r&&i){n.tokenize=t;break}i="*"==r}return"comment"}function i(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function o(e,t,n){return e.context=new i(e.indented,t,n,null,e.context)}function a(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var l,s=e.indentUnit,c={"break":!0,"case":!0,chan:!0,"const":!0,"continue":!0,"default":!0,defer:!0,"else":!0,fallthrough:!0,"for":!0,func:!0,go:!0,"goto":!0,"if":!0,"import":!0,"interface":!0,map:!0,"package":!0,range:!0,"return":!0,select:!0,struct:!0,"switch":!0,type:!0,"var":!0,bool:!0,"byte":!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,"int":!0,uint:!0,uintptr:!0},u={"true":!0,"false":!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,imag:!0,len:!0,make:!0,"new":!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},d=/[+\-*&^%:=<>!|\/]/;return{startState:function(e){return{tokenize:null,context:new i((e||0)-s,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,n){var r=n.context;if(e.sol()&&(null==r.align&&(r.align=!1),n.indented=e.indentation(),n.startOfLine=!0,"case"==r.type&&(r.type="}")),e.eatSpace())return null;l=null;var i=(n.tokenize||t)(e,n);return"comment"==i?i:(null==r.align&&(r.align=!0),"{"==l?o(n,e.column(),"}"):"["==l?o(n,e.column(),"]"):"("==l?o(n,e.column(),")"):"case"==l?r.type="case":"}"==l&&"}"==r.type?r=a(n):l==r.type&&a(n),n.startOfLine=!1,i)},indent:function(e,n){if(e.tokenize!=t&&null!=e.tokenize)return 0;var r=e.context,i=n&&n.charAt(0);if("case"==r.type&&/^(?:case|default)\b/.test(n))return e.context.type="}",r.indented;var o=i==r.type;return r.align?r.column+(o?0:1):r.indented+(o?0:s)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-go","go")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror",require("../xml/xml"))):"function"==typeof define&&define.amd?define("codemirror/mode/markdown/markdown",["codemirror","codemirror/mode/xml/xml"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function r(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e,t,n){return t.f=t.block=n,n(e,t)}function o(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,y||e.f!=l||(e.f=d,e.block=a),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function a(e,t){var o=e.sol(),a=t.list!==!1;t.list!==!1&&t.indentationDiff>=0?(t.indentationDiff<4&&(t.indentation-=t.indentationDiff),t.list=null):t.list!==!1&&t.indentation>0?(t.list=null,t.listDepth=Math.floor(t.indentation/4)):t.list!==!1&&(t.list=!1,t.listDepth=0);var l=null;if(t.indentationDiff>=4)return t.indentation-=4,e.skipToEnd(),S;if(e.eatSpace())return null;if(l=e.match(F))return t.header=l[0].length<=6?l[0].length:6,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,c(t);if(t.prevLineHasContent&&(l=e.match(P)))return t.header="="==l[0].charAt(0)?1:2,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,c(t);if(e.eat(">"))return t.indentation++,t.quote=o?1:t.quote+1,n.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),c(t);if("["===e.peek())return r(e,t,m);if(e.match(W,!0))return $;if((!t.prevLineHasContent||a)&&(e.match(H,!1)||e.match(R,!1))){var u=null;return e.match(H,!0)?u="ul":(e.match(R,!0),u="ol"),t.indentation+=4,t.list=!0,t.listDepth++,n.taskLists&&e.match(B,!1)&&(t.taskList=!0),t.f=t.inline,n.highlightFormatting&&(t.formatting=["list","list-"+u]),c(t)}return n.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0)?(t.localMode=k(RegExp.$1),t.localMode&&(t.localState=t.localMode.startState()),i(e,t,s),n.highlightFormatting&&(t.formatting="code-block"),t.code=!0,c(t)):r(e,t,t.inline)}function l(e,t){var n=w.token(e,t.htmlState);return(y&&null===t.htmlState.tagStart&&!t.htmlState.context||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=d,t.block=a,t.htmlState=null),n}function s(e,t){if(e.sol()&&e.match(/^```/,!0)){t.localMode=t.localState=null,t.f=d,t.block=a,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0;var r=c(t);return t.code=!1,r}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),S)}function c(e){var t=[];if(e.formatting){t.push(A),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(A+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(A+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&t.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?A+"-"+e.formatting[r]+"-"+e.quote:"error")}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref)return t.push(O),t.length?t.join(" "):null;if(e.strong&&t.push(D),e.em&&t.push(q),e.linkText&&t.push(j),e.code&&t.push(S),e.header&&(t.push(C),t.push(C+"-"+e.header)),e.quote&&(t.push(T),t.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?T+"-"+e.quote:T+"-"+n.maxBlockquoteDepth)),e.list!==!1){var i=(e.listDepth-1)%3;
t.push(i?1===i?L:N:M)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function u(e,t){return e.match(U,!0)?c(t):void 0}function d(t,r){var o=r.text(t,r);if("undefined"!=typeof o)return o;if(r.list)return r.list=null,c(r);if(r.taskList){var a="x"!==t.match(B,!0)[1];return a?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,c(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),c(r);var s=t.sol(),u=t.next();if(r.escape)return r.escape=!1,c(r);if(r.linkTitle){r.linkTitle=!1;var d=u;"("===u&&(d=")"),d=(d+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var h="^\\s*(?:[^"+d+"\\\\]+|\\\\\\\\|\\\\.)"+d;if(t.match(new RegExp(h),!0))return O}if("`"===u){var m=r.formatting;n.highlightFormatting&&(r.formatting="code");var g=c(r),v=t.pos;t.eatWhile("`");var b=1+t.pos-v;return r.code?b===_?(r.code=!1,g):(r.formatting=m,c(r)):(_=b,r.code=!0,c(r))}if(r.code)return c(r);if("!"===u&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=p,I;if("["===u&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),c(r);if("]"===u&&r.linkText){n.highlightFormatting&&(r.formatting="link");var y=c(r);return r.linkText=!1,r.inline=r.f=p,y}if("<"===u&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=f,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+E}if("<"===u&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=f,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+z}if("<"===u&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var x=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(x)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(w),i(t,r,l)}if("<"===u&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var k=!1;if(!n.underscoresBreakWords&&"_"===u&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var C=t.pos-2;if(C>=0){var S=t.string.charAt(C);"_"!==S&&S.match(/(\w)/,!1)&&(k=!0)}}if("*"===u||"_"===u&&!k)if(s&&" "===t.peek());else{if(r.strong===u&&t.eat(u)){n.highlightFormatting&&(r.formatting="strong");var g=c(r);return r.strong=!1,g}if(!r.strong&&t.eat(u))return r.strong=u,n.highlightFormatting&&(r.formatting="strong"),c(r);if(r.em===u){n.highlightFormatting&&(r.formatting="em");var g=c(r);return r.em=!1,g}if(!r.em)return r.em=u,n.highlightFormatting&&(r.formatting="em"),c(r)}else if(" "===u&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return c(r);t.backUp(1)}return" "===u&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),c(r)}function f(e,t){var r=e.next();if(">"===r){t.f=t.inline=d,n.highlightFormatting&&(t.formatting="link");var i=c(t);return i?i+=" ":i="",i+E}return e.match(/^[^>]+/,!0),E}function p(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=h("("===r?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,c(t)):"error"}function h(e){return function(t,r){var i=t.next();if(i===e){r.f=r.inline=d,n.highlightFormatting&&(r.formatting="link-string");var o=c(r);return r.linkHref=!1,o}return t.match(b(e),!0)&&t.backUp(1),r.linkHref=!0,c(r)}}function m(e,t){return e.match(/^[^\]]*\]:/,!1)?(t.f=g,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,c(t)):r(e,t,d)}function g(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=v,n.highlightFormatting&&(t.formatting="link");var r=c(t);return t.linkText=!1,r}return e.match(/^[^\]]+/,!0),j}function v(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=d,O)}function b(e){return V[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),V[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),V[e]}var y=e.modes.hasOwnProperty("xml"),w=e.getMode(t,y?{name:"xml",htmlMode:!0}:"text/plain"),x={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},k=function(){var n,r,i={},o={},a=[];for(var l in e.modes)e.modes.propertyIsEnumerable(l)&&a.push(l);for(n=0;n<a.length;n++)i[a[n]]=a[n];var s=[];for(var l in e.mimeModes)e.mimeModes.propertyIsEnumerable(l)&&s.push({mime:l,mode:e.mimeModes[l]});for(n=0;n<s.length;n++)r=s[n].mime,o[r]=s[n].mime;for(var c in x)(x[c]in i||x[c]in o)&&(i[c]=x[c]);return function(n){return i[n]?e.getMode(t,i[n]):null}}();void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1),void 0===n.taskLists&&(n.taskLists=!1);var _=0,C="header",S="comment",T="quote",M="variable-2",L="variable-3",N="keyword",$="hr",I="tag",A="formatting",E="link",z="link",j="link",O="string",q="em",D="strong",W=/^([*\-=_])(?:\s*\1){2,}\s*$/,H=/^[*\-+]\s+/,R=/^[0-9]+\.\s+/,B=/^\[(x| )\](?=\s)/,F=/^#+/,P=/^(?:\={1,}|-{1,})$/,U=/^[^#!\[\]*_\\<>` "'(]+/,V=[],K={startState:function(){return{f:a,prevLineHasContent:!1,thisLineHasContent:!1,block:a,htmlState:null,indentation:0,inline:d,text:u,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:t.htmlState&&e.copyState(w,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,escape:!1,formatting:!1,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(e,t){if(t.formatting=!1,e.sol()){var n=e.match(/^\s*$/,!0)||t.header;if(t.header=0,n)return t.prevLineHasContent=!1,o(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.escape=!1,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((r-t.indentation)/4);i>4&&(i=4);var a=t.indentation+i;if(t.indentationDiff=a-t.indentation,t.indentation=a,r>0)return null}var l=t.f(e,t);return e.start==e.pos?this.token(e,t):l},innerMode:function(e){return e.block==l?{state:e.htmlState,mode:w}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:K}},blankLine:o,getType:c,fold:"markdown"};return K},"xml"),e.defineMIME("text/x-markdown","markdown")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/shell/shell",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("shell",function(){function e(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)i[n[r]]=e}function t(e,t){if(e.eatSpace())return null;var a=e.sol(),l=e.next();if("\\"===l)return e.next(),null;if("'"===l||'"'===l||"`"===l)return t.tokens.unshift(n(l)),r(e,t);if("#"===l)return a&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if("$"===l)return t.tokens.unshift(o),r(e,t);if("+"===l||"="===l)return"operator";if("-"===l)return e.eat("-"),e.eatWhile(/\w/),"attribute";if(/\d/.test(l)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var s=e.current();return"="===e.peek()&&/\w+/.test(s)?"def":i.hasOwnProperty(s)?i[s]:null}function n(e){return function(t,n){for(var r,i=!1,a=!1;null!=(r=t.next());){if(r===e&&!a){i=!0;break}if("$"===r&&!a&&"'"!==e){a=!0,t.backUp(1),n.tokens.unshift(o);break}a=!a&&"\\"===r}return(i||!a)&&n.tokens.shift(),"`"===e||")"===e?"quote":"string"}}function r(e,n){return(n.tokens[0]||t)(e,n)}var i={};e("atom","true false"),e("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),e("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var o=function(e,t){t.tokens.length>1&&e.eat("$");var i=e.next(),o=/\w/;return"{"===i&&(o=/[^}]/),"("===i?(t.tokens[0]=n(")"),r(e,t)):(/\d/.test(i)||(e.eatWhile(o),e.eat("}")),t.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(e,t){return r(e,t)}}}),e.defineMIME("text/x-sh","shell")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/selection/active-line",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",o),e.removeLineClass(e.state.activeLines[t],"background",a)}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function r(e,r){for(var i=[],l=0;l<r.length;l++){var s=r[l];if(s.empty()){var c=e.getLineHandleVisualStart(s.head.line);i[i.length-1]!=c&&i.push(c)}}n(e.state.activeLines,i)||e.operation(function(){t(e);for(var n=0;n<i.length;n++)e.addLineClass(i[n],"wrap",o),e.addLineClass(i[n],"background",a);e.state.activeLines=i})}function i(e,t){r(e,t.ranges)}var o="CodeMirror-activeline",a="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(n,o,a){var l=a&&a!=e.Init;o&&!l?(n.state.activeLines=[],r(n,n.listSelections()),n.on("beforeSelectionChange",i)):!o&&l&&(n.off("beforeSelectionChange",i),t(n),delete n.state.activeLines)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/edit/matchbrackets",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,r,i){var o=e.getLineHandle(t.line),s=t.ch-1,c=s>=0&&l[o.text.charAt(s)]||l[o.text.charAt(++s)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&u>0!=(s==t.ch))return null;var d=e.getTokenTypeAt(a(t.line,s+1)),f=n(e,a(t.line,s+(u>0?1:0)),u,d||null,i);return null==f?null:{from:a(t.line,s),to:f&&f.pos,match:f&&f.ch==c.charAt(0),forward:u>0}}function n(e,t,n,r,i){for(var o=i&&i.maxScanLineLength||1e4,s=i&&i.maxScanLines||1e3,c=[],u=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,d=n>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s),f=t.line;f!=d;f+=n){var p=e.getLine(f);if(p){var h=n>0?0:p.length-1,m=n>0?p.length:-1;if(!(p.length>o))for(f==t.line&&(h=t.ch-(0>n?1:0));h!=m;h+=n){var g=p.charAt(h);if(u.test(g)&&(void 0===r||e.getTokenTypeAt(a(f,h+1))==r)){var v=l[g];if(">"==v.charAt(1)==n>0)c.push(g);else{if(!c.length)return{pos:a(f,h),ch:g};c.pop()}}}}}return f-n==(n>0?e.lastLine():e.firstLine())?!1:null}function r(e,n,r){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,l=[],s=e.listSelections(),c=0;c<s.length;c++){var u=s[c].empty()&&t(e,s[c].head,!1,r);if(u&&e.getLine(u.from.line).length<=i){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(e.markText(u.from,a(u.from.line,u.from.ch+1),{className:d})),u.to&&e.getLine(u.to.line).length<=i&&l.push(e.markText(u.to,a(u.to.line,u.to.ch+1),{className:d}))}}if(l.length){o&&e.state.focused&&e.display.input.focus();var f=function(){e.operation(function(){for(var e=0;e<l.length;e++)l[e].clear()})};if(!n)return f;setTimeout(f,800)}}function i(e){e.operation(function(){s&&(s(),s=null),s=r(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=e.Pos,l={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},s=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&t.off("cursorActivity",i),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",i))}),e.defineExtension("matchBrackets",function(){r(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,r){return t(this,e,n,r)}),e.defineExtension("scanForBracket",function(e,t,r,i){return n(this,e,t,r,i)})}),define("NoteWidget",["main","codemirror","autoSave","codemirror/mode/python/python","codemirror/mode/ruby/ruby","codemirror/mode/php/php","codemirror/mode/css/css","codemirror/mode/clike/clike","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/go/go","codemirror/mode/markdown/markdown","codemirror/mode/shell/shell","codemirror/mode/javascript/javascript","codemirror/addon/selection/active-line","codemirror/addon/edit/matchbrackets"],function(e,t,n){var r,i;return r=function(){var e,r,i,o;r='<div id="noteWidget" class="noteWidget hidden hidden-xs">\n    <div class="noteWidget-header clearfix">\n        <h2 class="h4 pull-left">记笔记</h2>\n        <ul class="list-inline pull-right mb0">\n            <li id="noteWidgetMinimize"><span class="icon-minimize"></span></li><li id="noteWidgetZoom"><span class="icon-zoom"></span></li><li id="noteWidgetClose"><span class="icon-close"></span></li>\n        </ul>\n    </div>\n    <form method="POST" action="/api/notes/add" role="form">\n        <div class="form-group">\n            <label for="title" class="sr-only">标题</label>\n            <input type="hidden" value="" id="draftId">\n            <input type="text" name="title" data-error="" autocomplete="off" class="form-control" placeholder="笔记描述" value="">\n        </div>\n        <div class="editor-config clearfix">\n            <select name="lang" class="form-control pull-left input-sm">\n                <optgroup label="文本语法">\n                    <option value="text" data-mode="text">纯文本</option>\n                    <option value="markdown" data-mode="markdown">Markdown</option>\n                    <option value="javascript" data-mode="javascript">Javascript</option>\n                    <option value="css" data-mode="css">CSS</option>\n                    <option value="html5" data-mode="htmlmixed">HTML</option>\n                    <option value="php" data-mode="php">PHP</option>\n                    <option value="python" data-mode="python">Python</option>\n                    <option value="ruby" data-mode="ruby">Ruby</option>\n                    <option value="go" data-mode="go">Go</option>\n                    <option value="c" data-mode="clike">C/C++</option>\n                    <option value="java" data-mode="java">Java</option>\n                    <option value="bash" data-mode="shell">Shell/Bash</option>\n                </optgroup>\n            </select>\n            <div class="pull-right hidden-xs">\n                <select name="indentWithTabs" class="form-control inline-block input-sm">\n                    <optgroup label="缩进模式">\n                        <option value="false">空格缩进</option>\n                        <option value="true">Tabs 缩进</option>\n                    </optgroup>\n                </select>\n                <select name="tabSize" class="form-control inline-block input-sm">\n                    <optgroup label="缩进大小">\n                        <option value="2">2</option>\n                        <option value="4" selected="">4</option>\n                    </optgroup>\n                </select>\n                <select name="lineWrap" class="form-control inline-block input-sm">\n                    <optgroup label="换行方式">\n                        <option value="true">自动换行</option>\n                        <option value="false">不换行</option>\n                    </optgroup>\n                </select>\n            </div>\n        </div>\n        <textarea id="codeMirror" class="form-control" style="display: none;"></textarea>\n        <div class="mt20 clearfix">\n            <div class="pull-right">\n                <span class="text-muted hidden" id="editorStatus">已保存</span>\n                <a id="dropIt" href="javascript:void(0);" class="mr10 hidden">[舍弃]</a>\n                <button data-type="note" id="publishIt2" class="btn btn-default ml10" data-id="" data-do="add" data-url="" data-text="保存私密笔记" data-name="">保存私密笔记</button>\n                <button data-type="note" id="publishIt" class="btn btn-primary ml10" data-id="" data-do="add" data-url="" data-text="保存公开笔记" data-name="">保存公开笔记</button>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>',this.content=$(r),$("body").append(this.content),this.option=i={mode:$("#noteWidget [name=lang] option:selected").data("mode"),indentUnit:$("#noteWidget [name=tabSize]").val(),tabSize:$("#noteWidget [name=tabSize]").val(),lineWrapping:"true"===$("#noteWidget [name=lineWrap]").val(),indentWithTabs:"true"===$("#noteWidget [name=indentWithTabs]").val()},e=t.fromTextArea($("#codeMirror")[0],{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,mode:i.mode,indentUnit:i.indentUnit,tabSize:i.tabSize,lineWrapping:i.lineWrapping,indentWithTabs:i.indentWithTabs}),t.on($("#noteWidget [name=lang]")[0],"change",function(){var t;return t=$(this).find("option:selected").data("mode"),e.setOption("mode",t)}),$("#noteWidget [name=tabSize]").change(function(){var t;return t=$(this).val(),e.setOption("indentUnit",t),e.setOption("tabSize",t)}),$("#noteWidget [name=lineWrap]").change(function(){var t;return t="true"===$(this).val(),e.setOption("lineWrapping",t)}),$("#noteWidget [name=indentWithTabs]").change(function(){var t;return t="true"===$(this).val(),e.setOption("indentWithTabs",t)}),n.bind(e,function(){return this["do"]="saveNote",this.type="note",this.title=$("#noteWidget [name=title]").val(),this.text=e.getValue(),this.id=$("#draftId").val(),this.noteId=$("#publishIt").data("id"),this.language=$("#noteWidget [name=lang]").val(),this.language=$("#noteWidget [name=lang]").val()}),o=function(t,n){var r,i,o;return r=t,r.text("加载中").attr("disabled","disabled"),o={title:r.parents("form").find("input[name=title]").val(),text:e.getValue(),isPrivate:$("#isEditPrivate").val()||n,language:r.parents("form").find("[name=lang]").val()},i="/api/notes/add",$.post(i,o,function(e){0===e.status?location.href=e.data.url:r.text(r.data("text")).removeAttr("disabled")},"json")},$(".noteWidget form").submit(function(e){return e.preventDefault(),o($("#publishIt"),0),!1}),$("#publishIt2").click(function(e){return e.preventDefault(),o($(this),1)}),$("#noteWidgetMinimize").click(function(){return $("#noteWidget").toggleClass("minimize")}),$("#noteWidgetZoom").click(function(){var t;return $("#noteWidget").toggleClass("zoom"),$("#noteWidget").removeClass("minimize"),$("#noteWidget").hasClass("zoom")?(t=$(window).height()-215,e.setSize("100%",t)):e.setSize("100%",240),e.refresh()}),$("#noteWidgetClose").click(function(){return $("#noteWidget").removeClass("zoom minimize"),$("#noteWidget").addClass("hidden")}),this.codemirror=e},r.prototype.init=function(e,t){var n,r,i,o;$("#noteWidget").removeClass("hidden"),i=[],$("#noteWidget [name=lang] option").each(function(){return i.push($(this).attr("value"))}),r={javascript:/^(js|coffeescript)$/i,markdown:/^md$/i,c:/^(|cs|cpp|oc|objective-c)$/i,php:/^php[1-6]$/i,html5:/^(xml|html|html5|xhtml)$/i};for(n in r)t.match(r[n])&&(t=n);return-1!==i.indexOf(t)?o=$("#noteWidget [name=lang] option[value="+t+"]").data("mode"):(t="text",o="text"),$("#noteWidget [name=lang]").val(t),this.codemirror.setOption("mode",o),this.codemirror.setValue(e)},i=new r,$("body").on("click",".saveToNote",function(){var e,t,n,r,o;return $("#saveToNote").remove(),n=window.getSelection().toString(),n?i.init(n,"text"):(t=$(this).parents(".widget-codetool").next("pre"),e=t.find("code"),r=e.text(),o=e.attr("class")?e.attr("class"):t.attr("class").replace("hljs ",""),i.init(r,o))}),"on"===e.notePortal&&$(".fmt").mouseup(function(e){var t,n;return $("#saveToNote").length&&$("#saveToNote").remove(),n=window.getSelection(),n.toString()&&$(n.focusNode).parents(".fmt").length?(t=$('<button id="saveToNote" class="hidden-xs btn btn-xs widget-saveToNote saveToNote" style="color: #FFF; left: '+(e.pageX-65)+"px; top:"+(e.pageY-40)+'px">放进笔记</button>'),$("body").append(t)):void 0}),r}),define("highLight",["jquery","highlightjs","math","flowChart","sequenceChart","ZeroClipboard","NoteWidget","jquery_hoverIntent"],function(e,t,n,r,i,o){"use strict";return function(a){var l,s,c,u;u=function(e){var t,n,r,i;return t=document,i=e.get(0),t.body.createTextRange?(n=t.body.createTextRange(),n.moveToElementText(i),n.select()):window.getSelection?(r=window.getSelection(),n=t.createRange(),n.selectNodeContents(i),r.removeAllRanges(),r.addRange(n)):void 0},s=function(t){var n,r,i,a,l;return l='<div class="widget-codetool" style="display:none;"><button class="selectCode btn btn-xs">全选</button><button href="javascript:void(0);" class="copyCode btn btn-xs" data-clipboard-text="" data-toggle="tooltip" data-placement="top" title="">复制</button><button href="javascript:void(0);" class="saveToNote btn btn-xs">放进笔记</button></div>',i=e(l),t.before(i),r=i.find(".copyCode"),n=t.children("code"),t.hoverIntent(function(){return i.fadeIn(),r.attr("title",""),r.tooltip("destroy")},function(){return i.is(":hover")||r.hasClass("zeroclipboard-is-hover")?void 0:i.fadeOut()}),i.hoverIntent(function(){},function(){return t.is(":hover")?void 0:i.fadeOut()}),i.find(".selectCode").click(function(){return u(n)}),r.attr("data-clipboard-text",n.text()),a=new o(i.find(".copyCode")),a.on("ready",function(){return a.on("aftercopy",function(){return r.attr("title","已复制"),r.tooltip("show")})})},c=function(n){var o,l,c,u,d,f,p,h,m,g,v,b;v=n,f={actionscript:/^as[1-3]$/i,cmake:/^(make|makefile)$/i,cs:/^csharp$/i,css:/^css[1-3]$/i,delphi:/^pascal$/i,javascript:/^js$/i,markdown:/^md$/i,objectivec:/^(oc|objective-c)$/i,php:/^php[1-6]$/i,sql:/^mysql$/i,xml:/^(html|html5|xhtml)$/i,flow:/^flow$/i,sequence:/^sequence$/i},u=void 0,d=t.listLanguages(),c=void 0,o=void 0,m=!1,2===v.children("code").length?(o=v.children("code").first().text(),v.children("code").first().remove(),c=v.children("code").addClass(o)):(c=v.children("code"),o=c.attr("class")),o&&(l=o.split(/\s+/),-1!==l.indexOf("nohighlight")&&(m=!0),l.forEach(function(e){var t,n;if(n=e.toLowerCase(),-1!==d.indexOf(n))u=n;else for(t in f)n.match(f[t])&&(u=t)})),u?"flow"===u?(h=e(".flowChart").length,c.parent().after('<div id="flowDiagram'+h+'" class="flowChart"></div>'),r(c.text(),"flowDiagram"+h),c.parent().remove()):"sequence"===u?(a=c.parent(),b=c.text(),h=e(".sequenceChart").length,a.replaceWith('<div id="sequenceDiagram'+h+'" class="sequenceChart">'+b+"</div>"),i(e("#sequenceDiagram"+h))):(g=t.highlight(u,c.text(),!0),c.html(g.value)):m||(p=v.html(),p.length<1e4&&t.highlightBlock(v[0])),s(v)},"undefined"!=typeof t&&(a?(a.hasClass("fmt")&&a.find("table").each(function(){e(this).wrap('<div class="x-scroll"></div>')}),l=a.text().indexOf("$$"),-1!==l&&n(a),a.find("pre").each(function(){c(e(this))})):(l=!1,e(".fmt").each(function(){-1!==e(this).text().indexOf("$$")&&(l=!0)}),l&&n(),e(".fmt").mouseup(function(){return console.log(window.getSelection())}),e(".fmt pre").each(function(){c(e(this))})))}}),define("likeHate",["jquery","jquery_tmpl"],function(e){"use strict";var t,n;n='<div class="alert alert-danger alert-dismissible unlike-alert" role="alert">                              <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                              如果该问题有可改进的余地，欢迎在评论里给作者建议。                            </div>',t='<div class="alert alert-danger alert-dismissible unlike-alert" role="alert">                              <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                              如果该回答有可改进的余地，欢迎在评论里给作者建议。                            </div>',e.fn.likeHate=function(){var r;r=null,e(this).click(function(){var i,o,a,l,s,c;i=e(this),s=i.siblings(".active").hasClass("hate"),l=i.siblings(".active").hasClass("like"),a=i.data("do"),c="",c=0===a.indexOf("un")?a.slice(2):"un"+a,o=i.parents(".widget-vote").find(".count"),i.siblings(".like, .hate").removeClass("active"),i.toggleClass("active"),"like"===a?s&&i.siblings(".hate").data("do","hate"):"hate"===a?l&&e(this).siblings(".like").data("do","like"):"unlike"===a?console.log(1):"unhate"===a&&console.log(1),r&&clearTimeout(r),r=setTimeout(function(){"like"===a?(i.addClass("active"),i.after('<span class="ani-num">+1</span>'),function(e){setTimeout(function(){e.next(".ani-num").addClass("active")},0)}(i),e.sfAjax(i,function(e){o.text(e.data)},{},function(){i.removeClass("active"),i.next(".ani-num").remove()})):"hate"===a?e.sfAjax(i,function(r){i.addClass("active"),o.text(r.data),"question"===i.data("type")?i.parent().after(e.tmpl(n)):"answer"===i.data("type")&&i.parent().after(e.tmpl(t))},{},function(){i.removeClass("active")}):e.sfAjax(i,function(e){i.removeClass("active"),o.text(e.data),i.next(".ani-num").remove()})},300)})}}),function(e){var t,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},r='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=e(r).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===e(o).css("lineHeight")&&i.push("lineHeight"),o.style.lineHeight="",e.fn.autosize=function(r){return this.length?(r=e.extend({},n,r||{}),o.parentNode!==document.body&&e(document.body).append(o),this.each(function(){function n(){var t,n=window.getComputedStyle?window.getComputedStyle(f,null):!1;n?(t=f.getBoundingClientRect().width,(0===t||"number"!=typeof t)&&(t=parseInt(n.width,10)),e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,r){t-=parseInt(n[r],10)})):t=p.width(),o.style.width=Math.max(t,0)+"px"}function a(){var a={};if(t=f,o.className=r.className,o.id=r.id,c=parseInt(p.css("maxHeight"),10),e.each(i,function(e,t){a[t]=p.css(t)}),e(o).css(a).attr("wrap",p.attr("wrap")),n(),window.chrome){var l=f.style.width;f.style.width="0px";{f.offsetWidth}f.style.width=l}}function l(){var e,i;t!==f?a():n(),o.value=!f.value&&r.placeholder?(p.attr("placeholder")||"")+r.append:f.value+r.append,o.style.overflowY=f.style.overflowY,i=parseInt(f.style.height,10),o.scrollTop=0,o.scrollTop=9e4,e=o.scrollTop,c&&e>c?(f.style.overflowY="scroll",e=c):(f.style.overflowY="hidden",u>e&&(e=u)),e+=h,e-=28,i!==e&&(f.style.height=e+"px",m&&r.callback.call(f,f),p.trigger("autosize.resized"))}function s(){clearTimeout(d),d=setTimeout(function(){var e=p.width();e!==v&&(v=e,l())},parseInt(r.resizeDelay,10))}{var c,u,d,f=this,p=e(f),h=0,m=e.isFunction(r.callback),g={height:f.style.height,overflow:f.style.overflow,overflowY:f.style.overflowY,wordWrap:f.style.wordWrap,resize:f.style.resize},v=p.width();p.css("resize")}p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(h=p.outerHeight()-p.height()),u=Math.max(parseInt(p.css("minHeight"),10)-h||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"onpropertychange"in f?"oninput"in f?p.on("input.autosize keyup.autosize",l):p.on("propertychange.autosize",function(){"value"===event.propertyName&&l()}):p.on("input.autosize",l),r.resizeDelay!==!1&&e(window).on("resize.autosize",s),p.on("autosize.resize",l),p.on("autosize.resizeIncludeStyle",function(){t=null,l()}),p.on("autosize.destroy",function(){t=null,clearTimeout(d),e(window).off("resize",s),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),l())})):this}}(jQuery||$),define("jquery_autosize",["jquery"],function(e){return function(){var t;return t||e.$.fn.autosize}}(this)),function(){!function(e){return"function"==typeof define&&define.amd?define("atwho",["jquery"],e):e(window.jQuery)}(function(e){var t,n,r,i,o,a,l,s,c=[].slice;r=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.iframe=null,this.setIframe(),this.listen()}return t.prototype.setIframe=function(e){return e?(this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e):(this.document=document,this.window=window,this.iframe=null)},t.prototype.controller=function(e){var t,n,r,i;if(this.alias_maps[e])n=this.controllers[this.alias_maps[e]];else{i=this.controllers;for(r in i)if(t=i[r],r===e){n=t;break}}return n?n:this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var n,r;return n=(r=this.controllers)[e]||(r[e]=new i(this,e)),t.alias&&(this.alias_maps[t.alias]=e),n.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(e){return function(t){return e.on_keyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.on_keydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;return(n=e.controller())?n.view.hide(t,n.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this))},t.prototype.shutdown=function(){var e,t,n;n=this.controllers;for(t in n)e=n[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner")},t.prototype.dispatch=function(){return e.map(this.controllers,function(e){return function(t){var n;return(n=t.get_opt("delay"))?(clearTimeout(e.delayedCallback),e.delayedCallback=setTimeout(function(){return t.look_up()?e.set_context_for(t.at):void 0},n)):t.look_up()?e.set_context_for(t.at):void 0}}(this))},t.prototype.on_keyup=function(t){var n;switch(t.keyCode){case a.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:e.noop();break;case a.P:case a.N:t.ctrlKey||this.dispatch();break;default:this.dispatch()}},t.prototype.on_keydown=function(t){var n,r;if(n=null!=(r=this.controller())?r.view:void 0,n&&n.visible())switch(t.keyCode){case a.ESC:t.preventDefault(),n.hide(t);break;case a.UP:t.preventDefault(),n.prev();break;case a.DOWN:t.preventDefault(),n.next();break;case a.P:if(!t.ctrlKey)return;t.preventDefault(),n.prev();break;case a.N:if(!t.ctrlKey)return;t.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;t.preventDefault(),n.choose(t);break;default:e.noop()}},t}(),i=function(){function n(n,r){this.app=n,this.at=r,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,t.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new l(this),this.view=new s(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho["default"],t),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var t,n,r;r=arguments[0],t=2<=arguments.length?c.call(arguments,1):[];
try{return o[r].apply(this,t)}catch(i){return n=i,e.error(""+n+" Or maybe At.js doesn't have function "+r)}},n.prototype.trigger=function(e,t){var n,r;return null==t&&(t=[]),t.push(this),n=this.get_opt("alias"),r=n?""+e+"-"+n+".atwho":""+e+".atwho",this.$inputor.trigger(r,t)},n.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||o[e]},n.prototype.get_opt=function(e){var t;try{return this.setting[e]}catch(n){return t=n,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var e,t,n,r,i,o;return t=this.content(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),o=t.slice(0,e),r=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof r&&r.length<=this.get_opt("max_len",20)?(i=e-r.length,n=i+r.length,this.pos=i,r={text:r,head_pos:i,end_pos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},n.prototype.rect=function(){var e,t;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(e=this.cur_rect||(this.cur_rect=e)||e),t=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},n.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},n.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},n.prototype.insert_content_for=function(t){var n,r,i;return r=t.data("value"),i=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!i?r:(n=e.extend({},t.data("item-data"),{"atwho-data-value":r,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,i,n))},n.prototype.insert=function(t){var n,r,i,o,a,l,s,c,u;return n=this.$inputor,u=this.callbacks("inserting_wrapper").call(this,n,t,this.get_opt("suffix")),n.is("textarea, input")?(l=n.val(),s=l.slice(0,Math.max(this.query.head_pos-this.at.length,0)),c=""+s+u+l.slice(this.query.end_pos||0),n.val(c),n.caret("pos",s.length+u.length,{iframe:this.app.iframe})):(o=this.range)?(i=o.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,o.setStart(o.endContainer,Math.max(i,0)),o.setEnd(o.endContainer,o.endOffset),o.deleteContents(),r=e(u,this.app.document)[0],o.insertNode(r),o.setEndAfter(r),o.collapse(!1),a=this.app.window.getSelection(),a.removeAllRanges(),a.addRange(o)):(o=this.ie8_range)&&(o.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),o.pasteHTML(u),o.collapse(!1),o.select()),n.is(":focus")||n.focus(),n.change()},n.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var t,n;if(t=this.catch_query())return n=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(n,this)),t},n}(),l=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var n,r,i;return n=this.fetch(),r=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,e,n,r)||[],i=this.context.callbacks("remote_filter"),n.length>0||!i&&0===n.length?t(n):i.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done(function(e){return function(t){return e.save(t)}}(this)):this.save(t)},t}(),s=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return t=this.$el.find("ul"),t.on("mouseenter.atwho-view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click",function(e){return function(t){return e.choose(t),t.preventDefault()}}(this))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(e){var t,n;return(t=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},t.prototype.reposition=function(t){var n,r;return t.bottom+this.$el.height()-e(window).scrollTop()>e(window).height()&&(t.bottom=t.top-this.$el.height()),n={left:t.left,top:t.bottom},null!=(r=this.context.callbacks("before_reposition"))&&r.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},t.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},t.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},t.prototype.show=function(){var e;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e,t){var n;if(this.visible())return isNaN(t)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[e])):(n=function(e){return function(){return e.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,t))},t.prototype.render=function(t){var n,r,i,o,a,l,s;if(!(e.isArray(t)&&t.length>0))return void this.hide();for(this.$el.find("ul").empty(),r=this.$el.find("ul"),a=this.context.get_opt("tpl"),l=0,s=t.length;s>l;l++)i=t[l],i=e.extend({},i,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,a,i),n=e(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),n.data("item-data",i),r.append(n);return this.show(),this.context.get_opt("highlight_first")?r.find("li:first").addClass("cur"):void 0},t}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(t){var n,r,i,o;if(!e.isArray(t))return t;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],o.push(e.isPlainObject(n)?n:{name:n});return o},matcher:function(e,t,n){var r,i;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),i=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),r=i.exec(t),r?r[2]||r[1]:null},filter:function(e,t,n){var r,i,o,a;for(a=[],i=0,o=t.length;o>i;i++)r=t[i],~r[n].toLowerCase().indexOf(e.toLowerCase())&&a.push(r);return a},remote_filter:null,sorter:function(e,t,n){var r,i,o,a;if(!e)return t;for(a=[],i=0,o=t.length;o>i;i++)r=t[i],r.atwho_order=r[n].toLowerCase().indexOf(e.toLowerCase()),r.atwho_order>-1&&a.push(r);return a.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){var n;try{return e.replace(/\$\{([^\}]*)\}/g,function(e,n){return t[n]})}catch(r){return n=r,""}},highlighter:function(e,t){var n;return t?(n=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(n,function(e,t,n,r){return"> "+t+"<strong>"+n+"</strong>"+r+" <"})):e},before_insert:function(e){return e},inserting_wrapper:function(e,t,n){var r,i;return r=""===n?n:n||" ",e.is("textarea, input")?""+t+r:"true"===e.attr("contentEditable")?(r=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?i="<span>"+t+r+"</span>":(n="<span contenteditable='false'>"+r+"<span>",i="<span contenteditable='false'>"+t+n+"</span>"),this.app.document.selection&&(i="<span contenteditable='true'>"+t+"</span>"),i):void 0}},n={load:function(e,t){var n;return(n=this.controller(e))?n.model.load(t):void 0},setIframe:function(e){return this.setIframe(e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t=e("<div id='atwho-container'></div>"),e.fn.atwho=function(i){var o,a;return a=arguments,e("body").append(t),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var t,l;return(l=(t=e(this)).data("atwho"))||t.data("atwho",l=new r(this)),"object"!=typeof i&&i?n[i]&&l?o=n[i].apply(l,Array.prototype.slice.call(a,1)):e.error("Method "+i+" does not exist on jQuery.caret"):l.reg(i.at,i)}),o||this},e.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){!function(e){return"function"==typeof define&&define.amd?define("caret",["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t,n,r,i,o,a,l,s,c,u,d;return u="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(){return this.domInputor},t.prototype.getIEPosition=function(){return e.noop()},t.prototype.getPosition=function(){return e.noop()},t.prototype.getOldIEPos=function(){var e,t;return t=l.selection.createRange(),e=l.body.createTextRange(),e.moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?(e=n.cloneRange(),e.selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):l.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return e=l.selection.createRange().duplicate(),e.moveStart("character",-1),t=e.getBoundingClientRect(),{height:t.bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(){var t,n,r,i;if(c.getSelection&&(r=this.range())){if(r.endOffset-1<0)return null;t=r.cloneRange(),t.setStart(r.endContainer,r.endOffset-1),t.setEnd(r.endContainer,r.endOffset),i=t.getBoundingClientRect(),n={height:i.height,left:i.left+i.width,top:i.top},t.detach()}else l.selection&&(n=this.getOldIEOffset());return n&&!s&&(n.top+=e(c).scrollTop(),n.left+=e(c).scrollLeft()),n},t.prototype.range=function(){var e;return c.getSelection?(e=c.getSelection(),e.rangeCount>0?e.getRangeAt(0):null):void 0},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,r,i,o,a;return t=this.domInputor,o=l.selection.createRange(),i=0,o&&o.parentElement()===t&&(r=t.value.replace(/\r\n/g,"\n"),n=r.length,a=t.createTextRange(),a.moveToBookmark(o.getBookmark()),e=t.createTextRange(),e.collapse(!1),i=a.compareEndPoints("StartToEnd",e)>-1?n:-a.moveStart("character",-n)),i},t.prototype.getPos=function(){return l.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,l.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t,n,r,i;return n=this.domInputor.createTextRange(),e||(e=this.getPos()),n.move("character",e),r=n.boundingLeft,i=n.boundingTop,t=n.boundingHeight,{left:r,top:i,height:t}},t.prototype.getOffset=function(t){var n,r,i;return n=this.$inputor,l.selection?(r=this.getIEOffset(t),r.top+=e(c).scrollTop()+n.scrollTop(),r.left+=e(c).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(t),r={left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},t.prototype.getPosition=function(e){var t,n,i,o,a,l,s;return t=this.$inputor,o=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===e&&(e=this.getPos()),s=t.val().slice(0,e),i=t.val().slice(e),a="<span style='position: relative; display: inline;'>"+o(s)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+o(i)+"</span>",l=new r(t),n=l.create(a).rect()},t.prototype.getIEPosition=function(e){var t,n,r,i,o;return r=this.getIEOffset(e),n=this.$inputor.offset(),i=r.left-n.left,o=r.top-n.top,t=r.height,{left:i,top:o,height:t}},t}(),r=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,function(e,r){return t[r]=n.$inputor.css(r)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},a={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return l.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(t){var n,r;return r=this.getOffset(t),s&&(n=e(s).offset(),r.top+=n.top,r.left+=n.left),r}},l=null,c=null,s=null,d=function(e){var t;return(t=null!=e?e.iframe:void 0)?(s=t,c=t.contentWindow,l=t.contentDocument||c.document):(s=void 0,c=window,l=document)},o=function(e){var t;l=e[0].ownerDocument,c=l.defaultView||l.parentWindow;try{return s=c.frameElement}catch(n){t=n}},e.fn.caret=function(r,o,l){var s;return a[r]?(e.isPlainObject(o)?(d(o),o=void 0):d(l),s=i.contentEditable(this)?new t(this):new n(this),a[r].apply(s,[o])):e.error("Method "+r+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=i,e.fn.caret.apis=a})}.call(this),define("comment",["jquery","sfModal","jquery_tmpl","main","highLight","likeHate","statusToggle","jquery_autosize","atwho","caret"],function(e,t,n,r,i){var o,a;return o=function(e){var t;return e+="",t={101:"question",102:"answer",119:"article",116:"activity",133:"note"},t[e.slice(0,3)]},a='<div class="widget-comments__item hover-show ${pos}" id="${id}">    <div class="votes widget-vote">        <button class="like {{if isLiked}}active{{/if}}" data-id="${id}" type="button" {{if isLiked}}data-do="unlike" {{else}}data-do="like" {{/if}} data-type="comment"></button><span class="count">{{if votes!=0 }}${votes}{{else}}&nbsp;{{/if}}</span>    </div>    <div class="comment-content wordbreak">  {{if replyUser}}<span>回复 <a href="${replyUser.url}">${replyUser.name}</a>：</span>{{/if}}        <div class="content fmt">{{html parsedText }} </div>        <textarea name="text" rows="3" id="commentText-${id}" class="editTextarea form-control mb10 hidden">${originalText}</textarea>        <p class="comment-meta">            <a href="/c/${id}" class="text-muted">#${index}</a>&nbsp;<a href="${user.url}" class="commentUser" data-userid="${user.id}" data-username="${user.name}" data-userslug="${user.slug}" data-useravatar="${user.avatarUrl}"><strong>${user.name}</strong></a> &middot; <span class="createdDate">${createdDate}</span>            {{if !isSelf}}            &middot; <a href="#" class="commentReply" data-userid="${user.id}" data-id="${id}" data-username="${user.name}">回复</a>            {{/if}}            {{if canEdit}}            <span class="pull-right editBtns hidden">                <button class="btn btn-link btn-xs cancel" type="button">取消</button>                <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>            </span>            {{/if}}            <span class="pull-right commentTools hover-show-obj">                {{if canEdit}}<a href="javascript:void(0);" class="commentEdit ml10" data-id="${id}">编辑</a>{{/if}}                {{if canDelete}}<a href="javascript:void(0);" class="commentDel ml10" data-id="${id}" data-username="${user.name}">删除</a>{{/if}}                {{if !isSelf}}<a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-type="comment" data-id="${id}" data-typetext="评论" data-placement="top" title="举报">举报</a>{{/if}}            </span>        </p>    </div></div>',{init:function(t){var n,i,o,a;t.removeClass("hidden"),i=e(".comment-helper",t),o=e(".toggle-comment-helper",t),o.click(function(){i.toggle()}),a=i.data("rank"),15>a&&i.show(),n=e("#activate"),n.length>0&&e(".widget-comments__form textarea",t).focus(function(){n.modal("show")}),e(".widget-comments__form textarea",t).atwho({at:"@",callbacks:{remote_filter:function(n,r){var i,o,a,l;if(!n){if(a=t.data("id")+"",l=[],0===a.indexOf("101")||0===a.indexOf("102"))e.getJSON("/api/users/search",{questionId:e("#questionTitle").data("id")},function(t){t.status||(l=t.data,e(".comment-meta").each(function(){var t,n,r;t=e(this).find(".commentUser"),n={id:t.data("userid"),name:t.data("username"),slug:t.data("userslug"),url:"/u/"+t.data("userslug"),avatarUrl:t.data("useravatar")},r=!1,l.forEach(function(e){e.slug===n.slug&&(r=!0)}),r||l.push(n)}),r(l))});else{if(0!==a.indexOf("119"))return;i=e(".author"),o={id:i.data("userid"),name:i.data("username"),slug:i.data("userslug"),url:"/u/"+i.data("userslug"),avatarUrl:i.data("useravatar")},l.push(o)}return e(".comment-meta").each(function(){var t,n,r;t=e(this).find(".commentUser"),n={id:t.data("userid"),name:t.data("username"),slug:t.data("userslug"),url:"/u/"+t.data("userslug"),avatarUrl:t.data("useravatar")},r=!1,l.forEach(function(e){e.slug===n.slug&&(r=!0)}),r||l.push(n)}),void r(l)}e.getJSON("/api/users/search",{q:n},function(e){e.status||r(e.data)})},tpl_eval:function(e,t){return'<li data-value="@'+t.name+'">'+(t.avatarUrl?'<img class="avatar-24 mr10" src="'+t.avatarUrl+'" />':"")+t.name+" &nbsp; <small>@"+t.slug+"</small></li>"}}}).on("keydown",function(t){var n;return n=e(this).parents(".widget-comments__form").find("button[type=submit]"),!t.ctrlKey&&!t.metaKey||13!==t.keyCode||n.attr("disabled")?void 0:(n.click(),!1)}).autosize(),e(".commentLogin").click(function(){r.login()})},get:function(t,n,r,l,s){var c,u,d;return c=this,u=[],d=r,e(".ajax-error",n).remove(),d&&n.hasClass("show")?void n.removeClass("show").hide():(n.prepend('<span class="load-text text-muted">加载中<br /></span>'),void e.get("/api/"+o(t)+"/"+t+"/comments",function(r){var o,d,f,p;if(e(".load-text",n).remove(),e(".widget-comments__item",n).remove(),0===r.status){if(null===r.data)return;r.data.total>0&&(d=e(".showMoreComments[data-target=#comment-"+t+"]"),d.next(".widget-comments__form").removeClass("hidden"),d.remove(),e("[data-target=#comment-"+t+"]").text(r.data.total+" 评论")),e.each(r.data.rows,function(t,n){n.userId&&(n.isSelf=n.userId===e("#SFUserId").attr("value"),n.pos=n.id===l?"high":"",n.parsedText=n.parsedText.replace(/^[\r\n]/g,""),-1!==n.parsedText.indexOf("<p></p>")&&(n.parsedText=n.parsedText.replace(/<[\/a-z]+>/g,""),n.parsedText="<p>"+n.parsedText+"</p>"),u.push(n),n.index=t+1)}),n.prepend(e.tmpl(a,u)),i(n),l&&l.length&&(f=e("#"+l.join(", #")),e("body").scrollTop(f.eq(0).offset().top-20),f.addClass("comment-warning"),window.setTimeout(function(){return f.removeClass("comment-warning")},5e3)),n.on("click",".commentEdit",function(){return c.edit({id:e(this).data("id"),content:e(this).parents(".comment-content")}),!1}),n.on("click",".commentDel",function(){return c["delete"]({id:e(this).data("id"),commentId:t,username:e(this).data("username")}),!1}),n.on("click",".commentReply",function(){return c.reply({userId:e(this).data("userid"),username:e(this).data("username"),commentId:e(this).data("id"),form:e(this).parents(".widget-comments__item").siblings(".widget-comments__form")}),!1}),n.find(".like").likeHate(),p=new RegExp(window.location.host,"ig"),o=void 0,n.find("a").each(function(){o=e(this),!p.test(o.attr("href"))&&/^http/.test(o.attr("href"))&&o.attr("target","_blank")}),n.data("opened",!0),0===r.data.rows.length&&(/^101/.test(t)||/^102/.test(t))&&e("#commentText-"+t).focus(),s&&s()}}))},set:function(t){var n;e(".ajax-error",t.form.parent()).remove(),t.form.before('<p class="load-text text-muted">加载中</p>'),t.trigger.attr("disabled","disabled"),n=t.trigger.data("id"),e.post("/api/"+o(n)+"/"+n+"/comments/add",{text:t.textarea.val(),reply:t.reply||""},function(n){var r;e(".load-text",t.form.parent()).remove(),t.trigger.removeAttr("disabled"),0===n.status&&(r=n.data.comment,t.textarea.val("").attr("style","height:56px"),t.form.removeData("reply").find(".reply").remove(),r.isSelf=r.userId===e("#SFUserId").attr("value"),r.canDelete=!0,r.canEdit=!0,e("[data-target=#comment-"+t.textarea.data("id")+"]").text(n.data.total+" 评论"),r.index=n.data.total,t.form.before(e.tmpl(a,r)))})},reply:function(t){var n,r;r=t.userId,n=t.form,e(".reply",n).remove(),n.removeData("reply"),n.siblings(".reply").remove(),n.data("reply",r).prepend('<div class="reply col-sm-12 mb5"><span>回复：'+t.username+'</span> <a href="" class="removeReply">[&times;]</a></div>'),n.find("textarea").focus(),e(".reply .removeReply",n).click(function(){return e(this).parent().remove(),n.removeData("reply"),!1})},"delete":function(n){var r,i;r=this,i=n.commentId,t({title:"删除评论",content:"确认删除来自「"+n.username+"」的评论吗？",closeText:"取消",doneClass:"btn-danger",doneText:"删除",doneFn:function(){e(this).text("加载中").attr("disabled","disabled"),e.post("/api/comment/"+n.id+"/delete",function(n){0===n.status&&(e("[data-target=#comment-"+i+"]").text(n.data+" 评论"),r.get(i,e("#comment-"+i),!1),t("hide"))})}})},edit:function(t){var n,r,i,o,a,l,s,c,u;r=t.content,u=t.id,c=r.find(".content").height(),l=r.find(".content").addClass("hidden"),o=r.find(".editBtns").removeClass("hidden"),n=o.find(".cancel"),i=o.find(".edit"),a=r.find(".commentEdit").addClass("hidden"),s=r.find(".editTextarea").css("height",c).removeClass("hidden").autosize().focus(),r.find(".commentTools").addClass("hidden"),s.on("keydown",function(t){return(t.ctrlKey||t.metaKey)&&13===t.keyCode?(e(this).siblings(".comment-meta").find("button.edit").click(),!1):27===t.keyCode?(e(this).siblings(".comment-meta").find("button.cancel").click(),!1):9===t.keyCode?(e(this).siblings(".comment-meta").find("button.edit").focus(),!1):void 0}),n.click(function(){return s.addClass("hidden"),o.addClass("hidden"),l.removeClass("hidden"),a.removeClass("hidden"),r.find(".commentTools").removeClass("hidden"),r.find(".editTextarea").removeClass("error"),r.find(".error--msg").remove(),!1}).on("keydown",function(t){return 9===t.keyCode?(e(this).parent().siblings(".commentDel").focus(),r.find(".commentTools").removeClass("hidden"),!1):void 0}),i.click(function(){e.post("/api/comment/"+u+"/edit",{text:s.val()},function(e){0===e.status&&(l.html(e.data.parsedText),r.find(".createdDate").text(e.data.createdDate),n.click(),r.find(".commentTools").removeClass("hidden"))})}).on("keydown",function(t){return 9===t.keyCode?(e(this).siblings("button.cancel").focus(),!1):void 0})}}}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("sf_share",t):"object"==typeof exports?exports.WidgetShare=t():e.WidgetShare=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=n(4);e.exports=r},function(e){function t(){}function n(e,t){var n;return this.element=document.querySelector(e),this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabled_networks:0,protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",url:this.data(this.element,"url")||window.location.href,text:this.data(this.element,"text"),caption:null,title:this.data(this.element,"text")?this.data(this.element,"text"):(n=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?n.getAttribute("content"):(n=document.querySelector("title"))?n.innerText:void 0,image:this.data(this.element,"image")||"http://s.segmentfault.com/img/sf-114.png",pic:this.data(this.element,"pic")||"http://static.segmentfault.com/global/img/touch-icon.png",description:(n=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?n.getAttribute("content"):"",networks:{weibo:{enabled:!0,url:null,appkey:null,title:null,text:null,caption:null,description:null,image:null,pic:null,appkey:"1742025894"},wechart:{enabled:!0,url:null},renren:{enabled:!0,url:null,title:null,text:null,description:null,image:null,comment:null},tqq:{enabled:!0,url:null,appkey:"",title:null,text:null,image:null},douban:{enabled:!0,url:null,href:null,appkey:null,text:null,title:null,caption:null,description:null,image:null,comment:null},google_plus:{enabled:!1,url:null},twitter:{enabled:!0,url:null,text:null,description:null},facebook:{enabled:!0,load_sdk:!0,url:null,app_id:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!1,url:null,image:null,description:null},email:{enabled:!1,title:null,description:null}}},this.setup(e,t),this}"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var e,t,n;return n=function(e){return function(n){var r,i;r=t.className.split(/\s+/),i=r.indexOf(n),e(r,i,n),t.className=r.join(" ")}},t=this,e={add:n(function(e,t,n){~t||e.push(n)}),remove:n(function(e,t){~t&&e.splice(t,1)}),toggle:n(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}},Object.defineProperty(e,"length",{get:function(){return t.className.split(/\s+/).length}}),e}});var r={}.hasOwnProperty,i=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};t.prototype.extend=function(e,t,n){var r,i;for(i in t)r=void 0!==e[i],r&&"object"==typeof t[i]?this.extend(e[i],t[i],n):(n||!r)&&(e[i]=t[i])},t.prototype.hide=function(e){return e.style.display="none"},t.prototype.show=function(e){return e.style.display="block"},t.prototype.has_class=function(e,t){return e.classList.contains(t)},t.prototype.add_class=function(e,t){return e.classList.add(t)},t.prototype.remove_class=function(e,t){return e.classList.remove(t)},t.prototype.is_encoded=function(e){return e?(e=e.replace(/\%/g,""),decodeURIComponent(e)!==e):void 0},t.prototype.encode=function(e){return this.is_encoded(e)?e:encodeURIComponent(e)},t.prototype.data=function(e,t){return e?e.getAttribute("data-"+t):void 0},t.prototype.popover=function(e){var t=document.createElement("div");t.innerHTML='<div class="share-modal"> <div class="share-modal-content"> <p class="share-modal-title">打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p> <button type="button" class="share-modal-close">×</button> <img width="300" height="300" src="'+e+'"> </div> </div>',document.body.appendChild(t);var n=document.getElementsByClassName("share-modal")[0],r=document.getElementsByClassName("share-modal-close")[0];r.onclick=function(){n.parentNode.removeChild(n),r.onclick=null}},t.prototype.popup=function(e,t){var n,r,i,o;return null==t&&(t={}),r={width:500,height:350},r.top=screen.height/2-r.height/2,r.left=screen.width/2-r.width/2,i=function(){var e;e=[];for(n in t)o=t[n],e.push(n+"="+this.encode(o));return e}.call(this).join("&"),i&&(i="?"+i),window.open(e+i,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=550,height=500")},i(n,t),n.prototype.setup=function(e,t){var n,r,i,o,a;for(i=document.querySelectorAll(e),this.extend(this.config,t,!0),this.set_global_configuration(),this.normalize_network_configuration(),n=o=0,a=i.length;a>o;n=++o)r=i[n],this.setup_instance(e,n);this.config.callback()},n.prototype.setup_instance=function(e,t){var n,r,i,o,a,l,s;for(n=document.querySelectorAll(e)[t],this.hide(n),this.add_class(n,"sharer-"+t),this.inject_html(n),this.show(n),i=n.getElementsByTagName("li"),s=this,l=[],t=o=0,a=i.length;a>o;t=++o)r=i[t],l.push(r.addEventListener("click",function(){return s.event_network(n,this)}));return l},n.prototype.event_network=function(e,t){var n;return n=t.getAttribute("data-network"),this["network_"+n]()},n.prototype["public"]=function(e){var t,n,r,i,o,a,l;for(a=document.querySelectorAll(this.element),l=[],n=i=0,o=a.length;o>i;n=++i)r=a[n],t=r.getElementsByClassName("social")[0],l.push(this["event_"+e](t));return l},n.prototype.network_facebook=function(){return this.config.networks.facebook.load_sdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})},n.prototype.network_twitter=function(){return this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.text,url:this.config.networks.twitter.url+"?utm_source=Twitter&utm_medium=shareLink&utm_campaign=socialShare"})},n.prototype.network_google_plus=function(){return this.popup("https://plus.google.com/share",{url:this.config.networks.google_plus.url})},n.prototype.network_pinterest=function(){return this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})},n.prototype.network_email=function(){return this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})},n.prototype.network_weibo=function(){return this.popup("http://service.weibo.com/share/share.php",{title:this.config.networks.weibo.title.replace(/"/g,"%2522"),url:this.config.networks.weibo.url+"?utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare",pic:this.config.networks.weibo.image,appkey:this.config.networks.weibo.appkey,searchPic:"false"})},n.prototype.network_wechart=function(){return this.popover("http://qr.liantu.com/api.php?text="+this.config.networks.wechart.url+"?utm_source=Wechat&utm_medium=shareLink&utm_campaign=socialShare")},n.prototype.network_renren=function(){return this.popup("http://widget.renren.com/dialog/share",{resourceUrl:this.config.networks.renren.image,pic:this.config.networks.renren.image,srcUrl:this.config.networks.renren.url+"?utm_source=Renren&utm_medium=shareLink&utm_campaign=socialShare",title:this.config.networks.renren.title,description:this.config.networks.renren.description,comment:this.config.networks.renren.comment||""})
},n.prototype.network_tqq=function(){return this.popup("http://share.v.t.qq.com/index.php",{c:"share",a:"index",url:this.config.networks.tqq.url+"?utm_source=Tqq&utm_medium=shareLink&utm_campaign=socialShare",title:this.config.networks.tqq.title,appkey:this.config.networks.tqq.appkey,pic:this.config.networks.tqq.image})},n.prototype.network_douban=function(){return this.popup("http://www.douban.com/share/service",{href:this.config.networks.douban.url+"?utm_source=Douban&utm_medium=shareLink&utm_campaign=socialShare",name:this.config.networks.douban.title,image:this.config.networks.douban.image,text:this.config.networks.douban.description,comment:this.config.networks.douban.comment||""})},n.prototype.inject_html=function(e){e.innerHTML='<ul class="sn-inline"><li data-network="weibo"><a href="javascript:void(0);" class="entypo-weibo icon-sn-weibo share-1" data-toggle="tooltip" data-placement="top" title="分享至新浪微博">新浪微博</a></li><li data-network="wechart"><a href="javascript:void(0);" class="entypo-wechart icon-sn-wechat share-2" data-toggle="tooltip" data-placement="top" title="分享至微信">微信</a></li><li data-network="twitter"><a href="javascript:void(0);" class="entypo-twitter icon-sn-twitter share-3" data-toggle="tooltip" data-placement="top" title="分享至 Twitter">Twitter</a></li><li data-network="facebook"><a href="javascript:void(0);" class="entypo-facebook icon-sn-facebook share-4" data-toggle="tooltip" data-placement="top" title="分享至 Facebook">Facebook</a></li><li data-network="renren"><a href="javascript:void(0);" class="entypo-renren icon-sn-renren share-5" data-toggle="tooltip" data-placement="top" title="分享至人人网">人人网</a></li><li data-network="douban"><a href="javascript:void(0);" class="entypo-douban icon-sn-douban share-6" data-toggle="tooltip" data-placement="top" title="分享至豆瓣">豆瓣</a></li></ul>'},n.prototype.hook=function(e,t,n){var r,i;r=this.config.networks[t][e],"function"==typeof r&&(i=r.call(this.config.networks[t],n),void 0!==i&&(i=this.normalize_filter_config_updates(i),this.extend(this.config.networks[t],i,!0),this.normalize_network_configuration()))},n.prototype.set_global_configuration=function(){var e,t,n,r,i,o;for(n in r)n||(this.config[n]=r[n]);i=this.config.networks,o=[];for(t in i){r=i[t];for(n in r)null==this.config.networks[t][n]&&(this.config.networks[t][n]=this.config[n]);this.config.networks[t].enabled?(e="block",this.config.enabled_networks+=1):e="none",o.push(this.config.networks[t].display=e)}return o},n.prototype.normalize_network_configuration=function(){return this.config.networks.facebook.app_id||(this.config.networks.facebook.load_sdk=!1),this.is_encoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description)),"integer"==typeof this.config.networks.facebook.app_id?this.config.networks.facebook.app_id=this.config.networks.facebook.app_id.toString():void 0},n.prototype.normalize_filter_config_updates=function(e){return this.config.networks.facebook.app_id!==e.app_id&&(console.warn("You are unable to change the Facebook app_id after the button has been initialized. Please update your Facebook filters accordingly."),delete e.app_id),this.config.networks.facebook.load_sdk!==e.load_sdk&&(console.warn("You are unable to change the Facebook load_sdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete e.app_id),e},e.exports=n},function(e){function t(e,t){this.setup(e,t)}t.prototype={constructor:t,setup:function(e,t){this.initAttr(e,t),this.initDom(),this.eventHandler()},initAttr:function(e,t){this.element=$(e),this.options=$.extend({url:this.element.data("url"),shorturl:this.element.data("shorturl")},t)},initDom:function(){var e=this.options.url,t=this.options.shorturl,n='<div class="input-group"> <input type="text" class="form-control input-sm" readonly="readonly" data-url="{{url}}" data-shorturl="{{shorturl}}" value="{{url}}"> <span class="input-group-btn"> <button class="btn btn-default btn-sm" type="button" data-share-target="shorturl">缩短</button> </span> </div> '.replace(/{{url}}/g,e).replace(/{{shorturl}}/g,t);this.element.html(n),this.input=this.element.find("input")},eventHandler:function(){var e=this.element,t=this.input;e.on("click","[data-share-target]",function(){var e=$(this).data("shareTarget"),n=t.data(e);t.val(n).select(),"url"===e?$(this).data("shareTarget","shorturl").removeClass("active"):$(this).data("shareTarget","url").addClass("active")}),e.on("mouseenter","input",function(){$(this).select()})},destroy:function(){this.element.off().remove()}},e.exports=t},function(e,t,n){function r(e,t,n){this.setup(e,t,n)}var i=n(3),o=n(2);r.prototype={constructor:r,setup:function(e,t,n){return this.initAttr(e,t),n?(this.initDom(),this.initSwitchUrl(),void this.initNetwork()):void this.initNetwork(e)},initAttr:function(e,t){this.element=$(e),this.options=$.extend({url:this.element.data("url"),shorturl:this.element.data("shorturl"),title:this.element.data("title"),text:this.element.data("text"),image:this.element.data("image")},t)},initDom:function(){var e=this.options.url,t=this.options.shorturl,n=(this.options.text,this.options.image,this.options.title,'<div style="margin-bottom:5px;">分享扩散：</div> <div class="widget-share-url" data-url="{{url}}" data-shorturl="{{shorturl}}"> </div> <div class="widget-share-network"> </div>'.replace(/{{url}}/g,e).replace(/{{shorturl}}/g,t));this.element.html(n)},initSwitchUrl:function(){this.switchUrl=new i(".widget-share-url")},initNetwork:function(e){this.network=new o(e||".widget-share-network",{image:this.options.image,title:this.options.title,text:this.options.text,callback:function(){$((e||".widget-share-network")+" .sn-inline a").tooltip()},networks:this.options.networks||{}})},destroy:function(){this.element.empty(),this.switchUrl&&this.switchUrl.destroy(),this.network.destroy()}},e.exports=r}])}),function(e,t){var n=function(t){i||(e("head:first").append(t),i=!0),document.write=r},r=function(t){o={},o.ordered=[];var n=e(t);n.find("div.gist-file").each(function(){var t=e(this),n=t.find("div.gist-meta a").filter(function(){return-1===e(this).text().search(new RegExp("^\\s*(view raw|this gist|github)","i"))}),r=e.trim(n.first().text()),i=e("<div class='gist'></div>").append(t);o[r]={fileName:r,content:i},o.ordered.push(o[r])})},i=!1,o=null;e.getGist=function(r){document.write=n;var i=e.Deferred();return e.ajax({url:"https://gist.github.com/"+r+".js",dataType:"script",success:function(){console.log(o),i.resolve(o)},error:function(e,t,n){i.reject(t,n)},complete:function(){document.write=t}}),i.promise()}}(jQuery,document.write),define("jquery_gist",["jquery"],function(e){return function(){var t;return t||e.$.fn.getGist}}(this)),define("specialUrl",["jquery","jquery_tmpl","jquery_gist"],function(e){var t,n,r,i,o,a,l,s,c,u;return c=function(t,n){var r,i;r=e(".v_"+t),i=r.after(e.tmpl(s,n)).next(".video-prev"),i.click(function(){i.hide(),i.after(e.tmpl(l,n)).next(".video-body").find(".hide-video").click(function(){i.show(),e(this).parent().remove()})}),r.remove()},i=0,o=[{reg:/^https?:\/\/jsfiddle\.net\/([_a-z0-9-\/,]+)$/i,fn:function(t){t.indexOf("embedded")<0&&(t+=/\/$/.test(t)?"embedded":"/embedded"),t="http://jsfiddle.net/"+t,e('<iframe style="width: 100%; height: 300px" src="'+t+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this)}},{reg:/^https?:\/\/gist\.github\.com\/([_a-z0-9-]+)$/i,fn:function(t){var n,r,o,a,l,s,c;e("#special-gist"+t).length>0||(c="https://gist.github.com/"+t+".json?callback=special_"+i,o=e('<iframe id="special-gist'+t+'" style="width: 100%;" src="about:blank" frameborder="0"></iframe>').insertAfter(this),l=o[0],a=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document,s=a.createElement("script"),r=e(a),n=e("body",r),o.ready(function(){o.height(r.height())}),l.contentWindow["special_"+i]=function(e){n.append(e.div).css({padding:0,margin:0}),r.find("head").append('<link rel="stylesheet" href="'+e.stylesheet+'" />'),r.find("head").append("<style>html{background:#fff;}.gist .gist-file .gist-data{background:none;}                .gist .gist-file .gist-meta{background:#eee;text-shadow:none;}.gist .gist-file .gist-meta a{color:#017e66}                </style>"),setTimeout(function(){o.height(r.height())},5e3)},s.type="text/javascript",s.src=c,a.body.appendChild(s),i++)}},{reg:/^http:\/\/runjs\.cn\/detail\/([_0-9a-z-]+)$/i,fn:function(t){var n,r,i,o,a,l,s;n=function(){e("body",r).css("margin",0),e(".runjs_gist",r).css("border","none"),e(".gist_content",r).css("font-size","14px")},e("#special-runjs"+t).length>0||(s="http://runjs.cn/gist/"+t+"/all",i=e('<iframe id="special-runjs'+t+'" style="width: 100%; height: 300px" src="about:blank" frameborder="0"></iframe>').insertAfter(this),o=i[0],r=o.contentWindow?o.contentWindow.document:o.contentDocument?o.contentDocument:o.document,l=r.createElement("script"),a=r.prototype.or(r.__proto__),a.write=function(t){e(t).appendTo(r.body)},l.type="text/javascript",l.src=s,r.body.appendChild(l),l.onreadystatechange=n,l.onload=n)}},{reg:/^http:\/\/codepen\.io\/([_a-zA-Z0-9-\/,]+)$/i,fn:function(t){t.indexOf("embed")<0&&(t=t.replace("pen","embed")),t="http://codepen.io/"+t,e('<iframe style="width: 100%; height: 300px" src="'+t+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this)}},{reg:/^https:\/\/gist\.github\.com\/([_a-zA-Z0-9-\/,\.]+)$/i,fn:function(t){var n,r,i;i=e(this).closest("p"),n=t.replace(/\w+\//,"").replace(/\.\w+/,""),r=e.getGist(n),r.done(function(t){var n,r,o;return n="",o=t.ordered,r=o[0],n+="<h3>"+r.fileName+"</h3>",n+=r.content.html(),e("<div class='gist'>"+n+"</div>").insertAfter(i)})}},{reg:/^http:\/\/segmentfault\.com\/n\/([_a-zA-Z0-9-\/,\.]+)$/i,fn:function(t){return t="http://segmentfault.com/n/"+t+"/widget",e('<iframe style="width: 100%;height: 300px;" src="'+t+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this),e(this).prev("a").remove()}}],s='<div class="video-prev vp_${id}"><div class="clearfix video-header"><img class="pull-left" src="${thumbnail}"><div class="pull-left"><h5>${title}</h5><span class="text-muted">${link}</span></div></div>',l='<div class="video-body"><embed class="player" src="${player}" type="application/x-shockwave-flash" /><br /><a href="javascript:void(0)" class="hide-video text-muted"><span class="glyphicon glyphicon-open mr5"></span>收起视频</a></div>',t=void 0,r=void 0,a=void 0,u=void 0,n=new RegExp(window.location.host,"ig"),function(){e(".fmt a").each(function(i){var a,l;t=e(this),a=t.attr("href"),!n.test(a)&&/^http/.test(a)&&t.attr("target","_blank"),e.each(o,function(e,n){a&&(r=a.match(n.reg),r&&t.after('<button class="btn btn-xs btn-default ml10 preview" data-url="'+r[1]+'" data-typeid="'+e+'">点击预览</button>'))}),a&&a.match(/youku\.com/g)&&(l=a.match(/id_\w+/),l&&(l=l[0].slice(3),t.addClass("v_"+l+"_"+i),e.get("https://openapi.youku.com/v2/videos/show_basic.json?video_id="+l+"&client_id=8fdab46779dd5d25",function(e){c(l+"_"+i,e)}))),a&&a.match(/tudou\.com/g)&&(/albumplay/.test(a)||/listplay/.test(a))&&(l=a.match(/http:\/\/www\.tudou\.com\/.+\/.+\/(.+)\.html/)[1],l&&(t.addClass("v_"+l+"_"+i),e.get("/api/util/video/info?app_key=269fe846bb7a17ec&format=json&itemCodes="+l,function(e){var t;e=e.data[0],t={thumbnail:e.picUrl,title:e.title,link:e.playUrl,player:e.outerPlayerUrl},c(l+"_"+i,t)})))}),e(".fmt").delegate(".preview","click",function(){o[e(this).data("typeid")].fn.call(this,e(this).data("url")),e(this).siblings("iframe").addClass("loading"),e(this).remove()}),e(".fmt img").each(function(){var t,n;n=new RegExp(window.location.origin,"i"),t=e(this).data("src"),e(this).css("cursor","pointer"),e(this).click(function(){0===e("#previewImg").length&&(e("body").addClass("isPreviewing").append('<div id="previewImg"><div class="loadingDot"><span class="glyphicon glyphicon-refresh rotate white"></span></div><div class="imgWrapper"><img></div><div class="menu"><a target="_blank" href="javascript:void(0);" class="link-orign">查看原图</a></div></div>'),n.test(t)||/^\/img\//i.test(t)?(e("#previewImg img")[0].src=e(this).attr("src")+"/view",e("#previewImg .link-orign").attr("href",e(this).attr("src")+"/view")):(e("#previewImg img")[0].src=e(this).attr("src"),e("#previewImg .link-orign").attr("href",e(this).attr("src"))),e("#previewImg img")[0].onload=function(){e("#previewImg .loadingDot").remove(),this.height>window.innerHeight&&(e("#previewImg .imgWrapper").css({lineHeight:window.innerHeight+"px"}),e("#previewImg").css("overflow-y","scroll")),this.width>window.innerWidth&&(e("#previewImg img").css("width","100%"),e("#previewImg .imgWrapper").css({lineHeight:"initial"}))},e("#previewImg").click(function(){e(this).remove(),e("body").removeClass("isPreviewing")}))})})}}),define("follow",["statusToggle"],function(e){"use strict";return function(t){var n,r;n=$.extend({element:null,event:"click",url:null,toggleClass:"active",loadText:"加载中",unActiveText:"加关注",activeText:"已关注","do":"follow",successFn:function(){},failFn:function(){}},t),r=t.element,e(r),r.on(n.event,function(){r.hasClass(n.toggleClass)?r.trigger("unactive",function(){r.text(n.unActiveText).removeClass(n.toggleClass).attr("disabled","disabled"),$.post(n.url+"/"+n.element.data("id")+"/"+n["do"]+"/cancel",function(e){0===e.status?n.successFn.call(this,e):(r.text(n.activeText),n.failFn.call(this,e)),r.removeAttr("disabled")})}):r.trigger("active",function(){r.text(n.activeText).addClass(n.toggleClass).attr("disabled","disabled"),$.post(n.url+"/"+n.element.data("id")+"/"+n["do"],function(e){0===e.status?n.successFn.call(this,e):(r.text(n.unActiveText),n.failFn.call(this,e)),r.removeAttr("disabled")})})})}}),define("tagPopup",["jquery","sfModal","follow","jquery_tmpl"],function(e,t,n){"use strict";e.fn.tagPopup=function(t){var r,i,o,a;o=function(){e.getJSON("/api/tag/"+r.data("id"),function(t){var i,o;0!==t.data.length&&(a.content=t.data.excerpt?"<p>"+t.data.excerpt+"</p>":'<p class="text-muted">目前还没有关于这个标签的解释</p>',t.data.isFollowed?(t.data.isFollowedClass="active",t.data.isFollowedBtn="已关注"):(t.data.isFollowedClass="",t.data.isFollowedBtn="加关注"),a.template=e.tmpl(a.template,t.data)[0],r.popover(a),r.popover("show"),o=e(".tag-popup-"+r.data("id")),i=o.find("button"),n({element:i,url:"/api/tag",successFn:function(t){e(".tag-popup-"+i.data("id")+" .followers").text(t.data+"人")}}))})},r=e(this),i=e(".tag-popup-"+r.data("id")),a={placement:r.data("placement")||"top",trigger:"manual",container:"body",content:"",html:!0,template:'<div class="popover tag-popup tag-popup-${id}">                <div class="arrow"></div>                <h3 class="popover-title"></h3>                <div class="popover-content"></div>                <div class="popover-footer">                    <a href="${url}">查看</a>                    <span class="text-muted">&middot;</span>                    <a href="${editUrl}">编辑</a>                    <span class="text-muted">&middot;</span>                    <a href="/feeds/tag/${name}">订阅</a>                    <div class="pull-right">                        <span class="text-muted followers">${followers} 人</span><button class="btn btn-default btn-xs tagfollow ${isFollowedClass}" data-id="${id}">${isFollowedBtn}</button></div></div></div>'},"show"===t?0===i.length?o():i.show():"hide"===t&&i.remove()}}),define("userFollow",["jquery","follow"],function(e,t){"use strict";e(".userfollow").each(function(){var n;n=e(this),t({element:n,url:"/api/user",successFn:function(t){n.data("callback")&&(n.parent().siblings("li").find(".follows").text(t.data),e(".funsCount").text(t.data)),n.data("refresh")&&location.reload()}})})}),define("911",["jquery","main"],function(e){"use strict";var t,n;t="",n="",e("#911").on("shown.bs.modal",function(r){var i;e(this).find("[type=radio]").first().focus(),n=e(r.relatedTarget).data("type"),t=e(r.relatedTarget).data("id"),i=e(r.relatedTarget).data("typetext"),e(".type-911").text(i),e(".radio-911").hide(),e(".radio-911.all, ."+n+"-only").show(),e("#J_returnMsg").hide().empty()}),e("#btwRadio input").change(function(){e("#911Desc").val("").text(""),e(".btw").removeClass("hide")}),e(".radio-911 input").not("#btwRadio input").change(function(){e(".btw").addClass("hide"),e("#911Desc").text(e(this).attr("value"))}),e("#911Submit").click(function(){e.post("/api/"+n+"/"+t+"/report",{reason:e("#911Desc").val()||e(".radio-911 input:checked").val()},function(t){0===t.status?location.reload():e("#J_returnMsg").text(t.data[1].id).show()},"json")})}),requirejs(["jquery","bookmark","statusToggle","comment","sfModal","sf_share","highLight","template","specialUrl","jquery_hoverIntent","tagPopup","main","userFollow","911","jquery_cookie","jquery_lazyload"],function(e,t,n,r,i,o,a,l,s){var c,u,d,f,p,h,m,g,v,b,y,w,x,k;e(".fmt").find("img").lazyload({data_attribute:"src"}),e(document).scroll(function(){e.cookie("showRegister")||(e(".widget-register").removeClass("hidden"),e(".widget-register .close").on("click",function(){e.cookie("showRegister","false",{expires:30,path:"/"}),e(".widget-register").addClass("widget-register-slideDown"),setTimeout(function(){e(".widget-register").remove()},1e3)}))}),w=function(){var t,n,r,i,o,a,l;t=e(".article"),n=t.find("h1, h2, h3"),e(".side").find(".post-nav").addClass("side-outline hidden-sm").data("width",e(".side-outline").width()).data("top",e(".side-outline").offset().top),i=e(".side-outline"),r=i.find(".highlight-title"),a=i.offset().top,e(".nav-body").css("top",0),e(window).scroll(function(){var t,o,a,l;o=e(this).scrollTop(),l=void 0,t=void 0,a=void 0,o>i.data("top")+e(".sfad-sidebar").height()+20?o+i.height()+parseFloat(e(".nav-body").css("top").replace(/px/,""))<e("footer").offset().top?i.removeClass("absolute").addClass("fixed").width(i.data("width")).css("top",0):i.removeClass("fixed").addClass("absolute").css("top",i.parents(".row").height()-i.height()):i.removeClass("fixed").css("width","100%"),n.eq(0).offset().top<o+40?(r.show(),n.each(function(s){return t=i.find("[href=#"+e(this).attr("id")+"]"),a=n.last().offset().top-o,n.eq(Math.min(Math.max(0,s+1),n.length-1)).offset().top>o+20||20>a?(20>a&&(t=i.find("a").last()),t.offset()&&(l=t.offset().top-t.parents(".nav-body").offset().top),t.parents(".articleIndex").find("li").removeClass("active"),t.parent().addClass("active"),r.css("top",l).height(t.outerHeight()),l+40>e(window).height()/2?e(".nav-body").css("top",-(t.parent().offset().top-t.parents(".nav-body").offset().top-e(window).height()/2)):e(".nav-body").css("top",0),!1):void 0})):(e(".articleIndex").find("li").removeClass("active"),r.hide())}),l=1,o=e(".articleIndex"),n.each(function(t){var n,r,i;i=e(this).text().trim(),""!==i&&(e(this).attr("id","articleHeader"+t),r=parseInt(e(this)[0].tagName.slice(1)),n=null,0===t||r===l?(n=e('<li><a href="#articleHeader'+t+'"></a></li>'),n.find("a").text(i),o.append(n)):r>l?(n=e("<li style='list-style:none;'><ul><li><a href=\"#articleHeader"+t+'"></a></li></ul></li>'),n.find("a").text(i),o.append(n),o=n.find("ul")):l>r&&(1===r?(n=e('<li><a href="#articleHeader'+t+'"></a></li>'),n.find("a").text(i),e(".articleIndex").append(n),o=e(".articleIndex")):(n=e("<li style='list-style:none;'><ul><li><a href=\"#articleHeader"+t+'"></a></li></ul></li>'),n.find("a").text(i),o.parents("ul").parents("ul").length?(o.parents("ul").parents("ul").append(n),o=n.find("ul")):(n=e('<li><a href="#articleHeader'+t+'"></a></li>'),n.find("a").text(i),e(".articleIndex").append(n),o=e(".articleIndex")))),l=r)})},a(e(".article.fmt")),s(),y=e("#articleTitle").data("id"),e(".widget-comments").removeClass("hidden"),e("#mainBookmark, #sideBookmark").each(function(){e(this).click(function(){var n;n=e(this),n.hasClass("active")?t.editBookmark(n,function(t,n){0===n&&e("#sideBookmark,#mainBookmark").each(function(){e(this).removeClass("active").text("收藏")}),e("#sideBookmarked").text(t.data)}):t.addBookmark(n,function(t){e("#sideBookmark, #mainBookmark").each(function(){e(this).addClass("active").text("已收藏")}),e("#sideBookmarked").text(t.data)})})}),u=e("#mainLike"),d=e("#sideLike"),f=e("#sideLiked"),n(u),n(d),e("#mainLike,#sideLike").each(function(){e(this).click(function(){var t;t=e(this),t.data("old",t.text()).text("加载中").attr("disabled","disabled"),t.hasClass("active")?t.trigger("unactive",function(){e.post("/api/article/"+t.data("id")+"/like/cancel",function(e){0===e.status?(u.text(e.data+" 推荐").removeClass("active"),d.text("推荐").removeClass("active"),f.text(e.data)):(u.text(t.data("old")),d.text("已推荐")),t.removeAttr("disabled")})}):t.trigger("active",function(){e.post("/api/article/"+t.data("id")+"/like",function(e){0===e.status?(u.text(e.data+" 已推荐").addClass("active"),d.text("已推荐").addClass("active"),f.text(e.data)):(u.text(t.data("old")),d.text("推荐")),t.removeAttr("disabled")})})})}),e("#SFEventObject").length>0?(x=JSON.parse(e("#SFEventObject").attr("value")),h=x.current[0],p=x.current[1],r.init(e("#comment-"+y)),"comment"===h?r.get(y,e("#comment-"+y),!0,p):r.get(y,e("#comment-"+y),!1)):(r.init(e("#comment-"+y)),r.get(y,e("#comment-"+y),!1)),e(".postComment").click(function(){r.set({trigger:e(this),form:e(this).parents(".widget-comments__form"),textarea:e(this).parents(".widget-comments__form").find("textarea"),reply:e(this).parents(".widget-comments__form").data("reply")})}),e("#articleHide").click(function(){var t;t=e(this),i({title:"确认隐藏",content:'<p><strong class="required radio-hide">隐藏理由：</strong></p><div>            <div class="radio-hide radio"><label><input type="radio" name="descRadio" value="行文排版有待改善" checked="">行文排版有待改善</label></div>            <div class="radio-hide radio"><label><input type="radio" name="descRadio" value="内容质量有待改进">内容质量有待改进</label></div>            <div class="radio-hide radio"><label><input type="radio" name="descRadio" value="推广（招聘、广告、SEO 等）方面的内容">推广（招聘、广告、SEO 等）方面的内容</label></div>            <div class="radio-hide radio"><label><input type="radio" name="descRadio" value="带有人身攻击、辱骂、仇恨等违反条款的内容">带有人身攻击、辱骂、仇恨等违反条款的内容</label></div>            <div class="radio-hide radio all btwRadio"><label><input type="radio" name="descRadio" value="">其他原因（请补充说明）</label></div>            <div class="btw" style="display:none;"><p class="mt20"><strong>补充说明：</strong></p><textarea class="form-control" rows="3" name="description" id="hideDesc"></textarea></div></div>',closeText:"取消",doneText:"隐藏",show:function(){e(".radio-hide input[type=radio]").change(function(){e(".radio-hide.btwRadio input").prop("checked")?e(".btw").show():e(".btw").hide()})},doneFn:function(){e.post("/api/article/"+t.data("id")+"/hide",{reason:e("#hideDesc").val()||e(".radio-hide input:checked").val()},function(e){0===e.status&&window.location.reload()})}})}),e("#articleShow").click(function(){var t;t=e(this),i({title:"确认隐藏",content:"您确认要显示文章「"+t.data("title")+"」吗？",closeText:"取消",doneText:"显示",doneFn:function(){e.post("/api/article/"+t.data("id")+"/hide/cancel",function(e){0===e.status&&window.location.reload()})}})}),e("#articleDel").click(function(){var t;t=e(this),i({title:"删除文章（请谨慎操作）",content:'<p><strong class="required radio-del">删除理由：</strong></p><div>            <div class="radio-del radio"><label><input type="radio" name="descRadio" value="推广（招聘、广告、SEO 等）方面的内容" checked="">推广（招聘、广告、SEO 等）方面的内容</label></div>            <div class="radio-del radio"><label><input type="radio" name="descRadio" value="带有人身攻击、辱骂、仇恨等违反条款的内容">带有人身攻击、辱骂、仇恨等违反条款的内容</label></div>            <!--<div class="radio-del radio"><label><input type="radio" name="descRadio" value="内容质量差，或不适合在本网站出现">内容质量差，或不适合在本网站出现</label></div>-->            <div class="radio-del radio all btwRadio"><label><input type="radio" name="descRadio" value="">其他原因（请补充说明）</label></div>            <div class="btw" style="display:none;"><p class="mt20"><strong>补充说明：</strong></p><textarea class="form-control" rows="3" name="description" id="deleteDesc"></textarea></div></div>',closeText:"取消",doneText:"删除",doneClass:"btn-danger",show:function(){var n,r;n=e(".btw"),r=t.data("isauthor"),r&&(e(".btwRadio input").click(),n.siblings().hide(),n.show(),n.find(".mt20").hide()),e(".radio-del input[type=radio]").change(function(){e(".radio-del.btwRadio input").prop("checked")?e(".btw").show():e(".btw").hide()})},doneFn:function(){var n;return(n=e("#deleteDesc").val()||e(".radio-del input:checked").val())?(e(".btn-danger").attr("disabled","disabled"),void e.post("/api/article/"+t.data("id")+"/delete",{reason:n},function(t){e(".btn-danger").removeAttr("disabled"),0===t.status&&location.reload()})):(e(".btw").addClass("has-error"),void e("#deleteDesc").after('<p class="help-block">请填写理由</p>'))}})}),e("#articleRecommend, #cancelDel").click(function(){var t;t=e(this),e.sfAjax(t,function(){location.reload()})}),e("#articlePublish").click(function(){var t;t=e(this),e.post("/api/article/"+e(this).data("id")+"/publish",function(e){e.status||location.reload()})}),b=e(".widget-share").data("text"),v=[],e(".article.fmt img").each(function(){var t;return t=e(this).attr("src"),0===t.indexOf("/img/")&&(t="http://"+location.host+t),v.push(t)}),e(".tagPopup .tag").each(function(){var t;t=e(this).data("img"),t&&v.push(t)}),v.length||v.push("http://tp1.sinaimg.cn/2036070420/180/40003289296/0"),m=e('meta[name="description"]').attr("content"),new o(".widget-share",{image:v.join("||"),text:"【"+b+"】分享自 @SegmentFault，文章传送门：",title:"【"+b+"】分享自 @SegmentFault，文章传送门：",networks:{renren:{title:b+" - SegmentFault",description:m+"... ",comment:""},douban:{title:b+" - SegmentFault",description:m+"...  ",comment:""},twitter:{text:"【"+b+"】分享自@segment_fault，文章传送门：",title:"【"+b+"】分享自@segment_fault，文章传送门："}}}),e(".article").find("h1, h2, h3").length&&(e(".post-nav").show(),w(),0===e(".articleIndex li").length&&e(".widget-outline").remove()),e(".tagPopup").hoverIntent(function(){var t;t=e(this).find(".tag"),e(".tag").tagPopup("hide"),t.tagPopup("show")},function(){var t;t=e(this).find(".tag"),t.tagPopup("hide")}),k=void 0,c=e(".dont-likeweibo"),c.click(function(){e.cookie("dontlikeShare",!0,{path:"/"})}),"true"===e.cookie("shareArticleToWeibo")&&(k="http://service.weibo.com/share/share.php?url="+window.location+"?utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare&title=我在 @SegmentFault 发布了文章【"+encodeURIComponent(e("#articleTitle").text())+"】，传送门：&appkey=1742025894",e("#shareToWeiboModal").find("#shareLink").attr("href",k),e("#shareToWeiboModal").modal("show"),e.removeCookie("shareArticleToWeibo",{path:"/"})),e("#reloadCaptcha").click(function(){e(this).find("img").attr("src","/user/captcha?w=178&h=35")}),g=e("#mail").val(),e("#user").submit(function(t){var n,r,i,o,a,l;t.preventDefault(),n=e(this),r=n.find("input").not("input[disabled]"),o=r.index(e("input:focus")),a=r.slice(o+1),i=!1,a.length&&a.each(function(){var t,n;return n=e(this).attr("type"),t=["text","email","password","url"],e(this).val()||-1===t.indexOf(n)?void 0:(e(this).focus(),i=!0,!1)}),i||(n.find("button[type=submit]").attr("disabled","disabled"),g=e("input[name=mail]").val(),l={mail:g,name:e("input[name=name]").val(),password:e("input[name=password]").val(),captcha:e("#captcha").val(),ref:e("input[name=ref]").val()},e.post("/api/user/register",l,function(t){n.find("button[type=submit]").removeAttr("disabled"),0===t.status?location.reload():(e("#captcha").val(""),e("#reloadCaptcha img").attr("src","/user/captcha?w=178&h=35"),t.data[1].captcha&&(e("#captcha").removeAttr("disabled"),e("#captcha").parents(".captcha-part").show()))}))}),e(".follow-article").click(function(t){var n;t.preventDefault(),n=e(this),n.attr("disabled","disabled"),e.sfAjax(n,function(){n.hasClass("active")?n.removeClass("active").text("关注专栏"):n.addClass("active").text("取消关注"),n.removeAttr("disabled")})})}),define("blog_post",function(){});